"use strict";(self.webpackChunkmrx_link_git=self.webpackChunkmrx_link_git||[]).push([[262],{8757:(e,t,n)=>{n.r(t),n.d(t,{DiffModel:()=>b,Git:()=>ue,IGitExtension:()=>ge,NotebookDiff:()=>Zi,PlainTextDiff:()=>le,checkLicense:()=>Ro,default:()=>Fo});var i=n(3770),r=n(96148),s=n(96468),o=n(56541),a=n(98337),l=n(13205),c=n(54674),d=n(82882),h=n(34456),p=n(16077),m=n(89381),g=n(19850),u=n(41797),f=n(23706),_=n(56271),v=n.n(_),C=n(6168);class b{constructor(e){this._isDisposed=!1,this._challenger=e.challenger,this._filename=e.filename,this._reference=e.reference,this._repositoryPath=e.repositoryPath,this._base=e.base,this._changed=new C.Signal(this)}get changed(){return this._changed}_didContentChange(e,t){return e.label!==t.label||e.source!==t.source||e.updateAt!==t.updateAt}get challenger(){return this._challenger}set challenger(e){this._didContentChange(this._challenger,e)&&(this._challenger=e,this._changed.emit({type:"challenger"}))}get filename(){return this._filename}get reference(){return this._reference}set reference(e){this._didContentChange(this._reference,e)&&(this._reference=e,this._changed.emit({type:"reference"}))}get repositoryPath(){return this._repositoryPath}get base(){return this._base}get hasConflict(){return void 0!==this._base}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,C.Signal.clearData(this))}}var y=n(22041),w=n(28681),x=n.n(w),k=n(63708);const E="CodeMirror-patchgutter";var S;!function(e){e[e.Equal=k.DIFF_EQUAL]="Equal",e[e.Delete=k.DIFF_DELETE]="Delete",e[e.Insert=k.DIFF_INSERT]="Insert"}(S||(S={}));const F=x().Pos,R="http://www.w3.org/2000/svg";class D{constructor(e,t){this.mv=e,this.type=t,this.classes="left"==t?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}init(e,t,n){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=x()(e,Object.assign(Object.assign({},n),{value:t,readOnly:!this.mv.options.allowEditingOriginals})),"align"==this.mv.options.connect&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new oe(this.edit)),this.orig.state.trackAlignable=new oe(this.orig)),this.lockButton.title=this.edit.phrase("Toggle locked scrolling"),this.orig.state.diffViews=[this];let i=n.chunkClassLocation||"background";"[object Array]"!=Object.prototype.toString.call(i)&&(i=[i]),this.classes.classLocation=i,this.diff=K(q(t),q(n.value),this.mv.options.ignoreWhitespace),this.chunks=Y(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=!1!==n.showDifferences}registerEvents(e){this.forceUpdate=D.registerUpdate(this),D.setScrollLock(this,!0,!1),D.registerScroll(this,e)}setShowDifferences(e){(e=!1!==e)!=this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}static setScrollLock(e,t,n){e.lockScroll=t,t&&0!=n&&D.syncScroll(e,!0)&&H(e),(t?x().addClass:x().rmClass)(e.lockButton,"CodeMirror-merge-scrolllock-enabled")}static registerUpdate(e){const t={from:0,to:0,marked:[]},n={from:0,to:0,marked:[]};let i,r=!1;function s(i){D.updating=!0,r=!1,"full"==i&&(e.svg&&se.clear(e.svg),e.copyButtons&&se.clear(e.copyButtons),j(e.edit,t.marked,e.classes),j(e.orig,n.marked,e.classes),t.from=t.to=n.from=n.to=0),N(e),e.showDifferences&&(M(e.edit,e.diff,t,S.Insert,e.classes),M(e.orig,e.diff,n,S.Delete,e.classes)),"align"==e.mv.options.connect&&A(e),H(e),null!=e.needsScrollSync&&D.syncScroll(e,e.needsScrollSync),D.updating=!1}function o(t){D.updating||(e.dealigned=!0,a(t))}function a(e){D.updating||r||(window.clearTimeout(i),!0===e&&(r=!0),i=window.setTimeout(s,!0===e?20:250))}function l(i,r){e.diffOutOfDate||(e.diffOutOfDate=!0,t.from=t.to=n.from=n.to=0),o(r.text.length-1!=r.to.line-r.from.line)}function c(){e.diffOutOfDate=!0,e.dealigned=!0,s("full")}return e.edit.on("change",l),e.orig.on("change",l),e.edit.on("swapDoc",c),e.orig.on("swapDoc",c),"align"===e.mv.options.connect&&(x().on(e.edit.state.trackAlignable,"realign",o),x().on(e.orig.state.trackAlignable,"realign",o)),e.edit.on("viewportChange",(function(){a(!1)})),e.orig.on("viewportChange",(function(){a(!1)})),s(),s}static registerScroll(e,t){e.edit.on("scroll",(function(){D.syncScroll(e,!0)&&H(e)})),e.orig.on("scroll",(function(){D.syncScroll(e,!1)&&H(e),t&&D.syncScroll(t,!0)&&H(t)}))}static syncScroll(e,t){if(e.diffOutOfDate)return e.lockScroll&&null==e.needsScrollSync&&(e.needsScrollSync=t),!1;if(e.needsScrollSync=null,!e.lockScroll)return!0;let n,i;const r=+new Date;if(t?(n=e.edit,i=e.orig):(n=e.orig,i=e.edit),n.state.scrollSetBy==e&&(n.state.scrollSetAt||0)+250>r)return!1;const s=n.getScrollInfo();let o=0;if("align"==e.mv.options.connect)o=s.top;else{const r=.5*s.clientHeight,a=s.top+r,l=n.lineAtHeight(a,"local"),c=function(e,t,n){let i,r,s,o;for(let a=0;a<e.length;a++){const l=e[a],c=n?l.editFrom:l.origFrom,d=n?l.editTo:l.origTo;null==r&&(c>t?(r=l.editFrom,o=l.origFrom):d>t&&(r=l.editTo,o=l.origTo)),d<=t?(i=l.editTo,s=l.origTo):c<=t&&(i=l.editFrom,s=l.origFrom)}return{edit:{before:i,after:r},orig:{before:s,after:o}}}(e.chunks,l,t),d=D.getOffsets(n,t?c.edit:c.orig),h=D.getOffsets(i,t?c.orig:c.edit),p=(a-d.top)/(d.bot-d.top);let m,g;if(o=h.top-r+p*(h.bot-h.top),o>s.top)g=s.top/r,g<1&&(o=o*g+s.top*(1-g));else if(m=s.height-s.clientHeight-s.top,m<r){const e=i.getScrollInfo();e.height-e.clientHeight-o>m&&(g=m/r,g<1&&(o=o*g+(e.height-e.clientHeight-m)*(1-g)))}}return i.scrollTo(s.left,o),i.state.scrollSetAt=r,i.state.scrollSetBy=e,!0}static getOffsets(e,t){let n=t.after;return null==n&&(n=e.lastLine()+1),{top:e.heightAtLine(t.before||0,"local"),bot:e.heightAtLine(n,"local")}}}function N(e){e.diffOutOfDate&&(e.diff=K(e.orig.getValue(),e.edit.getValue(),e.mv.options.ignoreWhitespace),e.chunks=Y(e.diff),e.diffOutOfDate=!1,x().signal(e.edit,"updateDiff",e.diff))}function L(e,t,n){const i=n.classLocation;for(let r=0;r<i.length;r++)e.removeLineClass(t,i[r],n.chunk),e.removeLineClass(t,i[r],n.start),e.removeLineClass(t,i[r],n.end)}function j(e,t,n){for(let i=0;i<t.length;++i){const r=t[i];"clear"in r?r.clear():r.parent&&L(e,r,n)}t.length=0,e.clearGutter(E)}function M(e,t,n,i,r){const s=e.getViewport();e.operation((function(){n.from==n.to||s.from-n.to>20||n.from-s.to>20?(j(e,n.marked,r),B(e,t,i,n.marked,s.from,s.to,r),n.from=s.from,n.to=s.to):(s.from<n.from&&(B(e,t,i,n.marked,s.from,n.from,r),n.from=s.from),s.to>n.to&&(B(e,t,i,n.marked,n.to,s.to,r),n.to=s.to))}))}function I(e,t,n,i,r,s){const o=n.classLocation,a=e.getLineHandle(t);for(let t=0;t<o.length;t++)i&&e.addLineClass(a,o[t],n.chunk),r&&e.addLineClass(a,o[t],n.start),s&&e.addLineClass(a,o[t],n.end);return a}function P(e){const t=document.createElement("div");return t.className=e?"CodeMirror-patchgutter-delete":"CodeMirror-patchgutter-insert",t}function B(e,t,n,i,r,s,o){let a=F(0,0);const l=F(r,0),c=e.clipPos(F(s-1)),d=n==S.Delete?o.del:o.insert;function h(t,a){const l=Math.max(r,t),c=Math.min(s,a);for(let r=l;r<c;++r)i.push(I(e,r,o,!0,r==t,r==a-1)),e.setGutterMarker(r,E,P(n==S.Delete));t==a&&l==a&&c==a&&(l?i.push(I(e,l-1,o,!1,!1,!0)):i.push(I(e,l,o,!1,!0,!1)))}let p=0,m=!1;for(let r=0;r<t.length;++r){const s=t[r],o=s[0],g=s[1];if(o==S.Equal){const e=a.line+(Q(t,r)?0:1);ie(a,g);const n=a.line+(J(t,r)?1:0);n>e&&(m&&(h(p,e),m=!1),p=n)}else if(m=!0,o==n){const t=ie(a,g,!0),n=se.posMax(l,a),r=se.posMin(c,t);se.posEq(n,r)||i.push(e.markText(n,r,{className:d})),a=t}}m&&h(p,a.line+1)}function H(e){if(!e.showDifferences)return;let t=0;e.svg&&(se.clear(e.svg),t=e.gap.offsetWidth,se.attrs(e.svg,"width",t,"height",e.gap.offsetHeight)),e.copyButtons&&se.clear(e.copyButtons);const n=e.edit.getViewport(),i=e.orig.getViewport(),r=e.mv.wrap.getBoundingClientRect().top,s=r-e.edit.getScrollerElement().getBoundingClientRect().top+e.edit.getScrollInfo().top,o=r-e.orig.getScrollerElement().getBoundingClientRect().top+e.orig.getScrollInfo().top;for(let r=0;r<e.chunks.length;r++){const a=e.chunks[r];a.editFrom<=n.to&&a.editTo>=n.from&&a.origFrom<=i.to&&a.origTo>=i.from&&G(e,a,o,s,t)}}function T(e,t){let n=0,i=0;for(let r=0;r<t.length;r++){const s=t[r];if(s.editTo>e&&s.editFrom<=e)return null;if(s.editFrom>e)break;n=s.editTo,i=s.origTo}return i+(e-n)}function O(e,t,n){const i=e.state.trackAlignable;let r=e.firstLine(),s=0;const o=[];for(let e=0;;e++){const a=t[e],l=a?n?a.origFrom:a.editFrom:1e9;for(;s<i.alignable.length;s+=2){const e=i.alignable[s]+1;if(!(e<=r)){if(!(e<=l))break;o.push(e)}}if(!a)break;o.push(r=n?a.origTo:a.editTo)}return o}function V(e,t,n,i){let r=0,s=0,o=0,a=0;e:for(;;r++){const l=e[r],c=t[s];if(!l&&null==c)break;const d=l?l[0]:1e9,h=null==c?1e9:c;for(;o<n.length;){const e=n[o];if(e.origFrom<=h&&e.origTo>h){s++,r--;continue e}if(e.editTo>d){if(e.editFrom<=d)continue e;break}a+=e.origTo-e.origFrom-(e.editTo-e.editFrom),o++}if(d==h-a)l[i]=h,s++;else if(d<h-a)l[i]=d+a;else{const t=[h-a,null,null];t[i]=h,e.splice(r,0,t),s++}}}function A(e,t){if(!e.dealigned&&!t)return;if(!e.orig.curOp)return e.orig.operation((function(){A(e,t)}));e.dealigned=!1;const n=e.mv.left==e?e.mv.right:e.mv.left;n&&(N(n),n.dealigned=!1);const i=function(e,t){const n=O(e.edit,e.chunks,!1),i=[];if(t)for(let e=0,i=0;e<t.chunks.length;e++){const r=t.chunks[e].editTo;for(;i<n.length&&n[i]<r;)i++;i!=n.length&&n[i]==r||n.splice(i++,0,r)}for(let e=0;e<n.length;e++)i.push([n[e],null,null]);return V(i,O(e.orig,e.chunks,!0),e.chunks,1),t&&V(i,O(t.orig,t.chunks,!0),t.chunks,2),i}(e,n),r=e.mv.aligners;for(let e=0;e<r.length;e++)r[e].clear();r.length=0;const s=[e.edit,e.orig],o=[];n&&s.push(n.orig);for(let e=0;e<s.length;e++)o.push(s[e].getScrollInfo().top);for(let e=0;e<i.length;e++)z(s,i[e],r);for(let e=0;e<s.length;e++)s[e].scrollTo(null,o[e])}function z(e,t,n){let i=0;const r=[];for(let n=0;n<e.length;n++)if(null!=t[n]){const s=e[n].heightAtLine(t[n],"local");r[n]=s,i=Math.max(i,s)}for(let s=0;s<e.length;s++)if(null!=t[s]){const o=i-r[s];o>1&&n.push(U(e[s],t[s],o))}}function U(e,t,n){let i=!0;t>e.lastLine()&&(t--,i=!1);const r=document.createElement("div");return r.className="CodeMirror-merge-spacer",r.style.height=n+"px",r.style.minWidth="1px",e.addLineWidget(t,r,{height:n,above:i,mergeSpacer:!0,handleMouseEvents:!0})}function G(e,t,n,i,r){const s="left"==e.type,o=e.orig.heightAtLine(t.origFrom,"local",!0)-n;if(e.svg){let a=o,l=e.edit.heightAtLine(t.editFrom,"local",!0)-i;if(s){const e=a;a=l,l=e}let c=e.orig.heightAtLine(t.origTo,"local",!0)-n,d=e.edit.heightAtLine(t.editTo,"local",!0)-i;if(s){const e=c;c=d,d=e}const h=" C "+r/2+" "+l+" "+r/2+" "+a+" "+(r+2)+" "+a,p=" C "+r/2+" "+c+" "+r/2+" "+d+" -1 "+d;se.attrs(e.svg.appendChild(document.createElementNS(R,"path")),"d","M -1 "+l+h+" L "+(r+2)+" "+c+p+" z","class",e.classes.connect)}if(e.copyButtons){const n=e.copyButtons.appendChild(se.elt("div","left"===e.type?"⇝":"⇜","CodeMirror-merge-copy")),r=e.mv.options.allowEditingOriginals;if(n.title=e.edit.phrase(r?"Push to left":"Revert chunk"),n.chunk=t,n.style.top=(t.origTo>t.origFrom?o:e.edit.heightAtLine(t.editFrom,"local")-i)+"px",r){const n=e.edit.heightAtLine(t.editFrom,"local")-i,r=e.copyButtons.appendChild(se.elt("div","right"==e.type?"⇝":"⇜","CodeMirror-merge-copy-reverse"));r.title="Push to right",r.chunk={editFrom:t.origFrom,editTo:t.origTo,origFrom:t.editFrom,origTo:t.editTo},r.style.top=n+"px","right"==e.type?r.style.left="2px":r.style.right="2px"}}}function Z(e,t,n,i){if(e.diffOutOfDate)return;const r=i.origTo>n.lastLine()?F(i.origFrom-1):F(i.origFrom,0),s=F(i.origTo,0),o=i.editTo>t.lastLine()?F(i.editFrom-1):F(i.editFrom,0),a=F(i.editTo,0),l=e.mv.options.revertChunk;l?l(e.mv,n,r,s,t,o,a):t.replaceRange(n.getRange(r,s),o,a)}D.updating=!1;class W{constructor(e,t){this.options=t;const n=null==t.origLeft?t.orig:t.origLeft,i=t.origRight,r=null!=n,s=null!=i,o=1+(r?1:0)+(s?1:0),a=[];let l=this.left=null,c=this.right=null;const d=this;let h=null;r&&(l=this.left=new D(this,"left"),h=se.elt("div",null,"CodeMirror-merge-pane CodeMirror-merge-left"),a.push(h),a.push($(l)));const p=se.elt("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");a.push(p);let m=null;s&&(c=this.right=new D(this,"right"),a.push($(c)),m=se.elt("div",null,"CodeMirror-merge-pane CodeMirror-merge-right"),a.push(m)),(s?m:p).className+=" CodeMirror-merge-pane-rightmost",a.push(se.elt("div",null,null,"height: 0; clear: both;"));const g=this.wrap=e.appendChild(se.elt("div",a,"CodeMirror-merge CodeMirror-merge-"+o+"pane"));if(this.edit=x()(p,Object.assign({},t)),this.edit.getOption("gutters").indexOf(E)<0){const e=[];this.edit.getOption("lineNumbers")&&e.push("CodeMirror-linenumbers"),e.push(E),this.edit.setOption("gutters",e),t.gutters=e}l&&l.init(h,n,t),c&&c.init(m,i,t),t.collapseIdentical&&this.editor().operation((function(){!function(e,t){"number"!=typeof t&&(t=2);const n=[],i=e.editor(),r=i.firstLine();for(let e=r,t=i.lastLine();e<=t;e++)n.push(!0);e.left&&ne(e.left,t,r,n),e.right&&ne(e.right,t,r,n);for(let s=0;s<n.length;s++)if(n[s]){const o=s+r;let a=0;for(a=1;s<n.length-1&&n[s+1];s++,a++);if(a>t){const t=[{line:o,cm:i}];e.left&&t.push({line:T(o,e.left.chunks),cm:e.left.orig}),e.right&&t.push({line:T(o,e.right.chunks),cm:e.right.orig});const n=te(a,t);e.options.onCollapse&&e.options.onCollapse(e,o,a,n)}}}(d,t.collapseIdentical)})),"align"==t.connect&&(this.aligners=[],A(this.left||this.right,!0)),l&&l.registerEvents(c),c&&c.registerEvents(l);const u=function(){l&&H(l),c&&H(c)};x().on(window,"resize",u);const f=setInterval((function(){let e=null;for(e=g.parentNode;e&&e!==document.body;e=e.parentNode);e||(clearInterval(f),x().off(window,"resize",u))}),5e3)}editor(){return this.edit}rightOriginal(){return this.right&&this.right.orig}leftOriginal(){return this.left&&this.left.orig}setShowDifferences(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)}rightChunks(){if(this.right)return N(this.right),this.right.chunks}leftChunks(){if(this.left)return N(this.left),this.left.chunks}}function $(e){const t=e.lockButton=se.elt("div",null,"CodeMirror-merge-scrolllock"),n=se.elt("div",[t],"CodeMirror-merge-scrolllock-wrap");x().on(t,"click",(function(){D.setScrollLock(e,!e.lockScroll)}));const i=[n];if(!1!==e.mv.options.revertButtons&&(e.copyButtons=se.elt("div",null,"CodeMirror-merge-copybuttons-"+e.type),x().on(e.copyButtons,"click",(function(t){const n=t.target||t.srcElement;n.chunk&&("CodeMirror-merge-copy-reverse"!=n.className?Z(e,e.edit,e.orig,n.chunk):Z(e,e.orig,e.edit,n.chunk))})),i.unshift(e.copyButtons)),"align"!=e.mv.options.connect){let t=document.createElementNS&&document.createElementNS(R,"svg");t&&!t.createSVGRect&&(t=null),e.svg=t,t&&i.push(t)}return e.gap=se.elt("div",i,"CodeMirror-merge-gap")}function q(e){return"string"==typeof e?e:e.getValue()}let X;function K(e,t,n){X||(X=new k.diff_match_patch);const i=X.diff_main(e,t);X.diff_cleanupSemantic(i);for(let e=0;e<i.length;++e){const t=i[e];(n?/[^ \t]/.test(t[1]):t[1])?e&&i[e-1][0]==t[0]&&(i.splice(e--,1),i[e][1]+=t[1]):i.splice(e--,1)}return i}function Y(e){const t=[];if(!e.length)return t;let n=0,i=0;const r=F(0,0),s=F(0,0);for(let o=0;o<e.length;++o){const a=e[o],l=a[0];if(l==S.Equal){const l=!Q(e,o)||r.line<n||s.line<i?1:0,c=r.line+l,d=s.line+l;ie(r,a[1],null,s);const h=J(e,o)?1:0,p=r.line+h,m=s.line+h;p>c&&(o&&t.push({origFrom:i,origTo:d,editFrom:n,editTo:c}),n=p,i=m)}else ie(l==S.Insert?r:s,a[1])}return(n<=r.line||i<=s.line)&&t.push({origFrom:i,origTo:s.line+1,editFrom:n,editTo:r.line+1}),t}function J(e,t){if(t===e.length-1)return!0;let n=e[t+1][1];return!(1===n.length&&t<e.length-2||10!==n.charCodeAt(0)||t!==e.length-2&&(n=e[t+2][1],!(n.length>1||t==e.length-3)||10!==n.charCodeAt(0)))}function Q(e,t){if(0===t)return!0;let n=e[t-1][1];return 10==n.charCodeAt(n.length-1)&&(1==t||(n=e[t-2][1],10==n.charCodeAt(n.length-1)))}function ee(e,t,n){e.addLineClass(t,"wrap","CodeMirror-merge-collapsed-line");const i=document.createElement("span");i.className="CodeMirror-merge-collapsed-widget",i.title=e.phrase("Identical text collapsed. Click to expand.");const r=e.markText(F(t,0),F(n-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:i,clearOnEnter:!0});function s(){r.clear(),e.removeLineClass(t,"wrap","CodeMirror-merge-collapsed-line")}return r.explicitlyCleared&&s(),x().on(i,"click",s),r.on("clear",s),x().on(i,"click",s),{mark:r,clear:s}}function te(e,t){const n=[];function i(){for(let e=0;e<n.length;e++)n[e].clear()}for(let r=0;r<t.length;r++){const s=t[r],o=ee(s.cm,s.line,s.line+e);n.push(o),o.mark.on("clear",i)}return n[0].mark}function ne(e,t,n,i){for(let r=0;r<e.chunks.length;r++){const s=e.chunks[r];for(let e=s.editFrom-t;e<s.editTo+t;e++){const t=e+n;t>=0&&t<i.length&&(i[t]=!1)}}}function ie(e,t,n,i){const r=n?F(e.line,e.ch):e;let s=0;for(;;){const e=t.indexOf("\n",s);if(-1==e)break;++r.line,i&&++i.line,s=e+1}return r.ch=(s?0:r.ch)+(t.length-s),i&&(i.ch=(s?0:i.ch)+(t.length-s)),r}var re,se;!function(e){e[e.F_WIDGET=1]="F_WIDGET",e[e.F_WIDGET_BELOW=2]="F_WIDGET_BELOW",e[e.F_MARKER=4]="F_MARKER"}(re||(re={}));class oe{constructor(e){this.cm=e,this.alignable=[],this.height=e.doc.height;const t=this;e.on("markerAdded",(function(e,n){if(!n.collapsed)return;const i=n.find(1);null!=i&&t.set(i.line,re.F_MARKER)})),e.on("markerCleared",(function(e,n,i,r){null!==r&&n.collapsed&&t.check(r,re.F_MARKER,t.hasMarker)})),e.on("markerChanged",this.signal.bind(this)),e.on("lineWidgetAdded",(function(e,n,i){n.mergeSpacer||(n.above?t.set(i-1,re.F_WIDGET_BELOW):t.set(i,re.F_WIDGET))})),e.on("lineWidgetCleared",(function(e,n,i){n.mergeSpacer||(n.above?t.check(i-1,re.F_WIDGET_BELOW,t.hasWidgetBelow):t.check(i,re.F_WIDGET,t.hasWidget))})),e.on("lineWidgetChanged",this.signal.bind(this)),e.on("change",(function(e,n){const i=n.from.line,r=n.to.line-n.from.line,s=n.text.length-1,o=i+s;(r||s)&&t.map(i,r,s),t.check(o,re.F_MARKER,t.hasMarker),(r||s)&&t.check(n.from.line,re.F_MARKER,t.hasMarker)})),e.on("viewportChange",(function(){t.cm.doc.height!==t.height&&t.signal()}))}signal(){x().signal(this,"realign"),this.height=this.cm.doc.height}set(e,t){let n=-1;for(;n<this.alignable.length;n+=2){const i=this.alignable[n]-e;if(0==i){if((this.alignable[n+1]&t)==t)return;return this.alignable[n+1]|=t,void this.signal()}if(i>0)break}this.signal(),this.alignable.splice(n,0,e,t)}find(e){for(let t=0;t<this.alignable.length;t+=2)if(this.alignable[t]==e)return t;return-1}check(e,t,n){const i=this.find(e);if(-1!=i&&this.alignable[i+1]&t&&!n.call(this,e)){this.signal();const e=this.alignable[i+1]&~t;e?this.alignable[i+1]=e:this.alignable.splice(i,2)}}hasMarker(e){const t=this.cm.getLineHandle(e);if(t.markedSpans)for(let e=0;e<t.markedSpans.length;e++)if(t.markedSpans[e].marker.collapsed&&null!==t.markedSpans[e].to)return!0;return!1}hasWidget(e){const t=this.cm.getLineHandle(e);if(t.widgets)for(let e=0;e<t.widgets.length;e++)if(!t.widgets[e].above&&!t.widgets[e].mergeSpacer)return!0;return!1}hasWidgetBelow(e){if(e==this.cm.lastLine())return!1;const t=this.cm.getLineHandle(e+1);if(t.widgets)for(let e=0;e<t.widgets.length;e++)if(t.widgets[e].above&&!t.widgets[e].mergeSpacer)return!0;return!1}map(e,t,n){const i=n-t,r=e+t;let s=-1,o=-1;for(let t=0;t<this.alignable.length;t+=2){const n=this.alignable[t];n==e&&this.alignable[t+1]&re.F_WIDGET_BELOW&&(s=t),n==r&&this.alignable[t+1]&re.F_WIDGET_BELOW&&(o=t),n<=e||(n<r?this.alignable.splice(t--,2):this.alignable[t]+=i)}if(s>-1){const e=this.alignable[s+1];e==re.F_WIDGET_BELOW?this.alignable.splice(s,2):this.alignable[s+1]=e&~re.F_WIDGET_BELOW}o>-1&&n&&this.set(e+n,re.F_WIDGET_BELOW)}}x().commands.goNextDiff=function(e){return se.goNearbyDiff(e,1)},x().commands.goPrevDiff=function(e){return se.goNearbyDiff(e,-1)},function(e){function t(e,t,n){for(let i=e.length-1;i>=0;i--){const r=e[i],s=(n?r.origTo:r.editTo)-1;if(s<t)return s}}function n(e,t,n){for(let i=0;i<e.length;i++){const r=e[i],s=n?r.origFrom:r.editFrom;if(s>t)return s}}e.elt=function(e,t,n,i){const r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(let e=0;e<t.length;++e)r.appendChild(t[e]);return r},e.clear=function(e){for(let t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild)},e.attrs=function(e,...t){for(let n=1;n<t.length;n+=2)e.setAttribute(t[n],t[n+1])},e.posMin=function(e,t){return(e.line-t.line||e.ch-t.ch)<0?e:t},e.posMax=function(e,t){return(e.line-t.line||e.ch-t.ch)>0?e:t},e.posEq=function(e,t){return e.line==t.line&&e.ch==t.ch},e.goNearbyDiff=function(e,i){let r=null;const s=e.state.diffViews,o=e.getCursor().line;if(s)for(let a=0;a<s.length;a++){const l=s[a],c=e==l.orig;N(l);const d=i<0?t(l.chunks,o,c):n(l.chunks,o,c);null==d||null!=r&&!(i<0?d>r:d<r)||(r=d)}if(null==r)return x().Pass;e.setCursor(r,0)}}(se||(se={}));const ae=async(e,t,n)=>{const i=new le(e,n.load("mrx_link_git"));return await i.ready,i};class le extends f.Widget{constructor(e,t){var n,i,r;super({node:le.createNode(e.reference.label,null===(n=e.base)||void 0===n?void 0:n.label,e.challenger.label)}),this._reference=null,this._challenger=null,this._base=null;const s=new u.PromiseDelegate;this._isReady=s.promise,this._container=this.node.lastElementChild,this._model=e,this._trans=null!=t?t:h.nullTranslator.load("mrx_link_git"),Promise.all([this._model.reference.content(),this._model.challenger.content(),null!==(r=null===(i=this._model.base)||void 0===i?void 0:i.content())&&void 0!==r?r:Promise.resolve(null)]).then((([e,t,n])=>{this._reference=e,this._challenger=t,this._base=n,s.resolve()})).catch((e=>{this.showError(e),s.resolve()}))}get _hasConflict(){return this._model.hasConflict}get isFileResolved(){return!0}get ready(){return this._isReady}getResolvedFile(){var e,t;const n=null!==(t=null===(e=this._mergeView)||void 0===e?void 0:e.editor().getValue())&&void 0!==t?t:null;return null!==n?Promise.resolve({type:"file",format:"text",content:n}):Promise.reject(this._trans.__("Failed to get a valid file value."))}onAfterAttach(){this.ready.then((()=>{null!==this._challenger&&null!==this._reference&&this.createDiffView(this._challenger,this._reference,this._hasConflict?this._base:null)})).catch((e=>{this.showError(e)}))}onBeforeDetach(){this._container.innerHTML=""}async refresh(){var e,t;await this.ready;try{this._container.innerHTML="",this._mergeView=null,null!==this._reference&&(this._reference=await this._model.reference.content()),null!==this._challenger&&(this._challenger=await this._model.challenger.content()),null!==this._base&&(this._base=null!==(t=await(null===(e=this._model.base)||void 0===e?void 0:e.content()))&&void 0!==t?t:null),this.createDiffView(this._challenger,this._reference,this._hasConflict?this._base:null),this._challenger=null,this._reference=null,this._base=null}catch(e){this.showError(e)}}static createNode(...e){const t=void 0!==e[1]?"jp-git-merge-banner":"jp-git-diff-banner",n=document.createElement("div");return n.className="jp-git-diff-root",n.innerHTML=`\n    <div class="${t}">\n      ${e.filter((e=>!!e)).map((e=>`<span>${e}</span>`)).join('<span class="jp-spacer"></span>')}\n    </div>\n    <div class="jp-git-PlainText-diff"></div>`,n}async createDiffView(e,t,n){if(!this._mergeView){const i=y.Mode.findByFileName(this._model.filename)||y.Mode.findBest(this._model.filename);let r=Object.assign({value:e,orig:t,mode:i.mime},this.getDefaultOptions());null!=n&&(r=Object.assign(Object.assign({},r),{origLeft:t,value:n,origRight:e,readOnly:!1,revertButtons:!0})),this._mergeView=function(e,t){return new W(e,t)}(this._container,r)}return Promise.resolve()}showError(e){var t;console.error(this._trans.__("Failed to load file diff."),e,null===(t=e)||void 0===t?void 0:t.traceback);const n=(e.message||e).replace("\n","<br />");this.node.innerHTML=`<p class="jp-git-diff-error">\n      <span>${this._trans.__("Error Loading File Diff:")}</span>\n      <span class="jp-git-diff-error-message">${n}</span>\n    </p>`}getDefaultOptions(){return{lineNumbers:!0,theme:"jupyter",connect:"align",collapseIdentical:!0,readOnly:!0,revertButtons:!1}}}var ce=n(98196),de=n.n(ce),he=n(26194),pe=n(56078),me=n(14982);const ge=new u.Token("jupyter.extensions.git_plugin");var ue,fe,_e,ve;!function(e){let t;!function(e){let t;!function(e){e[e.WORKING=0]="WORKING",e[e.INDEX=1]="INDEX",e[e.BASE=2]="BASE"}(t=e.SpecialRef||(e.SpecialRef={}))}(t=e.Diff||(e.Diff={}));class n extends me.ServerConnection.ResponseError{constructor(e,t=`Invalid response: ${e.status} ${e.statusText}`,n="",i={}){super(e,t),this.traceback=n,this._json=i}get json(){return this._json}}e.GitResponseError=n;class i extends Error{constructor(){super("Not in a Git Repository")}}e.NotInRepository=i}(ue||(ue={})),function(e){e[e.SUCCESS=10]="SUCCESS",e[e.INFO=20]="INFO",e[e.RUNNING=30]="RUNNING",e[e.WARNING=40]="WARNING",e[e.ERROR=50]="ERROR"}(fe||(fe={})),function(e){e.gitCommitAmendStaged="link-git:context-commitAmendStaged",e.gitFileAdd="link-git:context-add",e.gitFileDiff="link-git:context-diff",e.gitFileDiscard="link-git:context-discard",e.gitFileDelete="link-git:context-delete",e.gitFileOpen="link-git:context-open",e.gitFileUnstage="link-git:context-unstage",e.gitFileStage="link-git:context-stage",e.gitFileTrack="link-git:context-track",e.gitFileHistory="link-git:context-history",e.gitIgnore="link-git:context-ignore",e.gitIgnoreExtension="link-git:context-ignoreExtension",e.gitNoAction="link-git:no-action"}(_e||(_e={})),function(e){e.gitUI="link-git:ui",e.gitTerminalCommand="link-git:terminal-command",e.gitInit="link-git:init",e.gitOpenUrl="link-git:open-url",e.gitToggleSimpleStaging="link-git:toggle-simple-staging",e.gitToggleDoubleClickDiff="link-git:toggle-double-click-diff",e.gitAddRemote="link-git:add-remote",e.gitClone="link-git:clone",e.gitMerge="link-git:merge",e.gitOpenGitignore="link-git:open-gitignore",e.gitPush="link-git:push",e.gitPull="link-git:pull",e.gitSubmitCommand="link-git:submit-commit",e.gitShowDiff="link-git:show-diff"}(ve||(ve={}));const Ce=["Invalid username or password","could not read Username","could not read Password"];async function be(e="",t="GET",n=null,i="link-git"){const r=me.ServerConnection.makeSettings(),s=p.URLExt.join(r.baseUrl,i,e),o={method:t,body:n?JSON.stringify(n):void 0};let a;try{a=await me.ServerConnection.makeRequest(s,o,r)}catch(e){throw new me.ServerConnection.NetworkError(e)}let l=await a.text(),c=!1;if(l.length>0)try{l=JSON.parse(l),c=!0}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok){if(c){const{message:e,traceback:t}=l,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(l,["message","traceback"]);throw new ue.GitResponseError(a,e||`Invalid response: ${a.status} ${a.statusText}`,t||"",n)}throw new ue.GitResponseError(a,l)}return l}var ye=n(98908);class we{constructor(e){this._isDisposed=!1,this._taskList=new ye.LinkedList,this._taskChanged=new C.Signal(e)}get isDisposed(){return this._isDisposed}get taskChanged(){return this._taskChanged}add(e){const t=this._generateTaskID();return this._taskList.addLast({id:t,task:e}),1===this._taskList.length&&this._taskChanged.emit(e),t}dispose(){this.isDisposed||(this._isDisposed=!0,C.Signal.clearData(this))}async execute(e,t){const n=this.add(e);try{return await t()}finally{this.remove(n)}}remove(e){let t=this._taskList.firstNode;if((null==t?void 0:t.value.id)===e)this._taskList.removeNode(t);else for(;t.next;)if(t=t.next,t.value&&t.value.id===e){this._taskList.removeNode(t);break}0===this._taskList.length?this._taskChanged.emit("empty"):this._taskChanged.emit(this._taskList.first.task)}_generateTaskID(){return u.UUID.uuid4()}}function xe(e,t){var n;return(null!==(n={D:["D","U"],A:["U","A"],U:["D","A","U"]}[e])&&void 0!==n?n:[]).includes(t)?"unmerged":"?"===e&&"?"===t?"untracked":" "!==e?" "!==t?"partially-staged":"staged":" "!==t?"unstaged":null}const ke=p.PageConfig.getBaseUrl();function Ee(e){const t=document.cookie.match("\\b"+e+"=([^;]*)\\b");return t?t[1]:void 0}function Se(e,t,n){return fetch(`${ke}${t}`,{method:e,headers:{"Content-Type":"application/json","X-CSRFToken":Ee("_xsrf")},body:JSON.stringify(n)}).then((e=>e.json()))}function Fe(e){return Se("GET",e)}function Re(e,t){return Se("POST",e,t)}const De={};function Ne(e){var t,n;return null===(n=De[null===(t=p.PathExt.extname(e))||void 0===t?void 0:t.toLocaleLowerCase()])||void 0===n?void 0:n.callback}class Le{constructor(e=null,t=null,n){let i;this._fetchRemotes=async()=>{try{const e=await this._getPathRepository();await be(p.URLExt.join(e,"remote","fetch"),"POST")}catch(e){console.error("Failed to fetch remotes",e)}},this._refreshModel=async()=>{await this._taskHandler.execute("link-git:refresh",(async()=>{try{await this.refreshBranch(),await this.refreshStatus(),await this.checkRemoteChangeNotified()}catch(e){console.error("Failed to refresh git status",e)}}))},this._refreshStandby=()=>!(null!==this.pathRepository&&!this._standbyCondition())||"when-hidden",this._pathRepository=null,this._branches=[],this._currentBranch=null,this._isDisposed=!1,this._markerCache=new Me((()=>this._markChanged.emit())),this.__currentMarker=null,this._readyPromise=Promise.resolve(),this._pendingReadyPromise=0,this._standbyCondition=()=>!1,this._remoteChangedFiles=[],this._changeUpstreamNotified=[],this._selectedHistoryFile=null,this._headChanged=new C.Signal(this),this._markChanged=new C.Signal(this),this._selectedHistoryFileChanged=new C.Signal(this),this._repositoryChanged=new C.Signal(this),this._statusChanged=new C.Signal(this),this._notifyRemoteChanges=new C.Signal(this),this._docmanager=e,this._docRegistry=t,this._settings=n||null,this._taskHandler=new we(this),this._clearStatus(),n?(i=n.composite.refreshInterval,n.changed.connect(this._onSettingsChange,this)):i=3e3,this._statusPoll=new pe.Poll({factory:this._refreshModel,frequency:{interval:i,backoff:!0,max:3e5},standby:this._refreshStandby}),this._fetchPoll=new pe.Poll({auto:!1,factory:this._fetchRemotes,frequency:{interval:i,backoff:!0,max:3e5},standby:this._refreshStandby})}get branches(){return this._branches}get currentBranch(){return this._currentBranch}get isDisposed(){return this._isDisposed}get isReady(){return 0===this._pendingReadyPromise}get ready(){return this._readyPromise}get pathRepository(){return this._pathRepository}set pathRepository(e){const t={name:"pathRepository",newValue:null,oldValue:this._pathRepository};if(null===e)this._pendingReadyPromise+=1,this._readyPromise.then((()=>{this._pathRepository=null,this._pendingReadyPromise-=1,t.newValue!==t.oldValue&&this.refresh().then((()=>this._repositoryChanged.emit(t)))}));else{const n=this._readyPromise;this._pendingReadyPromise+=1;const i=e;this._readyPromise=Promise.all([n,this.showPrefix(i)]).then((([e,n])=>{null!==n&&(n=i.slice(0,Math.max(0,i.length-n.length))),t.newValue=this._pathRepository=n,t.newValue!==t.oldValue&&this.refresh().then((()=>this._repositoryChanged.emit(t))),this._pendingReadyPromise-=1})).catch((e=>{this._pendingReadyPromise-=1,console.error(`Fail to find Git top level for path ${i}.\n${e}`)}))}}get refreshStandbyCondition(){return this._standbyCondition}set refreshStandbyCondition(e){this._standbyCondition=e}get selectedHistoryFile(){return this._selectedHistoryFile}set selectedHistoryFile(e){this._selectedHistoryFile!==e&&(this._selectedHistoryFile=e,this._selectedHistoryFileChanged.emit(e))}get status(){return this._status}get headChanged(){return this._headChanged}get markChanged(){return this._markChanged}get selectedHistoryFileChanged(){return this._selectedHistoryFileChanged}get repositoryChanged(){return this._repositoryChanged}get statusChanged(){return this._statusChanged}get taskChanged(){return this._taskHandler.taskChanged}get notifyRemoteChanges(){return this._notifyRemoteChanges}get _currentMarker(){return this.__currentMarker||this._setMarker(this.pathRepository,this._currentBranch?this._currentBranch.name:""),this.__currentMarker}async add(...e){const t=await this._getPathRepository();await this._taskHandler.execute("link-git:add:files",(async()=>{await be(p.URLExt.join(t,"add"),"POST",{add_all:!e,filename:e||""})})),await this.refreshStatus()}getFile(e){if(null===this.pathRepository)return null;const t=this._status.files.find((t=>this.getRelativeFilePath(t.to)===e));if(t)return t;{const t=p.PathExt.relative("/"+this.pathRepository,"/"+e);return t.startsWith("../")?null:{x:"",y:"",to:t,from:"",is_binary:null,status:"unmodified",type:this._resolveFileType(e)}}}async addAllUnstaged(){const e=await this._getPathRepository();await this._taskHandler.execute("link-git:add:files:all_unstaged",(async()=>{await be(p.URLExt.join(e,"add_all_unstaged"),"POST")})),await this.refreshStatus()}async addAllUntracked(){const e=await this._getPathRepository();await this._taskHandler.execute("link-git:add:files:all_untracked",(async()=>{await be(p.URLExt.join(e,"add_all_untracked"),"POST")})),await this.refreshStatus()}async addRemote(e,t){const n=await this._getPathRepository();await this._taskHandler.execute("link-git:add:remote",(async()=>{await be(p.URLExt.join(n,"remote","add"),"POST",{url:e,name:t})}))}async allHistory(e=25){const t=await this._getPathRepository();return await this._taskHandler.execute("link-git:fetch:history",(async()=>await be(p.URLExt.join(t,"all_history"),"POST",{history_count:e})))}async checkout(e){const t=await this._getPathRepository(),n={checkout_branch:!1,new_check:!1,branchname:"",startpoint:"",checkout_all:!0,filename:""};void 0!==e&&(e.branchname?(n.branchname=e.branchname,n.checkout_branch=!0,n.new_check=!0===e.newBranch,e.newBranch&&(n.startpoint=e.startpoint||this._currentBranch.name)):e.filename&&(n.filename=e.filename,n.checkout_all=!1));const i=await this._taskHandler.execute("link-git:checkout",(async()=>{var e;let i;n.new_check||(i=n.checkout_branch&&!n.new_check?await this._changedFiles(this._currentBranch.name,n.branchname):n.filename?{files:[n.filename]}:await this._changedFiles("WORKING","HEAD"));const r=await be(p.URLExt.join(t,"checkout"),"POST",n);return null===(e=null==i?void 0:i.files)||void 0===e||e.forEach((e=>this._revertFile(e))),r}));return n.checkout_branch?await this.refreshBranch():await this.refreshStatus(),i}async merge(e){const t=await this._getPathRepository();return this._taskHandler.execute("link-git:merge",(()=>be(p.URLExt.join(t,"merge"),"POST",{branch:e})))}async clone(e,t,n){return await this._taskHandler.execute("link-git:clone",(async()=>await be(p.URLExt.join(e,"clone"),"POST",{clone_url:t,auth:n})))}async commit(e,t=!1){const n=await this._getPathRepository();await this._taskHandler.execute("link-git:commit:create",(async()=>{await be(p.URLExt.join(n,"commit"),"POST",{commit_msg:e,amend:t})})),await this.refresh()}async config(e){const t=await this._getPathRepository();return await this._taskHandler.execute("link-git:config:"+(e?"set":"get"),(async()=>{if(!e)return await be(p.URLExt.join(t,"config"),"POST");await be(p.URLExt.join(t,"config"),"POST",{options:e})}))}async deleteBranch(e){const t=await this._getPathRepository();await this._taskHandler.execute("link-git:branch:delete",(async()=>await be(p.URLExt.join(t,"branch","delete"),"POST",{branch:e})))}async detailedLog(e){const t=await this._getPathRepository(),n=await this._taskHandler.execute("link-git:fetch:commit_log",(async()=>await be(p.URLExt.join(t,"detailed_log"),"POST",{selected_hash:e})));return n.modified_files=n.modified_files.map((e=>(e.type=this._resolveFileType(e.modified_file_path),e))),n}dispose(){this.isDisposed||(this._isDisposed=!0,this._fetchPoll.dispose(),this._statusPoll.dispose(),this._taskHandler.dispose(),this._settings.changed.disconnect(this._onSettingsChange,this),C.Signal.clearData(this))}async ensureGitignore(){const e=await this._getPathRepository();await be(p.URLExt.join(e,"ignore"),"POST",{}),this._openGitignore(),await this.refreshStatus()}getRelativeFilePath(e){return null===this.pathRepository?null:p.PathExt.join(this.pathRepository,null!=e?e:"")}async ignore(e,t){const n=await this._getPathRepository();await be(p.URLExt.join(n,"ignore"),"POST",{file_path:e,use_extension:t}),this._openGitignore(),await this.refreshStatus()}async init(e){await this._taskHandler.execute("link-git:init",(async()=>{await be(p.URLExt.join(e,"init"),"POST")}))}async log(e=25){const t=await this._getPathRepository();return await this._taskHandler.execute("link-git:fetch:log",(async()=>{var n;return await be(p.URLExt.join(t,"log"),"POST",{history_count:e,follow_path:null===(n=this.selectedHistoryFile)||void 0===n?void 0:n.to})}))}async pull(e){const t=await this._getPathRepository(),n=this._taskHandler.execute("link-git:pull",(async()=>{var n;return await be(p.URLExt.join(t,"pull"),"POST",{auth:e,cancel_on_conflict:(null===(n=this._settings)||void 0===n?void 0:n.composite.cancelPullMergeConflict)||!1})}));return this.refreshBranch(),n}async push(e,t=!1){const n=await this._getPathRepository(),i=this._taskHandler.execute("link-git:push",(async()=>await be(p.URLExt.join(n,"push"),"POST",{auth:e,force:t})));return this.refreshBranch(),i}async refresh(){await this._statusPoll.refresh(),await this._statusPoll.tick}async refreshBranch(){try{const e=await this._taskHandler.execute("link-git:refresh:branches",(async()=>await this._branch()));let t=!1;t=this._currentBranch&&e?this._currentBranch.name!==e.current_branch.name||this._currentBranch.top_commit!==e.current_branch.top_commit:this._currentBranch!==e.current_branch,this._branches=e.branches,this._currentBranch=e.current_branch,this._currentBranch&&this._setMarker(this.pathRepository,this._currentBranch.name),t&&this._headChanged.emit();this._branches.some((e=>e.is_remote_branch))?this._fetchPoll.start():this._fetchPoll.stop()}catch(e){const t=null!==this._currentBranch;if(this._branches=[],this._currentBranch=null,this._fetchPoll.stop(),t&&this._headChanged.emit(),!(e instanceof ue.NotInRepository))throw e}}async refreshStatus(){var e;let t;try{t=await this._getPathRepository()}catch(e){if(this._clearStatus(),!(e instanceof ue.NotInRepository))throw e;return}try{const n=await this._taskHandler.execute("link-git:refresh:status",(async()=>await be(p.URLExt.join(t,"status"),"POST"))),i=null===(e=n.files)||void 0===e?void 0:e.map((e=>Object.assign(Object.assign({},e),{status:xe(e.x,e.y),type:this._resolveFileType(e.to)})));this._setStatus({branch:n.branch||null,remote:n.remote||null,ahead:n.ahead||0,behind:n.behind||0,files:i})}catch(e){return this._clearStatus(),void console.error(e)}}async remoteChangedFiles(){this._remoteChangedFiles=[];try{let e=null;if(this.status.remote&&this.status.behind>0)return e=(await this._changedFiles("WORKING",this.status.remote)).files,null==e||e.forEach((e=>{this._remoteChangedFiles.push({status:"remote-changed",type:this._resolveFileType(e),x:"?",y:"B",to:e,from:"?",is_binary:!1})})),this._remoteChangedFiles}catch(e){return console.error(e),this._remoteChangedFiles}}async checkRemoteChangeNotified(){if(this.status.remote&&this.status.behind>0){const e=[],t=[];for(const n of this._remoteChangedFiles){const i=this._docmanager.findWidget(this.getRelativeFilePath(n.to)),r=this._changeUpstreamNotified.findIndex((e=>e.from===n.from&&e.to===n.to&&e.x===n.x&&e.y===n.y));void 0!==i?i.isAttached&&(-1===r?(this._changeUpstreamNotified.push(n),e.push(n)):t.push(n)):r>-1&&this._changeUpstreamNotified.splice(r,1)}this._settings.composite.openFilesBehindWarning&&e.length>0&&this._notifyRemoteChanges.emit({notNotified:e,notified:t})}else this._changeUpstreamNotified=[]}async reset(e){const t=await this._getPathRepository();await this._taskHandler.execute("link-git:reset:changes",(async()=>{let n;n=void 0===e?(await this._changedFiles("INDEX","HEAD")).files:[e],await be(p.URLExt.join(t,"reset"),"POST",{reset_all:void 0===e,filename:void 0===e?null:e}),n.forEach((e=>{this._revertFile(e)}))})),await this.refreshStatus()}async resetToCommit(e=""){const t=await this._getPathRepository();await this._taskHandler.execute("link-git:reset:hard",(async()=>{const n=(await this._changedFiles(null,null,e)).files;await be(p.URLExt.join(t,"reset_to_commit"),"POST",{commit_id:e}),null==n||n.forEach((e=>{this._revertFile(e)}))})),await this.refreshBranch()}async showPrefix(e){var t;try{return null!==(t=(await this._taskHandler.execute("link-git:fetch:prefix_path",(async()=>await be(p.URLExt.join(e,"show_prefix"),"POST")))).path)&&void 0!==t?t:null}catch(e){if(e instanceof ue.GitResponseError&&500===e.response.status&&128===e.json.code)return null;throw e}}async showTopLevel(e){var t;try{return null!==(t=(await this._taskHandler.execute("link-git:fetch:top_level_path",(async()=>await be(p.URLExt.join(e,"show_top_level"),"POST")))).path)&&void 0!==t?t:null}catch(e){if(e instanceof ue.GitResponseError&&500===e.response.status&&128===e.json.code)return null;throw e}}async tags(){const e=await this._getPathRepository();return await this._taskHandler.execute("link-git:tag:list",(async()=>await be(p.URLExt.join(e,"tags"),"POST")))}async checkoutTag(e){const t=await this._getPathRepository();return await this._taskHandler.execute("link-git:tag:checkout",(async()=>await be(p.URLExt.join(t,"tag_checkout"),"POST",{tag_id:e})))}addMark(e,t){this._currentMarker.add(e,t)}getMark(e){return this._currentMarker.get(e)}toggleMark(e){this._currentMarker.toggle(e)}registerDiffProvider(e,t,n){console.log("FILE EXTENSIONS : ",t),t.forEach((t=>{De[t.toLocaleLowerCase()]={name:e,callback:n}})),console.log("DIFF PROVIDER : ",De)}async revertCommit(e,t){const n=await this._getPathRepository();await this._taskHandler.execute("link-git:commit:revert",(async()=>{const e=(await this._changedFiles(null,null,t+"^!")).files;await be(p.URLExt.join(n,"delete_commit"),"POST",{commit_id:t}),null==e||e.forEach((e=>{this._revertFile(e)}))})),await this.commit(e)}updateConfigForSaveCredential(e){return Re("link-git/set_credential_store",{save_credential:e})}async _branch(){const e=await this._getPathRepository();return await this._taskHandler.execute("link-git:fetch:branches",(async()=>await be(p.URLExt.join(e,"branch"),"POST")))}async _changedFiles(e,t,n){return await be(p.URLExt.join(this.pathRepository,"changed_files"),"POST",{base:e,remote:t,single_commit:n})}_clearStatus(){this._status={branch:null,remote:null,ahead:0,behind:0,files:[]}}async _getPathRepository(){await this.ready;const e=this.pathRepository;if(null===e)throw new ue.NotInRepository;return e}_resolveFileType(e){return e.endsWith("/")?he.DocumentRegistry.getDefaultDirectoryFileType():this._docRegistry.getFileTypesForPath(e)[0]||he.DocumentRegistry.getDefaultTextFileType()}_setStatus(e){let t=this._status.ahead===e.ahead&&this._status.behind===e.behind&&this._status.branch===e.branch&&this._status.files.length===e.files.length;if(t)for(const n of e.files)if(this._status.files.findIndex((e=>e.from===n.from&&e.to===n.to&&e.x===n.x&&e.y===n.y))){t=!1;break}t||(this._status=e,this._statusChanged.emit(this._status))}_onSettingsChange(e){this._fetchPoll.frequency=Object.assign(Object.assign({},this._fetchPoll.frequency),{interval:e.composite.refreshInterval}),this._statusPoll.frequency=Object.assign(Object.assign({},this._statusPoll.frequency),{interval:e.composite.refreshInterval})}_openGitignore(){if(this._docmanager){const e=this._docmanager.openOrReveal(this.getRelativeFilePath(".gitignore"));e&&!e.context.model.dirty&&e.context.revert()}}_revertFile(e){const t=this._docmanager.findWidget(this.getRelativeFilePath(e));t&&!t.context.model.dirty&&t.context.revert()}_setMarker(e,t){this.__currentMarker=this._markerCache.get(e,t)}}class je{constructor(e){this._refresh=e,this._marks={}}add(e,t=!0){e in this._marks||this.set(e,t)}get(e){return this._marks[e]}set(e,t){this._marks[e]=t,this._refresh()}toggle(e){this.set(e,!this._marks[e])}}class Me{constructor(e){this._refresh=e,this._branchMarkers={}}get(e,t){const n=Me.markerKey(e,t);if(n in this._branchMarkers)return this._branchMarkers[n];const i=new je(this._refresh);return this._branchMarkers[n]=i,i}static markerKey(e,t){return[e,t].join(":")}}var Ie=n(81926);const Pe=(0,Ie.style)({flex:"0 0 auto",background:"none",lineHeight:"0px",padding:"0px 4px",width:"16px",border:"none",outline:"none",cursor:"pointer",$nest:{"&:active":{transform:"scale(1.272019649)",overflow:"hidden"},"&:disabled":{cursor:"default"}}}),Be=(0,Ie.style)({display:"none"}),He=(()=>{const e={$nest:{}},t=`&:hover .${Be}`;return e.$nest[t]={display:"block"},e})(),Te=(0,Ie.style)({height:"inherit",minHeight:"150px",overflow:"hidden",overflowY:"auto"}),Oe=new m.LabIcon({name:"link-git",svgstr:'<svg width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M18.459 12.7596L7.49567 11.2321C6.70822 11.1129 6.12646 10.4362 6.12646 9.63696V3.13702C6.12646 2.33782 6.70822 1.66108 7.49567 1.54184L18.459 0.0143394C19.2368 -0.101673 19.9343 0.500949 19.9343 1.29048V11.4835C19.9343 12.273 19.2368 12.8757 18.459 12.7596V12.7596Z" fill="#6C79F9"/>\r\n<path d="M1.47527 5.94066L12.4386 7.46816C13.226 7.5874 13.8078 8.26414 13.8078 9.06334V15.5633C13.8078 16.3625 13.226 17.0392 12.4386 17.1585L1.47527 18.6827C0.697461 18.802 0 18.1961 0 17.4098V7.21358C0 6.42404 0.697461 5.82142 1.47527 5.93744V5.94066Z" fill="#9578FF"/>\r\n<path d="M12.4383 7.46814L6.12256 6.58838V9.64016C6.12256 10.4394 6.70431 11.1161 7.49177 11.2353L13.8075 12.1151V9.06332C13.8075 8.26412 13.2257 7.58738 12.4383 7.46814V7.46814Z" fill="#5D5DF4"/>\r\n<g clip-path="url(#clip0_1319_681)">\r\n<path d="M9.12477 7.36113H7.50902C6.69392 7.14737 4.84994 7.203 4.84994 8.88518C4.84994 9.49834 5.15561 9.92912 5.56316 10.1282C5.05168 10.5969 4.80919 10.818 4.80919 11.131C4.80919 11.3551 4.90028 11.5618 5.17374 11.6773C4.88296 11.9506 4.71729 12.1491 4.71729 12.522C4.71729 13.1763 5.28888 13.5576 6.78827 13.5576C8.22998 13.5576 9.06628 13.0192 9.06628 12.0663C9.06628 10.871 8.14603 10.915 5.97642 10.7825L6.25009 10.3434C6.80579 10.4979 8.66892 10.5472 8.66892 8.95996C8.66892 8.5789 8.5114 8.31379 8.36325 8.12305L9.12558 8.06518L9.12477 7.36113ZM7.83242 12.2905C7.83242 12.9438 5.695 12.9446 5.695 12.34C5.695 12.1741 5.80239 12.0343 5.9104 11.9011C7.49394 12.0091 7.83242 11.9697 7.83242 12.2905ZM6.79703 9.54806C5.72109 9.54806 5.76877 8.09799 6.82148 8.09799C7.83099 8.09799 7.85707 9.54806 6.79703 9.54806ZM9.51337 11.5962V10.9421C10.0585 10.8675 10.0685 10.9013 10.0685 10.7179V8.28261C10.0685 8.1094 10.0267 8.13222 9.51337 7.95127L9.60446 7.28044H11.3196V10.7183C11.3196 10.851 11.3278 10.8675 11.4523 10.8842L11.8747 10.9421V11.5962H9.51337ZM10.5822 6.61776C10.11 6.61776 9.83656 6.34408 9.83656 5.87173C9.83656 5.39938 10.11 5.14282 10.5822 5.14282C11.0627 5.14282 11.3361 5.39999 11.3361 5.87173C11.3361 6.34347 11.0627 6.61776 10.5822 6.61776ZM15.1506 11.2751C14.7942 11.4489 14.2724 11.6064 13.8 11.6064C12.8141 11.6064 12.4414 11.209 12.4414 10.2725V8.10206C12.4414 7.99162 12.4628 8.01933 11.7953 8.01933V7.28186C12.5244 7.19893 12.8141 6.83355 12.9052 5.93144H13.6924C13.6924 7.2729 13.6651 7.19098 13.7588 7.19098H14.9265V8.01933H13.6924V9.99902C13.6924 10.14 13.5922 11.0466 14.9267 10.546L15.1506 11.2751Z" fill="white"/>\r\n</g>\r\n<defs>\r\n<clipPath id="clip0_1319_681">\r\n<rect width="10.4334" height="10.4334" fill="white" transform="translate(4.71729 4.13354)"/>\r\n</clipPath>\r\n</defs>\r\n</svg>\r\n'}),Ve=new m.LabIcon({name:"link-git:add",svgstr:'<svg\r\n   xmlns="http://www.w3.org/2000/svg"\r\n   width="16"\r\n   viewBox="0 0 24 24"\r\n   version="1.1">\r\n  <g\r\n     class="jp-icon3 jp-icon-selectable"\r\n     fill="#4F4F4F">\r\n    <path\r\n       d="m 22,13 h -9 v 9 H 11 V 13 H 2 v -2 h 9 V 2 h 2 v 9 h 9 z"/>\r\n  </g>\r\n</svg>\r\n'}),Ae=new m.LabIcon({name:"link-git:branch",svgstr:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 18 18">\r\n<path class="jp-icon3 jp-icon-selectable" d="M12.499,3.177 C11.205,3.177 10.166,4.216 10.166,5.51 C10.166,6.366 10.64,7.114 11.333,7.515 L11.333,7.843 C11.333,9.009 10.166,10.176 9,10.176 C8.034,10.176 7.269,10.376 6.667,10.704 L6.667,5.182 C7.36,4.781 7.834,4.034 7.834,3.177 C7.834,1.883 6.795,0.844 5.501,0.844 C4.207,0.844 3.168,1.883 3.168,3.177 C3.168,4.034 3.642,4.781 4.334,5.182 L4.334,12.818 C3.642,13.219 3.168,13.966 3.168,14.823 C3.168,16.117 4.207,17.156 5.501,17.156 C6.795,17.156 7.834,16.117 7.834,14.823 C7.834,14.203 7.597,13.656 7.214,13.237 C7.56,12.818 8.107,12.49 9,12.49 C11.333,12.49 13.666,10.157 13.666,7.824 L13.666,7.496 C14.358,7.095 14.832,6.348 14.832,5.492 C14.832,4.198 13.793,3.159 12.499,3.159 z M5.501,2.011 C6.139,2.011 6.667,2.539 6.667,3.177 C6.667,3.815 6.139,4.344 5.501,4.344 C4.863,4.344 4.334,3.815 4.334,3.177 C4.334,2.539 4.863,2.011 5.501,2.011 z M5.501,16.008 C4.863,16.008 4.334,15.479 4.334,14.841 C4.334,14.203 4.863,13.675 5.501,13.675 C6.139,13.675 6.667,14.203 6.667,14.841 C6.667,15.479 6.139,16.008 5.501,16.008 z M12.499,6.676 C11.861,6.676 11.333,6.148 11.333,5.51 C11.333,4.872 11.861,4.344 12.499,4.344 C13.137,4.344 13.666,4.872 13.666,5.51 C13.666,6.148 13.137,6.676 12.499,6.676 z" fill="#4F4F4F"/>\r\n</svg>\r\n'}),ze=new m.LabIcon({name:"link-git:clone",svgstr:'<svg width="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<g class="jp-icon3" fill="#616161">\r\n<path d="M18.3438 13.2365L10.7648 5.65849C10.3311 5.22492 9.61471 5.22492 9.18108 5.65849L7.61625 7.22311L9.61471 9.2213C10.086 9.07049 10.6139 9.16474 10.9721 9.54176C11.3492 9.91878 11.4435 10.4466 11.2927 10.9179L13.2157 12.8407C13.687 12.6898 14.2149 12.7841 14.592 13.1611C15.1199 13.6701 15.1199 14.5184 14.592 15.0462C14.0641 15.574 13.2345 15.574 12.7067 15.0462C12.3107 14.6503 12.2165 14.0848 12.4239 13.5947L10.6328 11.8039V16.5166C10.7648 16.5731 10.8779 16.6674 10.991 16.7616C11.5189 17.2894 11.5189 18.1189 10.991 18.6467C10.4631 19.1557 9.63356 19.1557 9.10567 18.6467C8.57777 18.1189 8.57777 17.2894 9.10567 16.7616C9.23764 16.6297 9.38847 16.5354 9.53929 16.4789V11.7096C9.38847 11.6531 9.23764 11.5399 9.10567 11.4268C8.70975 11.031 8.61548 10.4654 8.82287 9.97533L6.84326 8.01484L1.65859 13.1988C1.22497 13.6324 1.22497 14.3487 1.65859 14.7823L9.21879 22.3415C9.65241 22.775 10.3688 22.775 10.8025 22.3415L18.325 14.82C18.7774 14.3676 18.7774 13.6701 18.3438 13.2365Z"/>\r\n<rect x="14.6666" y="5.33331" width="6.66667" height="1.33333"/>\r\n<rect x="18.6666" y="2.66669" width="6.66667" height="1.33333" transform="rotate(90 18.6666 2.66669)"/>\r\n</g>\r\n</svg>\r\n'}),Ue=new m.LabIcon({name:"link-git:deletions",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 24 24">\r\n    <path d="M0 0h24v24H0z" fill="none"/>\r\n    <path class="jp-icon3" fill="white" d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\r\n</svg>\r\n'}),Ge=(new m.LabIcon({name:"link-git:desktop",svgstr:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 24 24">\r\n  <path class="jp-icon3" d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7l-2 3v1h8v-1l-2-3h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 12H3V4h18v10z" fill="#4F4F4F">\r\n  </path>\r\n</svg>\r\n'}),new m.LabIcon({name:"link-git:diff",svgstr:'<svg width="16" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n  <g class="jp-icon3 jp-icon-selectable" fill="#4F4F4F">\r\n    <path d="M9.5 1H3.5C2.675 1 2.0075 1.63 2.0075 2.4L2 13.6C2 14.37 2.6675 15 3.4925 15H12.5C13.325 15 14 14.37 14 13.6V5.2L9.5 1ZM3.5 13.6V2.4H8.75L12.5 5.9V13.6H3.5Z"/>\r\n    <rect x="7" y="10.5" width="4" height="0.999998"/>\r\n    <rect x="5" y="5.49988" width="4" height="0.999998"/>\r\n    <rect x="7.5" y="4" width="4" height="1" transform="rotate(90 7.5 4)"/>\r\n  </g>\r\n</svg>\r\n'})),Ze=new m.LabIcon({name:"link-git:discard",svgstr:'<svg\r\n   xmlns="http://www.w3.org/2000/svg"\r\n   width="16"\r\n   viewBox="0 0 24 24"\r\n   version="1.1">\r\n  <g class="jp-icon3 jp-icon-selectable" stroke="#4F4F4F" stroke-width="2px">\r\n    <path\r\n       fill="none"\r\n       d="m 8.9223529,22.334118 c 0,0 8.2027491,-6.710405 10.3905881,-10.164706 C 21.50078,8.7151116 20.317794,5.8252391 17.957647,3.5011764 15.597501,1.1771138 12.452863,1.6307769 9.8541176,2.1458824 7.2553727,2.6609879 3.1905882,5.8164706 3.1905882,5.8164706"\r\n      />\r\n    <path\r\n       fill="none"\r\n       d="M 5.3082353,0.90352943 3.1905882,5.8164706 8.0752941,6.6070589"\r\n      />\r\n  </g>\r\n</svg>\r\n'}),We=new m.LabIcon({name:"link-git:insertions",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 24 24">\r\n    <path d="M0 0h24v24H0z" fill="none"/>\r\n    <path class="jp-icon3" fill="white" d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\r\n</svg>\r\n'}),$e=new m.LabIcon({name:"link-git:history",svgstr:'<svg\r\n  aria-hidden="true"\r\n  role="img"\r\n  xmlns="http://www.w3.org/2000/svg"\r\n  width="16"\r\n  viewBox="0 0 512 512"\r\n>\r\n  <path\r\n    class="jp-icon3"\r\n    fill="currentColor"\r\n    d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"\r\n  ></path>\r\n</svg>\r\n'}),qe=new m.LabIcon({name:"link-git:merge",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16">\r\n  <path class="jp-icon3" fill="#4F4F4F"\r\n    d="M5.59 1.5c-2.041.023-3.607 2.277-2.958 4.202.346 1.087 1.299 1.946 2.404 2.211-.062 2.722-.036 5.448-.02 8.171-2.08.393-3.226 3.07-2.055 4.836.898 1.555 3.134 2.098 4.604 1.033 1.56-1.024 1.945-3.427.656-4.82-.47-.58-.783-.861-1.722-1.102-.004-1.233-.008-3.364-.007-4.596 1.281 1.648 3.342 2.65 5.436 2.555 1.052.03 2.105.015 3.157.011.414 1.848 2.597 3.043 4.361 2.285 1.804-.682 2.655-3.088 1.594-4.725-.99-1.698-3.596-2.12-5-.692-.538.426-.664 1.019-.86 1.63-1.68-.055-4.554.254-6.053-.702-1.39-.825-2.392-2.3-2.576-3.913 1.963-.439 3.092-2.914 2.074-4.669C8.053 2.124 6.81 1.458 5.59 1.5zm.026 1.515c1.26-.18 2.305 1.278 1.736 2.413-.446 1.301-2.442 1.454-3.081.237-.73-1.057.058-2.619 1.345-2.65zm12.501 8.502c1.26-.182 2.301 1.276 1.735 2.41-.445 1.301-2.442 1.455-3.082.238-.727-1.056.062-2.617 1.347-2.648zm-12.5 6c1.26-.183 2.304 1.275 1.735 2.41-.446 1.3-2.44 1.454-3.081.238-.73-1.055.06-2.617 1.345-2.648z" />\r\n</svg>\r\n'}),Xe=new m.LabIcon({name:"link-git:open-file",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 15 15">\r\n  <g class="jp-icon3 jp-icon-selectable" fill="#4F4F4F">\r\n    <path\r\n       d="m 6.5,1 h 6 c 0.825,0 1.4925,0.63 1.4925,1.4 L 14,13.6 C 14,14.37 13.3325,15 12.5075,15 H 3.5 C 2.675,15 2,14.37 2,13.6 V 5.2 Z m 6,12.6 V 2.4 H 7.25 L 3.5,5.9 v 7.7 z"/>\r\n    <path\r\n       d="M 7.5195314,11.679686 V 9.3359374 l -2.8320313,-1e-7 V 8.457031 7.5781248 h 2.8320313 v -2.34375 l 4.0527336,3.2226563 z"\r\n       style="stroke-width:2.66873717" />\r\n  </g>\r\n</svg>\r\n'}),Ke=new m.LabIcon({name:"link-git:pull",svgstr:'<svg width="14" height="18" viewBox="0 0 14 18" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M10.287 12.5742H9.14929V8.76236C9.14929 8.34306 8.8273 8 8.43376 8H5.57163C5.17809 8 4.8561 8.34306 4.8561 8.76236V12.5742H3.7184C3.08158 12.5742 2.75959 13.3975 3.21037 13.8778L6.49467 17.377C6.77372 17.6743 7.22451 17.6743 7.50357 17.377L10.7879 13.8778C11.2386 13.3975 10.9238 12.5742 10.287 12.5742Z" fill="url(#paint0_linear_2729_960)"/>\r\n<path d="M2.32187 3.445C3.0375 1.43167 4.86094 0 6.99687 0C9.13281 0 10.9563 1.43 11.6719 3.44333C13.0109 3.81833 14 5.12 14 6.66667C14 8.50833 12.6016 10 10.8766 10H10.25C10.1812 10 10.125 9.94 10.125 9.86667V8.86667C10.125 8.79333 10.1812 8.73333 10.25 8.73333H10.8766C11.4031 8.73333 11.8984 8.51 12.2672 8.105C12.6344 7.70167 12.8297 7.15833 12.8125 6.595C12.7984 6.155 12.6578 5.74167 12.4031 5.39333C12.1422 5.03833 11.7766 4.78 11.3703 4.665L10.7781 4.5L10.5609 3.89C10.4266 3.51 10.2391 3.155 10.0031 2.83333C9.7702 2.51451 9.49429 2.23425 9.18437 2.00167C8.54219 1.52 7.78594 1.265 6.99687 1.265C6.20781 1.265 5.45156 1.52 4.80937 2.00167C4.49844 2.235 4.22344 2.515 3.99063 2.83333C3.75469 3.155 3.56719 3.51167 3.43281 3.89L3.21719 4.49833L2.62656 4.665C1.77969 4.90833 1.1875 5.73 1.1875 6.66667C1.1875 7.21833 1.38906 7.73833 1.75469 8.12833C1.93399 8.32071 2.1473 8.47324 2.38224 8.57709C2.61719 8.68094 2.86912 8.73405 3.12344 8.73333H3.75C3.81875 8.73333 3.875 8.79333 3.875 8.86667V9.86667C3.875 9.94 3.81875 10 3.75 10H3.12344C1.39844 10 0 8.50833 0 6.66667C0 5.12167 0.985937 3.82167 2.32187 3.445Z" fill="#616161"/>\r\n<defs>\r\n<linearGradient id="paint0_linear_2729_960" x1="7" y1="8" x2="7" y2="17.6" gradientUnits="userSpaceOnUse">\r\n<stop stop-color="#6C79F9" stop-opacity="0"/>\r\n<stop offset="0.567708" stop-color="#6C79F9"/>\r\n</linearGradient>\r\n</defs>\r\n</svg>\r\n'}),Ye=new m.LabIcon({name:"link-git:push",svgstr:'<svg width="14" height="18" viewBox="0 0 14 18" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M2.32187 3.445C3.0375 1.43167 4.86094 0 6.99687 0C9.13281 0 10.9563 1.43 11.6719 3.44333C13.0109 3.81833 14 5.12 14 6.66667C14 8.50833 12.6016 10 10.8766 10H10.25C10.1812 10 10.125 9.94 10.125 9.86667V8.86667C10.125 8.79333 10.1812 8.73333 10.25 8.73333H10.8766C11.4031 8.73333 11.8984 8.51 12.2672 8.105C12.6344 7.70167 12.8297 7.15833 12.8125 6.595C12.7984 6.155 12.6578 5.74167 12.4031 5.39333C12.1422 5.03833 11.7766 4.78 11.3703 4.665L10.7781 4.5L10.5609 3.89C10.4266 3.51 10.2391 3.155 10.0031 2.83333C9.7702 2.51451 9.49429 2.23425 9.18437 2.00167C8.54219 1.52 7.78594 1.265 6.99687 1.265C6.20781 1.265 5.45156 1.52 4.80937 2.00167C4.49844 2.235 4.22344 2.515 3.99063 2.83333C3.75469 3.155 3.56719 3.51167 3.43281 3.89L3.21719 4.49833L2.62656 4.665C1.77969 4.90833 1.1875 5.73 1.1875 6.66667C1.1875 7.21833 1.38906 7.73833 1.75469 8.12833C1.93399 8.32071 2.1473 8.47324 2.38224 8.57709C2.61719 8.68094 2.86912 8.73405 3.12344 8.73333H3.75C3.81875 8.73333 3.875 8.79333 3.875 8.86667V9.86667C3.875 9.94 3.81875 10 3.75 10H3.12344C1.39844 10 0 8.50833 0 6.66667C0 5.12167 0.985937 3.82167 2.32187 3.445Z" fill="#616161"/>\r\n<path d="M3.71301 13.0255L4.85071 13.0255L4.85071 16.8373C4.85071 17.2565 5.1727 17.5996 5.56624 17.5996L8.42837 17.5996C8.82191 17.5996 9.1439 17.2565 9.1439 16.8373L9.1439 13.0255L10.2816 13.0255C10.9184 13.0255 11.2404 12.2021 10.7896 11.7218L7.50533 8.2226C7.22628 7.92528 6.77549 7.92528 6.49643 8.2226L3.21214 11.7218C2.76135 12.2021 3.07619 13.0255 3.71301 13.0255Z" fill="url(#paint0_linear_2857_1037)"/>\r\n<defs>\r\n<linearGradient id="paint0_linear_2857_1037" x1="7" y1="17.5996" x2="7" y2="7.99961" gradientUnits="userSpaceOnUse">\r\n<stop stop-color="#6C79F9" stop-opacity="0"/>\r\n<stop offset="0.595486" stop-color="#6C79F9"/>\r\n</linearGradient>\r\n</defs>\r\n</svg>\r\n'}),Je=new m.LabIcon({name:"link-git:remove",svgstr:'<svg\r\n   xmlns="http://www.w3.org/2000/svg"\r\n   width="16"\r\n   viewBox="0 0 24 24"\r\n   version="1.1">\r\n  <g class="jp-icon3 jp-icon-selectable" stroke="#4F4F4F" stroke-width="2px">\r\n  <path\r\n     fill="none"\r\n     d="M 2,12 H 22" />\r\n   </g>\r\n</svg>\r\n'}),Qe=new m.LabIcon({name:"link-git:rewind",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 24 24">\r\n    <path class="jp-icon3" fill="#4F4F4F" d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>\r\n</svg>\r\n'}),et=new m.LabIcon({name:"link-git:tag",svgstr:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512.001 512.001" width="16">\r\n\t<path class="jp-icon3" fill="#4F4F4F" d="M506.513,311.066L253.87,58.423c-2.024-2.026-4.486-3.559-7.195-4.483L140.15,17.593\r\n\t\t\tc-6.758-2.305-14.242-0.568-19.294,4.483L84.709,58.222L31.977,5.491c-7.314-7.315-19.176-7.315-26.49,0\r\n\t\t\tc-7.315,7.315-7.315,19.175,0,26.49l52.732,52.731l-36.14,36.141c-5.051,5.05-6.79,12.534-4.483,19.294L53.943,246.67\r\n\t\t\tc0.924,2.71,2.458,5.172,4.483,7.197L311.071,506.51c7.314,7.315,19.175,7.315,26.49,0l168.954-168.954\r\n\t\t\tC513.83,330.241,513.83,318.382,506.513,311.066z M227.241,227.238c-21.817,21.819-57.132,21.82-78.952,0\r\n\t\t\tc-21.768-21.768-21.768-57.185,0.001-78.953c21.817-21.819,57.132-21.82,78.953,0C249.009,170.053,249.009,205.47,227.241,227.238\r\n\t\t\tz"/>\r\n</svg>\r\n'}),tt=new m.LabIcon({name:"link-git:trash",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 24 24">\r\n    <path class="jp-icon3" fill="#4F4F4F" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>\r\n    <path d="M0 0h24v24H0z" fill="none"/>\r\n</svg>\r\n'}),nt=new m.LabIcon({name:"link-git:vertical-more",svgstr:'<svg width="16" height="16" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">\r\n  <path class="jp-icon3" transform="scale(.26458)"\r\n    d="m11.939 1.7676a2.1655 2.1655 0 0 0-2.1055 2.1641 2.1655 2.1655 0 0 0 2.166 2.166 2.1655 2.1655 0 0 0 2.166-2.166 2.1655 2.1655 0 0 0-2.166-2.1641 2.1655 2.1655 0 0 0-0.060547 0zm0.060547 7.6172a2.1655 2.1655 0 0 0-2.166 2.166 2.1655 2.1655 0 0 0 2.166 2.166 2.1655 2.1655 0 0 0 2.166-2.166 2.1655 2.1655 0 0 0-2.166-2.166zm0 7.6191a2.1655 2.1655 0 0 0-2.166 2.166 2.1655 2.1655 0 0 0 2.166 2.166 2.1655 2.1655 0 0 0 2.166-2.166 2.1655 2.1655 0 0 0-2.166-2.166z"\r\n    fill="#4F4F4F" />\r\n</svg>\r\n'}),it=(new m.LabIcon({name:"link-git:component",svgstr:'<svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 3.07043C2 2.57924 2.39575 2.19043 2.87 2.19043H16.13C16.6077 2.19043 17 2.58271 17 3.06043V16.9604C17 17.4381 16.6077 17.8304 16.13 17.8304H2.87C2.39228 17.8304 2 17.4381 2 16.9604V3.07043ZM2.87 0.19043C1.28425 0.19043 0 1.48162 0 3.07043V16.9604C0 18.5427 1.28772 19.8304 2.87 19.8304H16.13C17.7123 19.8304 19 18.5427 19 16.9604V3.06043C19 1.47814 17.7123 0.19043 16.13 0.19043H2.87ZM14.9702 3.24023C14.9702 2.96409 14.7464 2.74023 14.4702 2.74023C14.1941 2.74023 13.9702 2.96409 13.9702 3.24023V4.41016H12.7998C12.5237 4.41016 12.2998 4.63401 12.2998 4.91016C12.2998 5.1863 12.5237 5.41016 12.7998 5.41016H13.9702V6.57023C13.9702 6.84638 14.1941 7.07023 14.4702 7.07023C14.7464 7.07023 14.9702 6.84638 14.9702 6.57023V5.41016H16.1298C16.4059 5.41016 16.6298 5.1863 16.6298 4.91016C16.6298 4.63401 16.4059 4.41016 16.1298 4.41016H14.9702V3.24023ZM4.06988 3.36035H9.65988C10.1799 3.36035 10.5999 3.78035 10.5999 4.30035V6.13035C10.5999 6.65035 10.1799 7.07035 9.65988 7.07035H7.37012V9.39141C7.37229 9.42982 7.38802 9.45811 7.40982 9.47789C7.43292 9.49884 7.46724 9.51398 7.51238 9.51147L7.52624 9.5107H9.06982V9.1009C9.06982 8.5809 9.48982 8.1709 10.0098 8.1709H15.5998C16.1198 8.1709 16.5398 8.5909 16.5398 9.1109V10.9409C16.5398 11.4609 16.1198 11.8809 15.5998 11.8809H13.3002V13.9745L13.2994 13.9888C13.2647 14.5959 12.7494 15.0974 12.118 15.0703H10.5999V15.4907C10.5999 16.0107 10.1799 16.4307 9.65988 16.4307H4.06988C3.54988 16.4307 3.12988 16.0107 3.12988 15.4907V13.6607C3.12988 13.1407 3.54988 12.7207 4.06988 12.7207H9.65988C10.1799 12.7207 10.5999 13.1407 10.5999 13.6607V14.0703H12.1445L12.1587 14.0711C12.1892 14.0728 12.2218 14.0623 12.2509 14.0356C12.2784 14.0104 12.2959 13.9766 12.3002 13.9409V11.8809H10.0098C9.48982 11.8809 9.06982 11.4609 9.06982 10.9409V10.5107H7.5521C6.9244 10.5372 6.38816 10.0573 6.37031 9.41459L6.37012 9.4007V7.07035H4.06988C3.54988 7.07035 3.12988 6.65035 3.12988 6.13035V4.30035C3.12988 3.78035 3.54988 3.36035 4.06988 3.36035Z"/>\r\n</svg>\r\n'}),new m.LabIcon({name:"link-git:link-desktop",svgstr:'<svg width="9" height="13" viewBox="0 0 9 13" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M0.5 2C0.5 1.17157 1.17157 0.5 2 0.5H8.5V8.5H0.5V2Z" stroke="#6C79F9"/>\r\n<path d="M0.5 8.5H8.5V10.5H0.5V8.5Z" stroke="#6C79F9"/>\r\n<path d="M2 12.5V9.5H4V12.5L3 11.75L2 12.5Z" fill="#6C79F9"/>\r\n</svg>\r\n'})),rt=new m.LabIcon({name:"link-git:link-branch",svgstr:'<svg width="9" height="15" viewBox="0 0 9 15" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M3.25032 1.86091C3.25032 2.60893 2.63824 3.22182 1.87516 3.22182C1.11208 3.22182 0.5 2.60893 0.5 1.86091C0.5 1.11289 1.11208 0.5 1.87516 0.5C2.63824 0.5 3.25032 1.11289 3.25032 1.86091Z" stroke="#A16CF9"/>\r\n<path d="M3.25032 12.2808C3.25032 13.0288 2.63824 13.6417 1.87516 13.6417C1.11208 13.6417 0.5 13.0288 0.5 12.2808C0.5 11.5328 1.11208 10.9199 1.87516 10.9199C2.63824 10.9199 3.25032 11.5328 3.25032 12.2808Z" stroke="#A16CF9"/>\r\n<path d="M8.50032 3.35017C8.50032 4.09818 7.88824 4.71107 7.12516 4.71107C6.36208 4.71107 5.75 4.09818 5.75 3.35017C5.75 2.60215 6.36208 1.98926 7.12516 1.98926C7.88824 1.98926 8.50032 2.60215 8.50032 3.35017Z" stroke="#A16CF9"/>\r\n<path d="M1.875 3.34863V10.7923" stroke="#A16CF9"/>\r\n<path d="M7.12544 4.83789V5.81534C7.12544 6.91991 6.23001 7.81534 5.12544 7.81534H3.875C2.77043 7.81534 1.875 8.71077 1.875 9.81534V10.4206" stroke="#A16CF9"/>\r\n</svg>\r\n'}),st=new m.LabIcon({name:"link-git:auto-fit",svgstr:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 26.0.2, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\r\n     width="12px" x="0px"\r\n     y="0px" viewBox="0 0 13 13" style="enable-background:new 0 0 13 13;" xml:space="preserve">\r\n<style type="text/css">\r\n\t.pipeline-panel-icon-style{fill:none;stroke:var(--link-panel-toolbar-icon-background);stroke-width:1.2;stroke-linecap:round;}\r\n</style>\r\n    <g>\r\n\t<path class="pipeline-panel-icon-style" d="M4,1H2.5H1"/>\r\n        <path class="pipeline-panel-icon-style" d="M1,4V2.5V1"/>\r\n        <path class="pipeline-panel-icon-style" d="M4.5,4.5L2.8,2.8L1,1"/>\r\n        <path class="pipeline-panel-icon-style" d="M1,9v1.5V12"/>\r\n        <path class="pipeline-panel-icon-style" d="M4,12H2.5H1"/>\r\n        <path class="pipeline-panel-icon-style" d="M4.5,8.5l-1.8,1.8L1,12"/>\r\n        <path class="pipeline-panel-icon-style" d="M9,12h1.5H12"/>\r\n        <path class="pipeline-panel-icon-style" d="M12,9v1.5V12"/>\r\n        <path class="pipeline-panel-icon-style" d="M8.5,8.5l1.8,1.8L12,12"/>\r\n        <path class="pipeline-panel-icon-style" d="M12,4V2.5V1"/>\r\n        <path class="pipeline-panel-icon-style" d="M9,1h1.5H12"/>\r\n        <path class="pipeline-panel-icon-style" d="M8.5,4.5l1.8-1.8L12,1"/>\r\n</g>\r\n</svg>\r\n'}),ot=new m.LabIcon({name:"link-git:zoom-in",svgstr:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 26.0.2, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\r\n     width="12px" x="0px"\r\n     y="0px" viewBox="0 0 13.2 13.2" style="enable-background:new 0 0 13.2 13.2;" xml:space="preserve">\r\n<style type="text/css">\r\n.pipeline-panel-icon-style{fill:none;stroke:var(--link-panel-toolbar-icon-background);stroke-width:1.2;stroke-linecap:round;}\r\n</style>\r\n    <circle class="pipeline-panel-icon-style" cx="6.1" cy="6.1" r="5.4"/>\r\n    <path class="pipeline-panel-icon-style" d="M10.4,10.4l1.1,1.1l1.1,1.1"/>\r\n    <path class="pipeline-panel-icon-style" d="M6.2,4.2v2v2"/>\r\n    <path class="pipeline-panel-icon-style" d="M8.2,6.2h-2h-2"/>\r\n</svg>\r\n'}),at=new m.LabIcon({name:"link-git:zoom-out",svgstr:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 26.0.2, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\r\n     width="12px" x="0px"\r\n     y="0px" viewBox="0 0 13.2 13.2" style="enable-background:new 0 0 13.2 13.2;" xml:space="preserve">\r\n<style type="text/css">\r\n.pipeline-panel-icon-style{fill:none;stroke:var(--link-panel-toolbar-icon-background);stroke-width:1.2;stroke-linecap:round;}\r\n</style>\r\n    <circle class="pipeline-panel-icon-style" cx="6.1" cy="6.1" r="5.4"/>\r\n    <path class="pipeline-panel-icon-style" d="M10.4,10.4l1.1,1.1l1.1,1.1"/>\r\n    <path class="pipeline-panel-icon-style" d="M8.2,6.2h-2h-2"/>\r\n</svg>\r\n'}),lt=new m.LabIcon({name:"link-git:summary-added",svgstr:'<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<circle cx="6" cy="6" r="6" fill="#419640"/>\r\n<rect x="4" y="5.59961" width="4" height="0.8" rx="0.4" fill="white"/>\r\n<rect x="6.39844" y="4" width="4" height="0.8" rx="0.4" transform="rotate(90 6.39844 4)" fill="white"/>\r\n</svg>\r\n'}),ct=(new m.LabIcon({name:"link-git:summary-total",svgstr:'<svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.50078 2.34226C1.50078 2.04754 1.73823 1.81426 2.02278 1.81426H9.97878C10.2654 1.81426 10.5008 2.04963 10.5008 2.33626V10.6763C10.5008 10.9629 10.2654 11.1983 9.97878 11.1983H2.02278C1.73615 11.1983 1.50078 10.9629 1.50078 10.6763V2.34226ZM2.02278 0.614258C1.07133 0.614258 0.300781 1.38897 0.300781 2.34226V10.6763C0.300781 11.6256 1.07341 12.3983 2.02278 12.3983H9.97878C10.9282 12.3983 11.7008 11.6256 11.7008 10.6763V2.33626C11.7008 1.38689 10.9282 0.614258 9.97878 0.614258H2.02278ZM3.2293 2.3H6.37227C6.66464 2.3 6.90078 2.5717 6.90078 2.90809V4.09191C6.90078 4.4283 6.66464 4.7 6.37227 4.7H4.72285V6.13484C4.72415 6.15789 4.73359 6.17487 4.74668 6.18673C4.76053 6.1993 4.78113 6.20839 4.80821 6.20688L4.81652 6.20642H5.74268V6.00416C5.74268 5.66777 5.97882 5.40254 6.27119 5.40254H9.41416C9.70653 5.40254 9.94268 5.67424 9.94268 6.01062V7.19445C9.94268 7.53084 9.70653 7.80254 9.41416 7.80254H8.2809V8.88473L8.28041 8.89328C8.25959 9.25755 7.95043 9.55842 7.57155 9.54216H6.90078V10.0919C6.90078 10.4283 6.66464 10.7 6.37227 10.7H3.2293C2.93693 10.7 2.70078 10.4283 2.70078 10.0919V8.90809C2.70078 8.5717 2.93693 8.3 3.2293 8.3H6.37227C6.66464 8.3 6.90078 8.5717 6.90078 8.90809V8.94216H7.58746L7.59601 8.94265C7.61428 8.9437 7.63384 8.93741 7.65133 8.92136C7.66782 8.90623 7.67831 8.88599 7.6809 8.86454V7.80254H6.27119C5.97882 7.80254 5.74268 7.53084 5.74268 7.19445V6.80642H4.83204C4.45542 6.8223 4.13368 6.53439 4.12297 6.14875L4.12285 6.14042V4.7H3.2293C2.93693 4.7 2.70078 4.4283 2.70078 4.09191V2.90809C2.70078 2.5717 2.93693 2.3 3.2293 2.3Z" fill="#6C79F9"/>\r\n</svg>\r\n'}),new m.LabIcon({name:"link-git:summary-removed",svgstr:'<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<circle cx="6" cy="6" r="6" fill="#F44336"/>\r\n<rect x="4" y="5.60059" width="4" height="0.8" rx="0.4" fill="white"/>\r\n</svg>\r\n'})),dt=(new m.LabIcon({name:"link-git:summary-edited",svgstr:'<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<circle cx="6" cy="6" r="6" fill="#5587EA"/>\r\n<path d="M3.13298 6.80627L3 8.00306V8.06955C3 8.20252 3.13298 8.26901 3.26595 8.26901L4.46274 8.13603L7.32174 5.27703L5.99198 3.94727L3.13298 6.80627Z" fill="white"/>\r\n<path d="M8.18597 3.74799L7.58758 3.1496C7.38811 2.95013 7.05567 2.95013 6.85621 3.1496L6.25781 3.74799L7.58758 5.07776L8.18597 4.47937C8.38544 4.2799 8.38544 3.94746 8.18597 3.74799Z" fill="white"/>\r\n</svg>\r\n'}),new m.LabIcon({name:"link-git:summary-source-edited",svgstr:'<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<circle cx="6" cy="6" r="6" fill="#5587EA"/>\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.87486 3.74609C7.056 3.79462 7.1635 3.98081 7.11496 4.16196L6.06036 8.09778C6.01182 8.27892 5.82563 8.38642 5.64449 8.33788C5.46335 8.28934 5.35585 8.10315 5.40439 7.92201L6.45899 3.98619C6.50753 3.80505 6.69372 3.69755 6.87486 3.74609Z" fill="white"/>\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.30258 4.50522C4.43977 4.63307 4.44734 4.84793 4.31948 4.98512L3.19338 6.19344L4.30192 7.22104C4.43945 7.34853 4.44759 7.56337 4.3201 7.7009C4.19261 7.83843 3.97777 7.84657 3.84024 7.71908L2.58189 6.55261C2.38899 6.37379 2.37797 6.0723 2.5573 5.87988L3.82267 4.52212C3.95053 4.38493 4.16539 4.37736 4.30258 4.50522Z" fill="white"/>\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.88316 7.68785C7.76285 7.54399 7.78194 7.32985 7.92579 7.20954L9.14212 6.19228L7.90751 4.99758C7.77274 4.86717 7.76921 4.6522 7.89962 4.51744C8.03002 4.38267 8.24499 4.37914 8.37976 4.50955L9.77707 5.86169C9.97995 6.05801 9.96803 6.38685 9.75147 6.56797L8.36147 7.73048C8.21762 7.85078 8.00347 7.8317 7.88316 7.68785Z" fill="white"/>\r\n</svg>\r\n'})),ht=new m.LabIcon({name:"link-git:summary-name-dited",svgstr:'<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<circle cx="6" cy="6" r="6" fill="#5587EA"/>\r\n<g clip-path="url(#clip0_2605_2694)">\r\n<path d="M6.96149 7.04579H5.94282C5.81549 7.04579 5.68816 7.14766 5.68816 7.30046V7.45326H5.10242C5.07696 7.45326 5.05149 7.42779 5.05149 7.40233V6.79113H5.43349C5.56082 6.79113 5.68816 6.68926 5.68816 6.53646V6.02713C5.68816 5.87433 5.56082 5.77246 5.43349 5.77246H4.41482C4.28749 5.77246 4.16016 5.87433 4.16016 6.02713V6.53646C4.16016 6.68926 4.28749 6.79113 4.41482 6.79113H4.79682V7.42779C4.79682 7.58059 4.94962 7.70793 5.10242 7.70793H5.68816V7.80979C5.68816 7.96259 5.81549 8.06446 5.94282 8.06446H6.96149C7.08882 8.06446 7.21615 7.96259 7.21615 7.80979V7.30046C7.21615 7.14766 7.11429 7.04579 6.96149 7.04579Z" fill="white"/>\r\n<path d="M7.59674 5.13569H7.08741V4.62636C7.08741 4.54996 7.03647 4.49902 6.96007 4.49902H6.70541C6.62901 4.49902 6.57807 4.54996 6.57807 4.62636V5.13569H6.06874C5.99234 5.13569 5.94141 5.18662 5.94141 5.26302V5.51769C5.94141 5.59409 5.99234 5.64502 6.06874 5.64502H6.57807V6.15436C6.57807 6.23076 6.62901 6.28169 6.70541 6.28169H6.96007C7.03647 6.28169 7.08741 6.23076 7.08741 6.15436V5.64502H7.59674C7.67314 5.64502 7.72407 5.59409 7.72407 5.51769V5.26302C7.72407 5.18662 7.67314 5.13569 7.59674 5.13569Z" fill="white"/>\r\n<path d="M7.34 4.34702L7.28906 4.80542V4.83089C7.28906 4.88182 7.34 4.90729 7.39093 4.90729L7.84933 4.85635L8.94439 3.76129L8.43506 3.25195L7.34 4.34702Z" fill="white"/>\r\n<path d="M9.27759 3.17517L9.04839 2.94597C8.972 2.86957 8.84466 2.86957 8.76826 2.94597L8.53906 3.17517L9.04839 3.6845L9.27759 3.4553C9.35399 3.3789 9.35399 3.25157 9.27759 3.17517Z" fill="white"/>\r\n<path d="M7.97853 5.00868V8.31935H3.90386V4.24468H7.18906L7.21453 4.21922L7.6984 3.73535H3.90386C3.62373 3.73535 3.39453 3.96455 3.39453 4.24468V8.31935C3.39453 8.59948 3.62373 8.82868 3.90386 8.82868H7.97853C8.25866 8.82868 8.48786 8.59948 8.48786 8.31935V4.49935L7.97853 5.00868Z" fill="white"/>\r\n</g>\r\n<defs>\r\n<clipPath id="clip0_2605_2694">\r\n<rect width="6.112" height="6.112" fill="white" transform="translate(3.39453 2.7168)"/>\r\n</clipPath>\r\n</defs>\r\n</svg>\r\n'}),pt=new m.LabIcon({name:"link-git:refresh",svgstr:'<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M11.9441 2.41201C11.2624 1.72501 10.4349 1.19973 9.5227 0.874949C8.61048 0.550171 7.63687 0.434191 6.67376 0.535576C3.68884 0.83613 1.23258 3.25681 0.899115 6.23797C0.451784 10.1777 3.50177 13.5 7.34882 13.5C8.57704 13.5 9.78005 13.1519 10.8181 12.4963C11.8561 11.8406 12.6866 10.9042 13.2129 9.79588C13.4732 9.25163 13.0828 8.62616 12.4809 8.62616C12.18 8.62616 11.8953 8.78862 11.7652 9.05668C11.293 10.0713 10.4853 10.8925 9.47806 11.3822C8.4708 11.8718 7.3254 12.0001 6.23456 11.7454C4.42897 11.3474 2.97311 9.87711 2.59084 8.07379C2.43015 7.36079 2.43201 6.62084 2.59629 5.90866C2.76056 5.19648 3.08304 4.5303 3.53988 3.95939C3.99671 3.38848 4.57622 2.92744 5.23552 2.61039C5.89483 2.29333 6.61707 2.12837 7.34882 2.1277C8.69895 2.1277 9.90268 2.68819 10.7811 3.57361L9.55295 4.80019C9.04055 5.31194 9.39842 6.18923 10.1223 6.18923H13.0421C13.4895 6.18923 13.8555 5.8237 13.8555 5.37693V2.46074C13.8555 1.73779 12.9771 1.37225 12.4647 1.88401L11.9441 2.41201Z" fill="#616161"/>\r\n</svg>\r\n'}),mt=new m.LabIcon({name:"link-git:empty-git-repository",svgstr:'<svg width="101" height="69" viewBox="0 0 101 69" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path opacity="0.3" d="M1 67.0257H71.59L86.4692 33.2148H16.7443L1 67.0257Z" fill="#6C79F9" fill-opacity="0.5"/>\r\n<path opacity="0.7" d="M1 67.0258V8.54688H26.9522L38.8902 20.4497H71.59V33.215M1 67.0258H71.59L86.4692 33.215H71.59M1 67.0258L16.7443 33.215H71.59" stroke="#6C79F9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="5 7"/>\r\n<g opacity="0.7">\r\n<path d="M83.0505 19.6735V3.43359C83.0505 6.56761 85.7857 12.8356 96.7262 12.8356" stroke="#6C79F9" stroke-width="2" stroke-linejoin="round"/>\r\n<circle cx="83.0508" cy="4.27366" r="3.27366" fill="#6C79F9" stroke="#6C79F9" stroke-width="2" stroke-linecap="round"/>\r\n<circle cx="83.0508" cy="19.6565" r="3.27366" fill="#6C79F9" stroke="#6C79F9" stroke-width="2" stroke-linecap="round"/>\r\n<circle cx="96.7263" cy="12.8205" r="3.27366" fill="#6C79F9" stroke="#6C79F9" stroke-width="2" stroke-linecap="round"/>\r\n</g>\r\n</svg>\r\n'}),gt=new m.LabIcon({name:"link-git:folder-open-outlined",svgstr:'<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M14.5714 7.48214H13.125V5.96071C13.125 5.72366 12.9335 5.53214 12.6964 5.53214H8.47768L6.9067 4.02946C6.88671 4.01075 6.86042 4.00023 6.83304 4H3.42857C3.19152 4 3 4.19152 3 4.42857V12.3571C3 12.5942 3.19152 12.7857 3.42857 12.7857H12.7768C12.9509 12.7857 13.1089 12.6799 13.1746 12.5179L14.9692 8.07143C14.9893 8.02054 15 7.96563 15 7.91071C15 7.67366 14.8085 7.48214 14.5714 7.48214ZM3.96429 4.96429H6.48884L8.09063 6.49643H12.1607V7.48214H5.33036C5.15625 7.48214 4.99821 7.58795 4.93259 7.75L3.96429 10.15V4.96429ZM12.4728 11.8214H4.27232L5.6558 8.39286H13.8576L12.4728 11.8214Z" fill="white"/>\r\n</svg>\r\n'}),ut=new m.LabIcon({name:"link-git:init-git-outlined",svgstr:'<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.49538 2.96103C7.36015 2.58946 7.55173 2.17861 7.92329 2.04337C8.29486 1.90813 8.7057 2.09971 8.84094 2.47128L10.4127 6.78958L11.4725 6.40384C12.3798 6.07358 13.3909 6.47277 13.828 7.33379L15.5648 10.7557L16 11.6131L15.0965 11.9421L8.83026 14.2227L7.92665 14.5516L7.7089 13.615L6.83986 9.87725C6.6212 8.93675 7.13914 7.98105 8.04649 7.6508L9.06711 7.27933L7.49538 2.96103ZM8.6125 13.2861L7.85032 10.0079L13.1379 8.08341L14.6612 11.0845L10.9641 12.4301L10.4335 10.9725C10.3659 10.7867 10.1605 10.6909 9.97472 10.7585C9.78893 10.8261 9.69315 11.0316 9.76076 11.2173L10.2913 12.675L8.6125 13.2861ZM5.77914 9.93762C5.96699 10.1225 5.96938 10.4248 5.78445 10.6126C5.41167 10.9913 4.84179 11.263 4.24659 11.3996C3.64539 11.5376 2.96011 11.5513 2.33369 11.3535C2.08232 11.2741 1.9429 11.006 2.02229 10.7546C2.10168 10.5033 2.36981 10.3638 2.62118 10.4432C3.05236 10.5794 3.56034 10.5777 4.0331 10.4692C4.51185 10.3593 4.8966 10.1538 5.10414 9.94294C5.28907 9.75507 5.59127 9.75269 5.77914 9.93762ZM6.73375 11.8469C6.92161 12.0318 6.92399 12.334 6.73907 12.5219C6.36628 12.9006 5.7964 13.1723 5.2012 13.3089C4.60001 13.4468 3.91473 13.4606 3.2883 13.2628C3.03693 13.1833 2.89751 12.9152 2.97691 12.6638C3.05629 12.4125 3.32442 12.2731 3.57579 12.3524C4.00697 12.4887 4.51495 12.4868 4.98771 12.3784C5.46646 12.2685 5.85122 12.063 6.05875 11.8521C6.24368 11.6643 6.54588 11.662 6.73375 11.8469Z" fill="white"/>\r\n</svg>\r\n'}),ft=new m.LabIcon({name:"link-git:clone-git-outlined",svgstr:'<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<rect x="7.73096" y="3" width="6.76923" height="6.76923" rx="1" stroke="white" stroke-width="1.2" stroke-linejoin="bevel"/>\r\n<path d="M5.91758 7.23438H4.5C3.94772 7.23438 3.5 7.68209 3.5 8.23438V13.0036C3.5 13.5559 3.94772 14.0036 4.5 14.0036H9.26923C9.82152 14.0036 10.2692 13.5559 10.2692 13.0036V11.586" stroke="white" stroke-width="1.2" stroke-linejoin="bevel"/>\r\n</svg>\r\n'}),_t=new m.LabIcon({name:"link-git:information",svgstr:'<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<rect width="30" height="30" rx="15" fill="#EBECFC"/>\r\n<path d="M13.25 9.3125C13.25 8.5915 13.8415 8 14.5625 8H15.4375C16.1585 8 16.75 8.5915 16.75 9.3125V10.1875C16.75 10.9085 16.1585 11.5 15.4375 11.5H14.5625C14.2148 11.4986 13.8818 11.3599 13.6359 11.1141C13.3901 10.8682 13.2514 10.5352 13.25 10.1875V9.3125ZM18.5 22H11.5V20.25H13.25V15H11.5V13.25H16.75V20.25H18.5V22Z" fill="#6C79F9"/>\r\n</svg>\r\n'}),vt=new m.LabIcon({name:"link-git:input-hint",svgstr:'<svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M6 0.470703C2.7 0.470703 0 3.1707 0 6.4707C0 9.7707 2.7 12.4707 6 12.4707C9.3 12.4707 12 9.7707 12 6.4707C12 3.1707 9.3 0.470703 6 0.470703ZM5.64 3.4107H6.36C6.54 3.4107 6.66 3.5307 6.66 3.7107L6.54 7.4307C6.54 7.6107 6.42 7.7307 6.24 7.7307H5.76C5.58 7.7307 5.46 7.6107 5.46 7.4307L5.34 3.7107C5.34 3.5307 5.46 3.4107 5.64 3.4107ZM6.48 9.5307C6.36 9.6507 6.18 9.7107 6 9.7107C5.82 9.7107 5.64 9.6507 5.52 9.5307C5.4 9.4107 5.34 9.2307 5.34 9.0507C5.34 8.8707 5.4 8.6907 5.52 8.5707C5.64 8.4507 5.82 8.3907 6 8.3907C6.18 8.3907 6.36 8.4507 6.48 8.5707C6.6 8.6907 6.66 8.8707 6.66 9.0507C6.72 9.2907 6.66 9.4107 6.48 9.5307Z" fill="#F44336"/>\r\n</svg>\r\n'}),Ct=new m.LabIcon({name:"link-git:subtract",svgstr:'<svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 24.4707C18.6274 24.4707 24 19.0981 24 12.4707C24 5.84329 18.6274 0.470703 12 0.470703C5.37258 0.470703 0 5.84329 0 12.4707C0 19.0981 5.37258 24.4707 12 24.4707ZM8.46492 10.3497C8.0744 9.95916 8.07439 9.326 8.46492 8.93547C8.85544 8.54495 9.48861 8.54495 9.87913 8.93547L12.0002 11.0565L14.121 8.93562C14.5115 8.5451 15.1447 8.5451 15.5352 8.93562C15.9258 9.32615 15.9258 9.95931 15.5352 10.3498L13.4144 12.4707L15.536 14.5923C15.9265 14.9828 15.9265 15.616 15.536 16.0065C15.1455 16.3971 14.5123 16.3971 14.1218 16.0065L12.0002 13.8849L9.87838 16.0067C9.48785 16.3972 8.85469 16.3972 8.46416 16.0067C8.07364 15.6162 8.07364 14.983 8.46416 14.5925L10.5859 12.4707L8.46492 10.3497Z" fill="#EB5B4B"/>\r\n</svg>\r\n'}),bt=new m.LabIcon({name:"link-git:error-icon-for-dialog",svgstr:'<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<rect width="30" height="30" rx="15" fill="#FFEDEE"/>\r\n<g clip-path="url(#clip0_26016_15416)">\r\n<path d="M15.0005 16.2635C15.24 16.2635 15.4696 16.1683 15.6389 15.999C15.8082 15.8297 15.9033 15.6001 15.9033 15.3607V11.1801C15.9033 10.9407 15.8082 10.7111 15.6389 10.5418C15.4696 10.3725 15.24 10.2773 15.0005 10.2773C14.7611 10.2773 14.5315 10.3725 14.3622 10.5418C14.1929 10.7111 14.0978 10.9407 14.0978 11.1801V15.3468C14.0959 15.4665 14.1179 15.5854 14.1625 15.6965C14.207 15.8077 14.2732 15.9088 14.3572 15.9941C14.4412 16.0795 14.5414 16.1472 14.6518 16.1934C14.7623 16.2397 14.8808 16.2635 15.0005 16.2635Z" fill="#C55B5F"/>\r\n<path d="M14.9635 19.3529C15.5388 19.3529 16.0052 18.8865 16.0052 18.3112C16.0052 17.7359 15.5388 17.2695 14.9635 17.2695C14.3882 17.2695 13.9219 17.7359 13.9219 18.3112C13.9219 18.8865 14.3882 19.3529 14.9635 19.3529Z" fill="#C55B5F"/>\r\n<path d="M23.5633 19.1942L16.7994 6.73584C16.6203 6.40682 16.3559 6.13217 16.0338 5.9408C15.7118 5.74944 15.3441 5.64844 14.9695 5.64844C14.595 5.64844 14.2273 5.74944 13.9053 5.9408C13.5832 6.13217 13.3188 6.40682 13.1397 6.73584L6.36885 19.1942C6.19163 19.5123 6.10088 19.8713 6.10565 20.2354C6.11041 20.5995 6.21052 20.956 6.39601 21.2693C6.58149 21.5827 6.84586 21.8419 7.16277 22.0213C7.47968 22.2006 7.83806 22.2937 8.20218 22.2914H21.73C22.0911 22.2917 22.4461 22.1982 22.7602 22.0199C23.0743 21.8416 23.3366 21.5848 23.5215 21.2746C23.7064 20.9643 23.8074 20.6114 23.8148 20.2503C23.8221 19.8892 23.7354 19.5325 23.5633 19.215V19.1942ZM22.3272 20.5414C22.2657 20.6451 22.1783 20.7309 22.0736 20.7906C21.9689 20.8503 21.8505 20.8816 21.73 20.8817H8.20218C8.08147 20.882 7.96276 20.8509 7.85776 20.7913C7.75275 20.7318 7.66508 20.6459 7.60339 20.5421C7.54169 20.4384 7.50811 20.3203 7.50595 20.1996C7.50379 20.079 7.53313 19.9598 7.59107 19.8539L14.355 7.39556C14.4145 7.28531 14.5027 7.19322 14.6103 7.12903C14.7179 7.06485 14.8408 7.03096 14.9661 7.03096C15.0914 7.03096 15.2143 7.06485 15.3219 7.12903C15.4295 7.19322 15.5177 7.28531 15.5772 7.39556L22.3411 19.8539C22.3986 19.9598 22.4276 20.0789 22.4252 20.1995C22.4228 20.32 22.389 20.4379 22.3272 20.5414Z" fill="#C55B5F"/>\r\n</g>\r\n<defs>\r\n<clipPath id="clip0_26016_15416">\r\n<rect width="25" height="25" fill="white" transform="translate(2.5 2.5)"/>\r\n</clipPath>\r\n</defs>\r\n</svg>\r\n'}),yt=new m.LabIcon({name:"link-git:tooltip-icon",svgstr:'<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n<rect y="0.970703" width="16" height="16" rx="8" fill="#E3E2EB"/>\r\n<path d="M8.49951 10.5806H7.12988C7.13346 10.2583 7.15853 9.98079 7.20508 9.74805C7.25521 9.51172 7.33936 9.29867 7.45752 9.10889C7.57926 8.91911 7.7404 8.73112 7.94092 8.54492C8.10921 8.39453 8.25602 8.2513 8.38135 8.11523C8.50667 7.97917 8.60514 7.83952 8.67676 7.69629C8.74837 7.54948 8.78418 7.38656 8.78418 7.20752C8.78418 6.99984 8.75195 6.82796 8.6875 6.69189C8.62663 6.55225 8.53353 6.44661 8.4082 6.375C8.28646 6.30339 8.13249 6.26758 7.94629 6.26758C7.79232 6.26758 7.64909 6.3016 7.5166 6.36963C7.38411 6.43408 7.2749 6.53434 7.18896 6.67041C7.10661 6.80648 7.06364 6.98551 7.06006 7.20752H5.50244C5.51318 6.71696 5.62598 6.31234 5.84082 5.99365C6.05924 5.67139 6.35107 5.43327 6.71631 5.2793C7.08154 5.12174 7.49154 5.04297 7.94629 5.04297C8.44759 5.04297 8.87728 5.12533 9.23535 5.29004C9.59342 5.45117 9.86735 5.68929 10.0571 6.00439C10.2469 6.31592 10.3418 6.69548 10.3418 7.14307C10.3418 7.45459 10.2809 7.7321 10.1592 7.97559C10.0374 8.21549 9.87809 8.43929 9.68115 8.64697C9.48421 8.85465 9.26758 9.0695 9.03125 9.2915C8.82715 9.47412 8.6875 9.66569 8.6123 9.86621C8.54069 10.0667 8.50309 10.3049 8.49951 10.5806ZM6.96875 12.2402C6.96875 12.0111 7.04753 11.8213 7.20508 11.6709C7.36263 11.5169 7.57389 11.4399 7.83887 11.4399C8.10026 11.4399 8.30973 11.5169 8.46729 11.6709C8.62842 11.8213 8.70898 12.0111 8.70898 12.2402C8.70898 12.4622 8.62842 12.6502 8.46729 12.8042C8.30973 12.9582 8.10026 13.0352 7.83887 13.0352C7.57389 13.0352 7.36263 12.9582 7.20508 12.8042C7.04753 12.6502 6.96875 12.4622 6.96875 12.2402Z" fill="#393847"/>\r\n</svg>\r\n'}),wt=e=>{const{disabled:t,className:n,title:i,onClick:r,icon:s}=e;return _.createElement("button",{disabled:t,className:(0,Ie.classes)(Pe,n),title:i,onClick:r},_.createElement(s.react,{elementPosition:"center",tag:"span"}))},xt=(0,Ie.style)({userSelect:"none",display:"flex",flexDirection:"row",alignItems:"center",boxSizing:"border-box",color:"var(--jp-ui-font-color1)",lineHeight:"var(--jp-private-running-item-height)",padding:"0px 4px",listStyleType:"none",$nest:{"&:hover":{backgroundColor:"var(--jp-layout-color2)"}}},He),kt=(0,Ie.style)({color:"white",background:"var(--jp-brand-color1)",$nest:{"&:hover":{color:"white",background:"var(--jp-brand-color1) !important"},"&:hover .jp-icon-selectable[fill]":{fill:"white"},"&:hover .jp-icon-selectable[stroke]":{stroke:"white"},"& .jp-icon-selectable[fill]":{fill:"white"},"& .jp-icon-selectable-inverse[fill]":{fill:"var(--jp-brand-color1)"}}}),Et=(0,Ie.style)({fontSize:"10px",marginLeft:"5px"}),St=(0,Ie.style)({color:"white !important"}),Ft=(0,Ie.style)({color:"var(--jp-brand-color0)"}),Rt=(0,Ie.style)({color:"var(--jp-warn-color0)",fontWeight:"bold"}),Dt=(0,Ie.style)({color:"var(--jp-info-color0)"}),Nt=((0,Ie.style)({display:"none"}),(0,Ie.style)({marginTop:"5px"}),(0,Ie.style)({flex:"0 0 auto"})),Lt=(0,Ie.style)({flex:"0 0 auto",height:"16px",width:"16px",marginRight:"4px"}),jt=(0,Ie.style)({flex:"1 1 auto",fontSize:"var(--jp-ui-font-size1)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),Mt=(0,Ie.style)({color:"var(--jp-ui-font-color2)",fontSize:"var(--jp-ui-font-size0)",margin:"0px 4px"}),It=e=>{const t="/"===(n=e.filepath)[n.length-1]?n:p.PathExt.basename(n);var n;const i=e.filepath.slice(0,e.filepath.length-t.length).replace(/^\/|\/$/g,""),r=e.filetype.icon||m.fileIcon;return _.createElement(_.Fragment,null,_.createElement(r.react,{className:Lt,elementPosition:"center",tag:"span"}),_.createElement("span",{className:jt},t,_.createElement("span",{className:Mt},i)))},Pt={M:"Modified",A:"Added",D:"Deleted",R:"Renamed",C:"Copied",U:"Updated",B:"Behind","?":"Untracked","!":"Ignored"};class Bt extends _.PureComponent{constructor(){super(...arguments),this._onClick=()=>{this.props.model.toggleMark(this.props.fname),this.forceUpdate()},this._onDoubleClick=e=>{e.stopPropagation()}}render(){return this.props.model.addMark(this.props.fname,"untracked"!==this.props.stage),_.createElement("input",{name:"gitMark",className:Nt,type:"checkbox",checked:this.props.model.getMark(this.props.fname),onChange:this._onClick,onDoubleClick:this._onDoubleClick})}}class Ht extends _.PureComponent{constructor(e){super(e)}_getFileChangedLabel(e){return Pt[e]||"Unmodified"}_getFileChangedLabelClass(e){return"M"===e?this.props.selected?(0,Ie.classes)(Et,Ft,St):(0,Ie.classes)(Et,Ft):"!"===e?this.props.selected?(0,Ie.classes)(Et,Rt,St):(0,Ie.classes)(Et,Rt):this.props.selected?(0,Ie.classes)(Et,Dt,St):(0,Ie.classes)(Et,Dt)}_getFileClass(){const e=this.props.selected?(0,Ie.classes)(xt,kt):xt;return this.props.className?`${e} ${this.props.className}`:e}render(){const{file:e}=this.props,t="staged"===e.status?e.x:e.y,n="unmerged"===e.status?"Conflicted":this._getFileChangedLabel(t);return _.createElement("div",{className:this._getFileClass(),onClick:this.props.selectFile&&(()=>this.props.selectFile(this.props.file)),onContextMenu:this.props.contextMenu&&(e=>{this.props.contextMenu(this.props.file,e)}),onDoubleClick:this.props.onDoubleClick,style:this.props.style,title:this.props.trans.__(`%1 • ${n}`,this.props.file.to)},this.props.markBox&&_.createElement(Bt,{fname:this.props.file.to,stage:this.props.file.status,model:this.props.model}),_.createElement(It,{filepath:this.props.file.to,filetype:this.props.file.type}),this.props.actions,_.createElement("span",{className:this._getFileChangedLabelClass("unmerged"===this.props.file.status?"!":this.props.file.y)},"unmerged"===this.props.file.status?"!":"?"===this.props.file.y?"U":t))}}var Tt=n(60737);const Ot=(0,Ie.style)({margin:"0",padding:"0",overflow:"auto",$nest:{"& button:disabled":{opacity:.5}}}),Vt=(0,Ie.style)({display:"flex",flexDirection:"row",alignItems:"center",margin:"4px 0px",padding:"4px",fontWeight:600,borderBottom:"var(--jp-border-width) solid var(--jp-border-color2)",letterSpacing:"1px",fontSize:"12px",$nest:{"&:hover":{backgroundColor:"var(--jp-layout-color2)"}}},He),At=(0,Ie.style)({flex:"1 1 auto",textOverflow:"ellipsis",overflow:"hidden",fontSize:"11px",fontWeight:700,whiteSpace:"nowrap"}),zt=(0,Ie.style)({flex:"0 0 auto",whiteSpace:"nowrap",padding:"0px 4px",height:"16px",background:"var(--current-repository-background)",borderRadius:"20px",color:"#6c79f9",lineHeight:"16px",textAlign:"center",fontSize:"11px"}),Ut=(0,Ie.style)({flex:"0 0 auto",backgroundColor:"transparent",height:"13px",width:"12px",border:"none",outline:"none",paddingLeft:"0px"}),Gt=e=>{const[t,n]=_.useState(!0),i=e.files.length;return _.createElement("div",{className:Ot},_.createElement("div",{className:Vt,onClick:()=>{e.collapsible&&i>0&&n(!t)}},e.collapsible&&_.createElement("button",{className:Ut},t&&i>0?_.createElement(m.caretDownIcon.react,null):_.createElement(m.caretRightIcon.react,null)),_.createElement("span",{className:At},e.heading),e.actions,_.createElement("span",{className:zt},i)),t&&i>0&&_.createElement(Tt.FixedSizeList,{height:Math.max(Math.min(e.height-34,25*i),25),itemCount:i,itemData:e.files,itemKey:(e,t)=>t[e].to,itemSize:25,style:{overflowX:"hidden"},width:"auto"},e.rowRenderer))};async function Zt(e,t,n){if((await(0,r.showDialog)({title:t.__("Discard all changes"),body:n?t.__("Your current changes forbid pulling the latest changes. Do you want to permanently discard those changes? This action cannot be undone."):t.__("Are you sure you want to permanently discard changes to all files? This action cannot be undone."),buttons:[r.Dialog.cancelButton({label:t.__("Cancel")}),r.Dialog.warnButton({label:t.__("Discard")})]})).button.accept)try{return e.resetToCommit("HEAD")}catch(e){return(0,r.showErrorMessage)(t.__("Discard all changes failed."),e),Promise.reject(e)}return Promise.reject({cancelled:!0,message:"The user refused to discard all changes"})}const Wt={"partially-staged":[_e.gitFileOpen,_e.gitFileUnstage,_e.gitFileDiff,_e.gitFileHistory],"remote-changed":[_e.gitFileOpen],unstaged:[_e.gitFileOpen,_e.gitFileStage,_e.gitFileDiscard,_e.gitFileDiff,_e.gitFileHistory],untracked:[_e.gitFileOpen,_e.gitFileTrack,_e.gitIgnore,_e.gitIgnoreExtension,_e.gitFileDelete],staged:[_e.gitFileOpen,_e.gitFileUnstage,_e.gitFileDiff,_e.gitCommitAmendStaged,_e.gitFileHistory],unmodified:[_e.gitFileHistory],unmerged:[_e.gitFileDiff]},$t={"partially-staged":[_e.gitFileOpen,_e.gitFileDiscard,_e.gitFileDiff,_e.gitFileHistory],"remote-changed":[_e.gitFileOpen],staged:[_e.gitFileOpen,_e.gitFileDiscard,_e.gitFileDiff,_e.gitFileHistory],unstaged:[_e.gitFileOpen,_e.gitFileDiscard,_e.gitFileDiff,_e.gitFileHistory],untracked:[_e.gitFileOpen,_e.gitIgnore,_e.gitIgnoreExtension,_e.gitFileDelete],unmodified:[_e.gitFileHistory],unmerged:[_e.gitFileDiff]};class qt extends _.Component{constructor(e){super(e),this.openContextMenu=(e,t)=>{t.preventDefault(),this.setState({selectedFile:e});const n=new f.Menu({commands:this.props.commands});qn(Wt[e.status],n,[e]),n.open(t.clientX,t.clientY)},this.openSimpleContextMenu=(e,t)=>{t.preventDefault();const n=new f.Menu({commands:this.props.commands});qn($t[e.status],n,[e]),n.open(t.clientX,t.clientY)},this.resetAllStagedFiles=async e=>{e.stopPropagation(),await this.props.model.reset()},this.resetStagedFile=async e=>{await this.props.model.reset(e)},this.addAllUnstagedFiles=async e=>{e.stopPropagation(),await this.props.model.addAllUnstaged()},this.discardAllUnstagedFiles=async e=>{if(e.stopPropagation(),(await(0,r.showDialog)({title:this.props.trans.__("Discard all changes"),body:this.props.trans.__("Are you sure you want to permanently discard changes to all unstaged files? This action cannot be undone."),buttons:[r.Dialog.cancelButton({label:this.props.trans.__("Cancel")}),r.Dialog.warnButton({label:this.props.trans.__("Discard")})]})).button.accept)try{await this.props.model.checkout()}catch(e){(0,r.showErrorMessage)(this.props.trans.__("Discard all unstaged changes failed."),e)}},this.discardAllChanges=async e=>{e.stopPropagation(),await Zt(this.props.model,this.props.trans)},this.addFile=async(...e)=>{await this.props.model.add(...e)},this.discardChanges=async e=>{await this.props.commands.execute(_e.gitFileDiscard,{files:[e]})},this.addAllUntrackedFiles=async e=>{e.stopPropagation(),await this.props.model.addAllUntracked()},this.addAllMarkedFiles=async()=>{await this.addFile(...this.markedFiles.map((e=>e.to)))},this.updateSelectedFile=e=>{this.setState({selectedFile:e})},this.pullFromRemote=async e=>{await this.props.commands.execute(ve.gitPull,{})},this._renderUnmergedRow=e=>{const{data:t,index:n,style:i}=e,r=t[n],s=this._createDiffButton(r);return _.createElement(Ht,{trans:this.props.trans,actions:!r.is_binary&&s,contextMenu:this.openContextMenu,file:r,model:this.props.model,selected:this._isSelectedFile(r),selectFile:this.updateSelectedFile,onDoubleClick:()=>this._openDiffView(r),style:Object.assign({},i)})},this._renderStagedRow=e=>{const t=this.props.settings.get("doubleClickDiff").composite,{data:n,index:i,style:r}=e,s=n[i],o=()=>{console.log("FILE :",s),this.props.commands.execute(_e.gitFileOpen,{files:[s]})},a=this._createDiffButton(s);return _.createElement(Ht,{trans:this.props.trans,actions:_.createElement(_.Fragment,null,_.createElement(wt,{className:Be,icon:Xe,title:this.props.trans.__("Open this file"),onClick:o}),a,_.createElement(wt,{className:Be,icon:Je,title:this.props.trans.__("Unstage this change"),onClick:()=>{this.resetStagedFile(s.to)}})),file:s,contextMenu:this.openContextMenu,model:this.props.model,selected:this._isSelectedFile(s),selectFile:this.updateSelectedFile,onDoubleClick:t?a?()=>this._openDiffView(s):()=>{}:o,style:r})},this._renderChangedRow=e=>{const t=this.props.settings.get("doubleClickDiff").composite,{data:n,index:i,style:r}=e,s=n[i],o=()=>{console.log("FILE :",s),this.props.commands.execute(_e.gitFileOpen,{files:[s]})},a=this._createDiffButton(s);return _.createElement(Ht,{trans:this.props.trans,actions:_.createElement(_.Fragment,null,_.createElement(wt,{className:Be,icon:Xe,title:this.props.trans.__("Open this file"),onClick:o}),a,_.createElement(wt,{className:Be,icon:Ze,title:this.props.trans.__("Discard changes"),onClick:()=>{this.discardChanges(s)}}),_.createElement(wt,{className:Be,icon:Ve,title:this.props.trans.__("Stage this change"),onClick:()=>{this.addFile(s.to)}})),file:s,contextMenu:this.openContextMenu,model:this.props.model,selected:this._isSelectedFile(s),selectFile:this.updateSelectedFile,onDoubleClick:t?a?()=>this._openDiffView(s):()=>{}:o,style:r})},this._renderUntrackedRow=e=>{const t=this.props.settings.get("doubleClickDiff").composite,{data:n,index:i,style:r}=e,s=n[i];return _.createElement(Ht,{trans:this.props.trans,actions:_.createElement(_.Fragment,null,_.createElement(wt,{className:Be,icon:Xe,title:this.props.trans.__("Open this file"),onClick:()=>{console.log(s),this.props.commands.execute(_e.gitFileOpen,{files:[s]})}}),_.createElement(wt,{className:Be,icon:Ve,title:this.props.trans.__("Track this file"),onClick:()=>{this.addFile(s.to)}})),file:s,contextMenu:this.openContextMenu,model:this.props.model,onDoubleClick:()=>{t||this.props.commands.execute(_e.gitFileOpen,{files:[s]})},selected:this._isSelectedFile(s),selectFile:this.updateSelectedFile,style:r})},this._renderRemoteChangedRow=e=>{const t=this.props.settings.get("doubleClickDiff").composite,{data:n,index:i,style:r}=e,s=n[i];return _.createElement(Ht,{trans:this.props.trans,actions:_.createElement(_.Fragment,null,_.createElement(wt,{className:Be,icon:Xe,title:this.props.trans.__("Open this file"),onClick:()=>{console.log(s),this.props.commands.execute(_e.gitFileOpen,{files:[s]})}})),file:s,contextMenu:this.openContextMenu,model:this.props.model,onDoubleClick:()=>{t||this.props.commands.execute(_e.gitFileOpen,{files:[s]})},selected:this._isSelectedFile(s),selectFile:this.updateSelectedFile,style:r})},this._renderSimpleStageRow=e=>{const{data:t,index:n,style:i}=e,r=t[n],s=this.props.settings.get("doubleClickDiff").composite,o=()=>{console.log("FILE :",r),this.props.commands.execute(_e.gitFileOpen,{files:[r]})};let a=_.createElement(wt,{className:Be,icon:Xe,title:this.props.trans.__("Open this file"),onClick:o}),l=s?()=>{}:o;if("unstaged"===r.status||"partially-staged"===r.status){const e=this._createDiffButton(r);a=_.createElement(_.Fragment,null,_.createElement(wt,{className:Be,icon:Xe,title:this.props.trans.__("Open this file"),onClick:o}),e,_.createElement(wt,{className:Be,icon:Ze,title:this.props.trans.__("Discard changes"),onClick:()=>{this.discardChanges(r)}})),l=s?e?()=>this._openDiffView(r):()=>{}:o}else if("staged"===r.status){const e=this._createDiffButton(r);a=_.createElement(_.Fragment,null,_.createElement(wt,{className:Be,icon:Xe,title:this.props.trans.__("Open this file"),onClick:o}),e,_.createElement(wt,{className:Be,icon:Ze,title:this.props.trans.__("Discard changes"),onClick:()=>{this.discardChanges(r)}})),l=s?e?()=>this._openDiffView(r):()=>{}:o}return _.createElement(Ht,{trans:this.props.trans,actions:a,file:r,markBox:!0,model:this.props.model,onDoubleClick:l,contextMenu:this.openSimpleContextMenu,selectFile:this.updateSelectedFile,style:i})},this.state={selectedFile:null}}get markedFiles(){return this.props.files.filter((e=>this.props.model.getMark(e.to)))}render(){const e=[],t=[];if(this.props.settings.composite.simpleStaging){const n=[];return this.props.files.forEach((i=>{switch(i.status){case"remote-changed":e.push(i);break;case"unmerged":t.push(i);break;default:n.push(i)}})),_.createElement("div",{className:Te},_.createElement(de(),{disableWidth:!0},(({height:i})=>_.createElement(_.Fragment,null,this._renderUnmerged(t,i,!1),this._renderRemoteChanged(e,i),this._renderSimpleStage(n,i)))))}{const n=[],i=[],r=[];return this.props.files.forEach((s=>{switch(s.status){case"staged":n.push(s);break;case"unstaged":i.push(s);break;case"untracked":r.push(s);break;case"partially-staged":n.push(Object.assign(Object.assign({},s),{status:"staged"})),i.push(Object.assign(Object.assign({},s),{status:"unstaged"}));break;case"unmerged":t.push(s);break;case"remote-changed":e.push(s)}})),_.createElement("div",{className:Te,onContextMenu:e=>e.preventDefault()},_.createElement(de(),{disableWidth:!0},(({height:s})=>_.createElement(_.Fragment,null,this._renderUnmerged(t,s),this._renderRemoteChanged(e,s),this._renderStaged(n,s),this._renderChanged(i,s),this._renderUntracked(r,s)))))}}_isSelectedFile(e){return null!==this.state.selectedFile&&this.state.selectedFile.x===e.x&&this.state.selectedFile.y===e.y&&this.state.selectedFile.from===e.from&&this.state.selectedFile.to===e.to&&this.state.selectedFile.status===e.status}_renderUnmerged(e,t,n=!0){return e.length>0?_.createElement(Gt,{collapsible:n,files:e,heading:this.props.trans.__("Conflicted"),height:t,rowRenderer:this._renderUnmergedRow}):null}_renderStaged(e,t){return _.createElement(Gt,{actions:_.createElement(wt,{className:Be,disabled:0===e.length,icon:Je,title:this.props.trans.__("Unstage all changes"),onClick:this.resetAllStagedFiles}),collapsible:!0,files:e,heading:this.props.trans.__("Staged"),height:t,rowRenderer:this._renderStagedRow})}_renderChanged(e,t){const n=0===e.length;return _.createElement(Gt,{actions:_.createElement(_.Fragment,null,_.createElement(wt,{className:Be,disabled:n,icon:Ze,title:this.props.trans.__("Discard All Changes"),onClick:this.discardAllUnstagedFiles}),_.createElement(wt,{className:Be,disabled:n,icon:Ve,title:this.props.trans.__("Stage all changes"),onClick:this.addAllUnstagedFiles})),collapsible:!0,heading:this.props.trans.__("Changed"),height:t,files:e,rowRenderer:this._renderChangedRow})}_renderUntracked(e,t){return _.createElement(Gt,{actions:_.createElement(wt,{className:Be,disabled:0===e.length,icon:Ve,title:this.props.trans.__("Track all untracked files"),onClick:this.addAllUntrackedFiles}),collapsible:!0,heading:this.props.trans.__("Untracked"),height:t,files:e,rowRenderer:this._renderUntrackedRow})}_renderRemoteChanged(e,t){return e.length>0&&_.createElement(Gt,{actions:_.createElement(wt,{className:Be,disabled:0===e.length,icon:Ve,title:this.props.trans.__("Pull from remote branch"),onClick:this.pullFromRemote}),collapsible:!0,heading:this.props.trans.__("Remote Changes"),height:t,files:e,rowRenderer:this._renderRemoteChangedRow})}_renderSimpleStage(e,t){return _.createElement(Gt,{actions:_.createElement(wt,{className:Be,disabled:0===e.length,icon:Ze,title:this.props.trans.__("Discard All Changes"),onClick:this.discardAllChanges}),heading:this.props.trans.__("Changed"),height:t,files:e,rowRenderer:this._renderSimpleStageRow})}_createDiffButton(e){return(Ne(e.to)||!e.is_binary)&&_.createElement(wt,{className:Be,icon:Ge,title:this.props.trans.__("Diff this file"),onClick:()=>this._openDiffView(e)})}async _openDiffView(e){try{await this.props.commands.execute(_e.gitFileDiff,{files:[{filePath:e.to,isText:!e.is_binary,status:e.status}]})}catch(t){console.error(`Failed to open diff view for ${e.to}.\n${t}`)}}}var Xt=n(52663),Kt=n(66856),Yt=n(50998),Jt=n(35996);const Qt=(0,Ie.style)({width:"400px",color:"var(--jp-ui-font-color1)!important",borderRadius:"3px!important",backgroundColor:"var(--jp-layout-color1)!important"}),en=(0,Ie.style)({position:"absolute",top:"10px",right:"12px",height:"30px",width:"30px",padding:0,border:"none",borderRadius:"50%",backgroundColor:"var(--jp-layout-color1)",$nest:{svg:{fill:"var(--jp-ui-font-color1)"},"&:hover":{backgroundColor:"var(--jp-border-color2)"},"&:active":{backgroundColor:"var(--jp-border-color2)"}}}),tn=(0,Ie.style)({boxSizing:"border-box",position:"relative",padding:"15px",borderBottom:"var(--jp-border-width) solid var(--jp-border-color2)"}),nn=(0,Ie.style)({fontWeight:700}),rn=(0,Ie.style)({padding:"15px",$nest:{"> p":{marginBottom:"7px"}}}),sn=(0,Ie.style)({boxSizing:"border-box",width:"100%",height:"2em",marginBottom:"16px",padding:"1px 18px 2px 7px",color:"var(--jp-ui-font-color1)",fontSize:"var(--jp-ui-font-size1)",fontWeight:300,backgroundColor:"var(--jp-layout-color1)",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px",$nest:{"&:active":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"},"&:focus":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"}}}),on=(0,Ie.style)({padding:0,paddingBottom:"4px"}),an=(0,Ie.style)({boxSizing:"border-box",display:"inline-block",position:"relative",width:"100%",marginRight:"11px",fontSize:"var(--jp-ui-font-size1)"}),ln=(0,Ie.style)({boxSizing:"border-box",width:"100%",height:"2em",padding:"1px 18px 2px 7px",color:"var(--jp-ui-font-color1)",fontSize:"var(--jp-ui-font-size1)",fontWeight:300,backgroundColor:"var(--jp-layout-color1)",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px",$nest:{"&:active":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"},"&:focus":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"}}}),cn=(0,Ie.style)({position:"absolute",right:"5px",top:"0.6em",height:"1.1em",width:"1.1em",padding:0,backgroundColor:"var(--jp-inverse-layout-color4)",border:"none",borderRadius:"50%",$nest:{svg:{width:"0.5em!important",height:"0.5em!important",fill:"var(--jp-ui-inverse-font-color0)"},"&:hover":{backgroundColor:"var(--jp-inverse-layout-color3)"},"&:active":{backgroundColor:"var(--jp-inverse-layout-color2)"}}}),dn=(0,Ie.style)({boxSizing:"border-box",display:"block",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px",paddingTop:0,paddingBottom:0}),hn=(0,Ie.style)({flexDirection:"row",flexWrap:"wrap",width:"100%",padding:"4px 11px 4px 11px!important",fontSize:"var(--jp-ui-font-size1)",lineHeight:"1.5em"}),pn=(0,Ie.style)({color:"white!important",backgroundColor:"var(--jp-brand-color1)!important",$nest:{"& .jp-icon-selectable[fill]":{fill:"white"}}}),mn=(0,Ie.style)({flexBasis:0,flexGrow:1,marginTop:"auto",marginBottom:"auto",marginRight:"auto"}),gn=(0,Ie.style)({marginBottom:"auto",whiteSpace:"break-spaces"}),un=(0,Ie.style)({width:"16px",height:"16px",margin:"auto 8px auto 0"}),fn=(0,Ie.style)({}),_n=(0,Ie.style)({fontWeight:700}),vn=(0,Ie.style)({color:"#ff0000"}),Cn=(0,Ie.style)({padding:"15px!important",borderTop:"var(--jp-border-width) solid var(--jp-border-color2)"}),bn=(0,Ie.style)({boxSizing:"border-box",width:"9em",height:"2em",color:"white",fontSize:"var(--jp-ui-font-size1)",border:"0",borderRadius:"3px"}),yn=(0,Ie.style)({backgroundColor:"var(--md-grey-500)",$nest:{"&:hover":{backgroundColor:"var(--md-grey-600)"},"&:active":{backgroundColor:"var(--md-grey-700)"}}}),wn=(0,Ie.style)({backgroundColor:"var(--md-blue-500)",$nest:{"&:hover":{backgroundColor:"var(--md-blue-600)"},"&:active":{backgroundColor:"var(--md-blue-700)"},"&:disabled":{cursor:"default",color:"var(--jp-ui-inverse-font-color0)",backgroundColor:"var(--jp-layout-color3)"},"&:disabled:hover":{backgroundColor:"var(--jp-layout-color3)"},"&:disabled:active":{backgroundColor:"var(--jp-layout-color3)"}}});function xn(e){const[t,n]=v().useState(""),[i,r]=v().useState(null),s=e.branches.filter((e=>!t||e.name.includes(t))),{trans:o}=e;return v().createElement(Xt.Z,{classes:{paper:Qt},open:!0,onClose:e.onClose},v().createElement("div",{className:tn},v().createElement("p",{className:nn},o.__("Merge Branch")),v().createElement("button",{className:en},v().createElement(Jt.Z,{titleAccess:o.__("Close this dialog"),fontSize:"small",onClick:()=>{e.onClose()}}))),v().createElement("div",{className:rn},v().createElement("p",null,o.__("Select the branch to merge in %1",e.currentBranch)),v().createElement("div",{className:on},v().createElement("div",{className:an},v().createElement("input",{className:ln,type:"text",onChange:e=>{n(e.target.value)},value:t,placeholder:o.__("Filter"),title:o.__("Filter branch list")}),t?v().createElement("button",{className:cn},v().createElement(Jt.Z,{titleAccess:o.__("Clear the current filter"),fontSize:"small",onClick:()=>{n("")}})):null)),v().createElement(Tt.FixedSizeList,{className:dn,height:200,itemSize:27.5,itemCount:s.length,itemData:s,itemKey:(e,t)=>t[e].name,style:{overflowX:"hidden"},width:"auto"},(function(e){const{data:t,index:n,style:s}=e,a=t[n],l=a.name===i;return v().createElement(Yt.Z,{button:!0,title:o.__("Create a new branch based on: %1",a.name),className:(0,Ie.classes)(hn,l?pn:null),onClick:()=>{r(a.name)},style:s},v().createElement(Ae.react,{className:un,tag:"span"}),v().createElement("div",{className:mn},v().createElement("p",{className:fn},a.name)))}))),v().createElement(Kt.Z,{className:Cn},v().createElement("input",{className:(0,Ie.classes)(bn,yn),type:"button",title:o.__("Close this dialog without merging a branch"),value:o.__("Cancel"),onClick:()=>{e.onClose()}}),v().createElement("input",{className:(0,Ie.classes)(bn,wn),type:"button",title:o.__("Merge branch"),value:o.__("Merge"),onClick:()=>{e.onClose(i)},disabled:null===i})))}var kn=n(282),En=n(868),Sn=n(20898);const Fn=Sn.ZP.div`
  display: flex;
  flex-direction: column;
  gap: 24px;

  .form-header {
    display: flex;
    flex-direction: column;
    gap: 16px;

    .form-title {
      display: flex;
      align-items: center;
      gap: 9px;
      align-items: center;
      font-size: 20px;
      font-weight: 700;
    }

    .form-description {
      font-size: 13px;
      font-weight: 400;
      color: var(--color-text-secondary);
    }
  }

  .form-body {
    display: flex;
    flex-direction: column;
    gap: 24px;
    font-size: 13px;

    label {
      display: flex;
      flex-direction: column;
      gap: 4px;

      .label-text {
        font-weight: 700;
        color: var(--color-primary);
        display: flex;
        flex-direction: rows;
        align-items: center;
        gap: 4px;
      }

      input {
        padding: 5px 10px;
      }

      /* This Error styling is suitable for individual form controls like input and textarea */
      .form-control__error-message {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 10px;
        font-weight: 400;
        color: var(--color-error);
      }

      &.input-checkbox {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        font-weight: 400;
        color: var(--color-text-secondary);

        input {
          width: 14px;
          height: 14px;
          accent-color: var(--color-primary);
        }
      }
    }

    /* This Error styling is suitable for the entire form, such as submit actions */
    .form-error-message {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      font-weight: 500;
      color: var(--color-error);
      border: 1px solid var(--color-error);
      border-radius: 4px;
      padding: 4px 8px;
      background-color: var(--color-error-light);
    }
  }

  .form-footer {
    display: flex;
    justify-content: flex-end;
    gap: 12px;

    & > button {
      width: 120px;
      height: 36px;
    }
  }
`,Rn=({onSubmit:e,onCancel:t,onUpdateFormData:n,showErrorMessage:i})=>{const[r,s]=v().useState({username:"",password:"",save_credential:!1}),[o,a]=v().useState(""),[l,c]=v().useState(""),d=e=>e&&0!==e.length?(a(""),!0):(a("Required"),!1),h=e=>e&&0!==e.length?(c(""),!0):(c("Required"),!1);return v().useEffect((()=>{n&&n(r)}),[r]),v().createElement(Fn,null,v().createElement("div",{className:"form-header"},v().createElement("div",{className:"form-title"},v().createElement(_t.react,{tag:"span",className:"form-title__icon",elementPosition:"center"}),v().createElement("span",{className:"form-title__text"},"Git credentials required")),v().createElement("div",{className:"form-description"},"Enter credentials for remote repository")),v().createElement("div",{className:"form-body"},v().createElement("label",null,v().createElement("div",{className:"label-text"},"Username"),v().createElement("input",{type:"text",onChange:e=>{return t=e.target.value,s(Object.assign(Object.assign({},r),{username:t})),void d(t);var t}}),o.length>0&&v().createElement("div",{className:"form-control__error-message"},v().createElement(vt.react,{elementPosition:"center",tag:"span"}),o)),v().createElement("label",null,v().createElement("div",{className:"label-text"},"Password or token",v().createElement(En.ZP,{title:"Github must use 'personal access token'",placement:"top-start",className:"tooltip"},v().createElement("span",{className:"tooltip-icon"},v().createElement(yt.react,{elementPosition:"center",tag:"span"})))),v().createElement("input",{type:"password",autoComplete:"new-password",onChange:e=>{return t=e.target.value,s(Object.assign(Object.assign({},r),{password:t})),void h(t);var t}}),l.length>0&&v().createElement("div",{className:"form-control__error-message"},v().createElement(vt.react,{elementPosition:"center",tag:"span"}),l)),v().createElement("label",{className:"input-checkbox"},v().createElement("input",{type:"checkbox",onChange:e=>{return t=e.target.checked,void s(Object.assign(Object.assign({},r),{save_credential:t}));var t}}),"Save Credential Information"),i&&v().createElement("div",{className:"form-error-message"},v().createElement(Ct.react,{elementPosition:"center",tag:"span"}),"Credential information incorrect")),v().createElement("div",{className:"form-footer"},t&&v().createElement(kn.Z,{variant:"outlined",onClick:t,style:{borderColor:"var(--color-primary)",color:"var(--color-primary)",textTransform:"none"}},"Cancel"),v().createElement(kn.Z,{variant:"contained",onClick:()=>{const t=d(r.username),n=h(r.password);t&&n&&e()},style:{backgroundColor:"var(--color-primary)",color:"#fff",textTransform:"none"}},"Login")))};var Dn=n(14456),Nn=n.n(Dn);const Ln=Sn.ZP.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.2);
  display: flex;
  justify-content: center;
  align-items: center;
`,jn=Sn.ZP.div`
  position: fixed;
  top: calc(50% - 140px);
  left: calc(50% - 279px);
  width: 558px;
  padding: 28px 24px;
  border-radius: 8px;
  background-color: #fff;
  box-shadow: 5px 5px 4px 0px #0000001a;
`,Mn=({children:e,onCancel:t})=>v().createElement(Ln,{onClick:()=>{t()}},v().createElement(jn,{onClick:e=>{e.stopPropagation()}},e)),In=({formComponent:e,onSubmit:t})=>new Promise((n=>{const i=document.createElement("div"),r=()=>{Nn().unmountComponentAtNode(i),i.remove()},s=()=>{r(),n({accepted:!1,value:null})},o=v().createElement(Mn,{onCancel:s},e({onSubmit:()=>{const e=t();r(),n({accepted:!0,value:e})},onCancel:s}));document.body.appendChild(i),Nn().render(o,i)}));class Pn extends r.ReactWidget{constructor(){super(),this.formData={username:"",password:"",save_credential:!1},this.setFormData=this.setFormData.bind(this)}setFormData(e){this.formData=e}submitForm(){return this.formData}render(){return v().createElement(Rn,{onSubmit:this.submitForm})}showDialog({showErrorMessage:e}){return In({formComponent:({onSubmit:t,onCancel:n})=>v().createElement(Rn,{onSubmit:t,onCancel:n,onUpdateFormData:this.setFormData,showErrorMessage:e||!1}),onSubmit:()=>this.submitForm()})}}const Bn=Pn,Hn=new class{constructor(){this._signal=new C.Signal(this)}get signal(){return this._signal}log(e){this._signal.emit(e)}},Tn=_.createContext(Hn);var On=n(15503),Vn=n(81719);const An={apiKey:"AIzaSyDHc4Z6q8q685vFobcU8o00bXmHwPWgSoE",authDomain:"link-1271f.firebaseapp.com",projectId:"link-1271f",storageBucket:"link-1271f.appspot.com",messagingSenderId:"520189079247",appId:"1:520189079247:web:89f8dd58ee44057e5111ba",measurementId:"G-PQWQV19ZLY"},zn={apiKey:"AIzaSyDcYiMvoaTeHH0iY-4blzg1DRHq6tn-BAo",authDomain:"link-release.firebaseapp.com",projectId:"link-release",storageBucket:"link-release.appspot.com",messagingSenderId:"629133029936",appId:"1:629133029936:web:fad1d9cfb9ee0a5865f3f5",measurementId:"G-R3VN4GNEX2"},Un=new class{constructor(){this._analytics=null}initialize(e){const t=e?An:zn;if(!this._analytics){const e=(0,On.ZF)(t);this._analytics=(0,Vn.IH)(e)}}sendEvent(e,t){this._analytics&&(0,Vn.Kz)(this._analytics,e,t)}setUserId(e){this._analytics&&(0,Vn.Iv)(this._analytics,e)}setUserProperties(e){this._analytics&&(0,Vn.xP)(this._analytics,e)}};var Gn,Zn,Wn;function $n(e,t){return n=>{const{files:i}=n;return i.length>1?t:e}}function qn(e,t,n){e.forEach((e=>{e===_e.gitFileDiff?t.addItem({command:e,args:{files:n.map((e=>({filePath:e.to,isText:!e.is_binary,status:e.status})))}}):t.addItem({command:e,args:{files:n}})}))}function Xn(e,t,n){let i,r,s;function o(n){const i=n.isVisible,o=n.parentMenu,a=(0,g.toArray)(t.selectedItems()),l=new Set(a.map((t=>{var n;return null===e.pathRepository||null===(n=e.getFile(t.path))||void 0===n?void 0:n.status})).filter((e=>void 0!==e))),c=new Set([].concat(...[...l].map((e=>Wt[e]))).filter((e=>e!==_e.gitFileOpen&&e!==_e.gitFileDelete&&void 0!==e)).map((e=>e===_e.gitFileStage||e===_e.gitFileTrack?_e.gitFileAdd:e))),d=!r||r.length!==c.size||!r.every((e=>c.has(e))),h=a.map((e=>e.path)),p=!s||!g.ArrayExt.shallowEqual(s,h);if(d||p){const t=[...c];n.clearItems(),qn(t,n,h.map((t=>e.getFile(t))).filter((e=>void 0!==e))),i&&o.triggerActiveItem(),r=t,s=h}}function a(t){var n,r;if(i||(i=null!==(r=null===(n=t.menu.items.find((e=>{var t;return"submenu"===e.type&&"jp-contextmenu-git"===(null===(t=e.submenu)||void 0===t?void 0:t.id)})))||void 0===n?void 0:n.submenu)&&void 0!==r?r:null),!i)return;o(i);const s=e.status;e.refreshStatus().then((()=>{e.status!==s&&o(i)})).catch((e=>{console.error("Fail to refresh model when displaying git context menu.",e)}))}if(n.opened)n.opened.connect(a);else{class e extends f.Menu{onBeforeAttach(e){a(n),super.onBeforeAttach(e)}}const t='.jp-DirListing-item[data-isdir="false"]';i=new e({commands:n.menu.commands}),i.title.label="Link Git",i.title.icon=Oe.bindprops({stylesheet:"menuItem"}),n.addItem({type:"submenu",submenu:i,selector:t,rank:5})}}async function Kn(e,t,n,i,r,s=!1){try{let n;switch(t){case Wn.Clone:const{path:t,url:s}=i;n=await e.clone(t,s,r);break;case Wn.Pull:n=await e.pull(r);break;case Wn.Push:n=await e.push(r);break;case Wn.ForcePush:n=await e.push(r,!0);break;default:n={code:-1,message:"Unknown git command"}}return n.message}catch(r){switch(t){case Wn.Clone:r.name="Failed to clone";break;case Wn.Pull:r.name="Failed to pull";break;case Wn.Push:r.name="Failed to push";break;case Wn.ForcePush:r.name="Failed to force push";break;default:r.name="Error"}if(Ce.some((e=>r.message.indexOf(e)>-1))){Hn.log({message:n.__("Git credentials required"),level:fe.ERROR});const r=new Bn,o=await r.showDialog({showErrorMessage:s});if(o.accepted)return await e.updateConfigForSaveCredential(o.value.save_credential),await Kn(e,t,n,i,{username:o.value.username,password:o.value.password},!0)}throw r}}!function(e){e.Build="Build",e.Version="Version"}(Gn||(Gn={})),function(e){e.GitTab="GitTab",e.GitPull="GitPull",e.GitPush="GitPush",e.GitCommit="GitCommit",e.GitDiff="GitDiff",e.GitMerge="GitMerge",e.GitMergeDriverDg="GitMergeDriverDg"}(Zn||(Zn={})),function(e){e.Clone="Clone",e.Pull="Pull",e.Push="Push",e.ForcePush="ForcePush"}(Wn||(Wn={}));var Yn=n(95118),Jn=n(28041),Qn=n(69156),ei=n(63127),ti=n(7842),ni=n(75494),ii=n(99585),ri=n.n(ii),si=n(48715),oi=n.n(si),ai=n(93727),li=n.n(ai),ci=n(57683);class di{constructor(e,t){this._reference=null,this._challenger=null,this._reference=e&&e.cells,this._challenger=t&&t.cells}getDrawNodeDataById(e,t){if("reference"===t){const t=this._reference.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&e===n.id})).map((e=>{const t=e.metadata.canvas;return{id:t.id,name:t.name,headerColor:t.headerColor,comments:t.comments,source:"string"==typeof e.source?e.source:e.source.join("")}}));if(t.length)return t[0]}else if("challenger"===t){const t=this._challenger.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&e===n.id})).map((e=>{const t=e.metadata.canvas;return{id:t.id,name:t.name,headerColor:t.headerColor,comments:t.comments,source:"string"==typeof e.source?e.source:e.source.join("")}}));if(t.length)return t[0]}}getDrawNodeDataByName(e,t){if("reference"===t){const t=this._reference.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&e===n.name})).map((e=>{const t=e.metadata.canvas;return{id:t.id,name:t.name,headerColoe:t.headerColor,comments:t.comments,source:"string"==typeof e.source?e.source:e.source.join("")}}));if(t.length)return t[0]}else if("challenger"===t){const t=this._challenger.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&e===n.name})).map((e=>{const t=e.metadata.canvas;return{id:t.id,name:t.name,headerColoe:t.headerColor,comments:t.comments,source:"string"==typeof e.source?e.source:e.source.join("")}}));if(t.length)return t[0]}}}const hi=e=>{if("added"===e){const e=document.createElement("div");e.className="dag-icon-tooltip dag-add-icon-tooltip";const t=document.importNode((new DOMParser).parseFromString('<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="8.83508" cy="8.83508" r="8.83508" fill="#419640"/>\n        <rect x="5.89014" y="8.24609" width="5.89006" height="1.17801" rx="0.589006" fill="white"/>\n        <rect x="9.42432" y="5.88965" width="5.89006" height="1.17801" rx="0.589006" transform="rotate(90 9.42432 5.88965)" fill="white"/>\n        </svg>',"application/xml").documentElement,!0);return e.append(t),e}if("removed"===e){const e=document.createElement("div");e.className="dag-icon-tooltip dag-remove-icon-tooltip";const t=document.importNode((new DOMParser).parseFromString('<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="8.83508" cy="8.83508" r="8.83508" fill="#F44336"/>\n        <rect x="5.89014" y="8.24609" width="5.89006" height="1.17801" rx="0.589006" fill="white"/>\n        </svg>',"application/xml").documentElement,!0);return e.append(t),e}if("name_edited"===e){const e=document.createElement("div");e.className="dag-icon-tooltip dag-name-edited-icon-tooltip";const t=document.importNode((new DOMParser).parseFromString('\n        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="8.83508" cy="8.83508" r="8.83508" fill="#5587EA"/>\n<g clip-path="url(#clip0_702_831)">\n<path d="M10.25 10.375H8.75C8.5625 10.375 8.375 10.525 8.375 10.75V10.975H7.5125C7.475 10.975 7.4375 10.9375 7.4375 10.9V10H8C8.1875 10 8.375 9.85 8.375 9.625V8.875C8.375 8.65 8.1875 8.5 8 8.5H6.5C6.3125 8.5 6.125 8.65 6.125 8.875V9.625C6.125 9.85 6.3125 10 6.5 10H7.0625V10.9375C7.0625 11.1625 7.2875 11.35 7.5125 11.35H8.375V11.5C8.375 11.725 8.5625 11.875 8.75 11.875H10.25C10.4375 11.875 10.625 11.725 10.625 11.5V10.75C10.625 10.525 10.475 10.375 10.25 10.375Z" fill="white"/>\n<path d="M11.1875 7.5625H10.4375V6.8125C10.4375 6.7 10.3625 6.625 10.25 6.625H9.875C9.7625 6.625 9.6875 6.7 9.6875 6.8125V7.5625H8.9375C8.825 7.5625 8.75 7.6375 8.75 7.75V8.125C8.75 8.2375 8.825 8.3125 8.9375 8.3125H9.6875V9.0625C9.6875 9.175 9.7625 9.25 9.875 9.25H10.25C10.3625 9.25 10.4375 9.175 10.4375 9.0625V8.3125H11.1875C11.3 8.3125 11.375 8.2375 11.375 8.125V7.75C11.375 7.6375 11.3 7.5625 11.1875 7.5625Z" fill="white"/>\n<path d="M10.8123 6.39961L10.7373 7.07461V7.11211C10.7373 7.18711 10.8123 7.22461 10.8873 7.22461L11.5623 7.14961L13.1748 5.53711L12.4248 4.78711L10.8123 6.39961Z" fill="white"/>\n<path d="M13.6627 4.6748L13.3252 4.3373C13.2127 4.2248 13.0252 4.2248 12.9127 4.3373L12.5752 4.6748L13.3252 5.4248L13.6627 5.0873C13.7752 4.9748 13.7752 4.7873 13.6627 4.6748Z" fill="white"/>\n<path d="M11.75 7.375V12.25H5.75V6.25H10.5875L10.625 6.2125L11.3375 5.5H5.75C5.3375 5.5 5 5.8375 5 6.25V12.25C5 12.6625 5.3375 13 5.75 13H11.75C12.1625 13 12.5 12.6625 12.5 12.25V6.625L11.75 7.375Z" fill="white"/>\n</g>\n<defs>\n<clipPath id="clip0_702_831">\n<rect width="9" height="9" fill="white" transform="translate(5 4)"/>\n</clipPath>\n</defs>\n</svg>\n\n                      ',"application/xml").documentElement,!0);return e.append(t),e}if("source_edited"===e){const e=document.createElement("div");e.className="dag-icon-tooltip dag-code-edited-icon-tooltip";const t=document.importNode((new DOMParser).parseFromString('\n        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="8.83508" cy="8.83508" r="8.83508" fill="#5587EA"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.1294 5.5171C10.3962 5.58858 10.5545 5.86274 10.483 6.12948L8.93009 11.925C8.85862 12.1918 8.58445 12.3501 8.31771 12.2786C8.05098 12.2071 7.89269 11.9329 7.96416 11.6662L9.51707 5.87066C9.58855 5.60393 9.86271 5.44563 10.1294 5.5171Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.34087 6.63422C6.54288 6.82249 6.55403 7.13888 6.36576 7.34089L4.70756 9.12016L6.33989 10.6333C6.54241 10.821 6.55439 11.1374 6.36667 11.3399C6.17894 11.5424 5.86258 11.5544 5.66007 11.3667L3.80713 9.64904C3.52307 9.38572 3.50685 8.94178 3.77092 8.65843L5.6342 6.65911C5.82247 6.4571 6.13886 6.44595 6.34087 6.63422Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.6166 11.3208C11.4395 11.1089 11.4676 10.7936 11.6794 10.6164L13.4705 9.11851L11.6525 7.3593C11.454 7.16727 11.4488 6.85073 11.6408 6.65229C11.8329 6.45385 12.1494 6.44865 12.3479 6.64067L14.4054 8.63172C14.7042 8.92081 14.6866 9.40502 14.3677 9.67172L12.3209 11.3835C12.1091 11.5607 11.7938 11.5326 11.6166 11.3208Z" fill="white"/>\n</svg>\n\n                      ',"application/xml").documentElement,!0);return e.append(t),e}},pi=(e,t,n)=>{const i=document.createElement("div");i.className="dag-node";const r=document.createElement("div");if(r.className="dag-label",r.textContent=t.name,i.append(r),"challenger-diagram"===n){if("added"===e||"edited"===e||"source_edited"===e||"name_edited"===e||"removed"===e){const t=document.createElement("div");if(t.className="dag-backpanel",t.append(i),"added"===e)t.style.backgroundColor="var(--dag-added-background)",t.append(hi("added"));else if("removed"===e)t.style.backgroundColor="var(--dag-removed-background)",t.append(hi("removed"));else if("edited"===e){t.style.backgroundColor="var(--dag-edited-background)";const e=hi("name_edited");t.append(e);const n=hi("source_edited");n.style.right="24px",t.append(n)}else"source_edited"===e?(t.style.backgroundColor="var(--dag-edited-background)",t.append(hi("source_edited"))):"name_edited"===e&&(t.style.backgroundColor="var(--dag-edited-background)",t.append(hi("name_edited")));return t}return i.style.backgroundColor="1px solid rgba(93, 107, 247,1)",i.style.border="1px solid rgba(93, 107, 247, 1)",r.style.color="rgba(93, 107, 247, 1)",i}return i},mi=((0,Ie.style)({display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",height:"50vh"}),(0,Ie.style)({width:"100%",height:"100%",backgroundColor:"var(--jp-layout-color1)"})),gi=((0,Ie.style)({display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}),(0,Ie.style)({width:"100%",height:"33px",color:"var(--jp-ui-font-color0)",backgroundColor:"var(--dag-header-background)",border:"1px solid var(--dag-header-border)",lineHeight:"33px",fontWeight:500,zIndex:33333,display:"flex",fontSize:"13px",justifyContent:"space-between"})),ui=(0,Ie.style)({$nest:{".splitter-layout .layout-pane":{position:"relative",overflow:"hidden"},".splitter-layout .layout-splitter":{background:"var(--jp-border-color1)"}}}),fi=(0,Ie.style)({display:"flex",backgroundColor:"var(--tab-background)",$nest:{".tab":{width:"150px",padding:"10px",textAlign:"center",cursor:"pointer",fontWeight:500,fontSize:"13px",color:"var(--jp-ui-font-color0)",borderTop:"1px solid var(--jp-border-color1)",borderRight:"1px solid var(--jp-border-color1)",borderLeft:"1px solid var(--jp-border-color1)"}}}),_i=e=>e?{backgroundColor:"var(--jp-layout-color1)"}:{backgroundColor:"var(--tab-unselected-background)"};var vi=n(8328),Ci=n.n(vi);const bi=(0,Ie.style)({width:"100%",boxSizing:"border-box",color:"var(--jp-ui-font-color1) !important",backgroundColor:"var(--commit-button-background) !important",textAlign:"center",fontSize:"11px",fontWeight:"bold",padding:"8px",boxShadow:"0px 2px 10px rgba(0,0,0, 0.2)"}),yi=(0,Ie.style)({display:"flex",flexDirection:"row"}),wi=(0,Ie.style)({flex:"1 1 50%"}),xi=(0,Ie.style)({fontSize:"13px",fontWeight:"bold",margin:"8px 0px 8px 8px",color:"#1b7dd7"}),ki=e=>{const t={height:"32px",borderRadius:"5px",alignItems:"center",marginBottom:"8px",fontWeight:"bold",marginLeft:"8px",boxSizing:"border-box",display:"inline-block",padding:"0px 12px",lineHeight:"25px"};return"removed"===e?Object.assign(t,{background:"var(--dag-removed-name-background)",color:"#ad2b21",border:"2px solid #ad2b21"}):"added"===e?Object.assign(t,{background:"var(--dag-added-name-background)",color:"#419640",border:"2px solid #419640"}):Object.assign(t,{background:"transparent",color:"#6c79f9",border:"2px solid #6c79f9"})},Ei=e=>{const[t,n]=(0,_.useState)(!1),i=(0,_.useCallback)((()=>{n((e=>!e))}),[]),[r,s]=(0,_.useState)("JupyterLab Dark"===e.theme.theme);return(0,_.useEffect)((()=>{e.theme.themeChanged.connect(((e,t)=>{t&&"JupyterLab Dark"===t.newValue?s(!0):s(!1)}))}),[e.theme]),_.createElement(_.Fragment,null,!e.diff.source.unchanged&&_.createElement(Ci(),{oldValue:e.diff.source.base?e.diff.source.base:"",newValue:e.diff.source.remote?e.diff.source.remote:"",splitView:!0,useDarkTheme:r}),!e.diff.metadata.unchanged&&_.createElement("div",{className:bi,onClick:i},"Metadata has changed"),t&&_.createElement(Ci(),{oldValue:e.diff.metadata.base?e.diff.metadata.base:"",newValue:e.diff.metadata.remote?e.diff.metadata.remote:"",splitView:!0,useDarkTheme:r}))},Si=e=>{const t=(0,_.useCallback)((()=>e.model.cells.filter((e=>!1===e.source.unchanged)).length?e.model.cells.map(((t,n)=>!0===t.source.unchanged?_.createElement(_.Fragment,null):_.createElement("div",{className:(0,Ie.style)({marginTop:"10px"}),key:"aa_"+n},_.createElement("div",{className:yi,key:"container_"+n},_.createElement("div",{className:wi,key:"base_container_"+n},_.createElement("div",{className:xi},"[ln : ",n+1,"]")),_.createElement("div",{className:wi,key:"remote_container_"+n},_.createElement("div",{className:xi},"[ln : ",n+1,"]"))),_.createElement(Ei,{diff:t,theme:e.theme})))):_.createElement("div",{style:{position:"absolute",top:"50%",fontSize:"18px",left:"45%"}}," ",_.createElement("div",null,"No changes"))),[e]);return _.createElement("div",null,_.createElement(_.Fragment,null,t()))},Fi=e=>{const[t,n]=(0,_.useState)([]),[i,r]=(0,_.useState)("JupyterLab Dark"===e.theme.theme);return(0,_.useEffect)((()=>{e.theme.themeChanged.connect(((e,t)=>{t&&"JupyterLab Dark"===t.newValue?r(!0):r(!1)}))}),[e.theme]),(0,_.useEffect)((()=>{console.log(e.selected);const t=t=>!!e.selected.filter((e=>e.includes(t))).length;e.selected.length?n([...e.data.filter((e=>e.reference?!!t(e.reference.data.id.split("/")[0]):e.challenger?!!t(e.challenger.data.id.split("/")[0]):void 0))]):n(e.data),console.log(e.data)}),[e.data,e.selected]),_.createElement("div",null,t.filter((e=>!(e.challenger&&"reference"===e.challenger.data.op))).length>0?t.filter((e=>!(e.challenger&&"reference"===e.challenger.data.op))).map(((e,t)=>_.createElement("div",{className:(0,Ie.style)({padding:"20px 0px"}),key:"aa_"+t},_.createElement("div",{className:yi,key:"container_"+t},_.createElement("div",{className:wi,key:"base_container_"+t},e.reference&&e.reference.data.name.length&&_.createElement("div",{className:(0,Ie.style)(ki(e.reference.data.op)),key:"base_"+t},_.createElement("div",null,e.reference.data.name))),_.createElement("div",{style:{flex:"1 1 50%"},key:"remote_container_"+t},e.challenger&&e.challenger.data.name.length&&"reference"!==e.challenger.data.op&&_.createElement("div",{className:(0,Ie.style)(ki(e.challenger.data.op)),key:"base_"+t},_.createElement("div",null,e.challenger.data.name)))),_.createElement(Ci(),{oldValue:e.reference?e.reference.data.source:"",newValue:e.challenger?e.challenger.data.source:"",splitView:!0,key:"diff_"+t,useDarkTheme:i})))):_.createElement("div",{style:{position:"absolute",top:"50%",fontSize:"18px",left:"45%"}},_.createElement("div",null,"No changes")))};var Ri=n(17812);const Di=e=>{const t=e.size||0,n=e.percentage?"%":"px";let i="layout-pane";const r={};return e.primary?i+=" layout-pane-primary":e.vertical?r.height=`${t}${n}`:r.width=`${t}${n}`,v().createElement("div",{className:i,style:r},e.children)};function Ni(){if(document.body.createTextRange){const e=document.body.createTextRange();e.collapse(),e.select()}else window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}class Li extends v().Component{constructor(e){super(e),this.handleResize=this.handleResize.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleSplitterMouseDown=this.handleSplitterMouseDown.bind(this),this.state={secondaryPaneSize:0,resizing:!1}}componentDidMount(){let e;if(window.addEventListener("resize",this.handleResize),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchend",this.handleMouseUp),document.addEventListener("touchmove",this.handleTouchMove),void 0!==this.props.secondaryInitialSize)e=this.props.secondaryInitialSize;else{const t=this.container.getBoundingClientRect();let n;n=this.splitter?this.splitter.getBoundingClientRect():{width:4,height:4},e=this.getSecondaryPaneSize(t,n,{left:t.left+(t.width-n.width)/2,top:t.top+(t.height-n.height)/2},!1)}this.setState({secondaryPaneSize:e})}componentDidUpdate(e,t){t.secondaryPaneSize!==this.state.secondaryPaneSize&&this.props.onSecondaryPaneSizeChange&&this.props.onSecondaryPaneSizeChange(this.state.secondaryPaneSize),t.resizing!==this.state.resizing&&(this.state.resizing?this.props.onDragStart&&this.props.onDragStart():this.props.onDragEnd&&this.props.onDragEnd())}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchend",this.handleMouseUp),document.removeEventListener("touchmove",this.handleTouchMove)}getSecondaryPaneSize(e,t,n,i){let r,s,o,a;this.props.vertical?(r=e.height,s=t.height,o=n.top-e.top):(r=e.width,s=t.width,o=n.left-e.left),i&&(o-=s/2),o<0?o=0:o>r-s&&(o=r-s),a=1===this.props.primaryIndex?o:r-s-o;let l=r-s-a;return this.props.percentage&&(a=100*a/r,l=100*l/r,s=100*s/r,r=100),l<this.props.primaryMinSize?a=Math.max(a-(this.props.primaryMinSize-l),0):a<this.props.secondaryMinSize&&(a=Math.min(r-s-this.props.primaryMinSize,this.props.secondaryMinSize)),a}handleResize(){if(this.splitter&&!this.props.percentage){const e=this.container.getBoundingClientRect(),t=this.splitter.getBoundingClientRect(),n=this.getSecondaryPaneSize(e,t,{left:t.left,top:t.top},!1);this.setState({secondaryPaneSize:n})}}handleMouseMove(e){if(this.state.resizing){const t=this.container.getBoundingClientRect(),n=this.splitter.getBoundingClientRect(),i=this.getSecondaryPaneSize(t,n,{left:e.clientX,top:e.clientY},!0);Ni(),this.setState({secondaryPaneSize:i})}}handleTouchMove(e){this.handleMouseMove(e.changedTouches[0])}handleSplitterMouseDown(){Ni(),this.setState({resizing:!0})}handleMouseUp(){this.setState((e=>e.resizing?{resizing:!1}:null))}render(){let e="splitter-layout";this.props.customClassName&&(e+=` ${this.props.customClassName}`),this.props.vertical&&(e+=" splitter-layout-vertical"),this.state.resizing&&(e+=" layout-changing");const t=v().Children.toArray(this.props.children).slice(0,2);0===t.length&&t.push(v().createElement("div",null));const n=[],i=0!==this.props.primaryIndex&&1!==this.props.primaryIndex?0:this.props.primaryIndex;for(let e=0;e<t.length;++e){let r=!0,s=null;t.length>1&&e!==i&&(r=!1,s=this.state.secondaryPaneSize),n.push(v().createElement(Di,{vertical:this.props.vertical,percentage:this.props.percentage,primary:r,size:s},t[e]))}return v().createElement("div",{className:e,ref:e=>{this.container=e}},n[0],n.length>1&&v().createElement("div",{role:"separator",className:"layout-splitter",ref:e=>{this.splitter=e},onMouseDown:this.handleSplitterMouseDown,onTouchStart:this.handleSplitterMouseDown}),n.length>1&&n[1])}}const ji=Li;var Mi=n(76393);const Ii=(0,Mi.withStyles)({tooltipPlacementBottom:{margin:"-3px 0"},tooltip:{borderRadius:"4px",color:"#6C79F9",fontWeight:700,fontSize:"10px",background:"#f3f4fe"}})(Mi.Tooltip),Pi=e=>{const[t,n]=(0,_.useState)();return(0,_.useEffect)((()=>{console.log(e.data);const t=e.data.reduce(((e,t)=>(e.total+=1,t?"added"===t.data.op?e.added+=1:"edited"!==t.data.op&&"name_edited"!==t.data.op&&"source_edited"!==t.data.op||(e.edited+=1):e.removed+=1,e)),{total:0,added:0,removed:0,edited:0});n(t)}),[e.data]),_.createElement("div",{style:{position:"absolute",top:"0px",right:"4px",display:"flex",flexDirection:"row",padding:"5px",gap:"12px",zIndex:9999999}},_.createElement("div",{style:{display:"flex",flexDirection:"row",gap:"5px"}},_.createElement(Ii,{title:"Added Components"},_.createElement("div",{style:{display:"flex",justifyContent:"center"}},_.createElement(lt.react,{elementPosition:"center",tag:"div"}))),_.createElement("div",null,null==t?void 0:t.added," added")),_.createElement("div",{style:{display:"flex",flexDirection:"row",gap:"5px"}},_.createElement(Ii,{title:"Changed Codes"},_.createElement("div",{style:{display:"flex",justifyContent:"center"}},_.createElement(dt.react,{elementPosition:"center",tag:"div"}))),_.createElement(Ii,{title:"Changed Components"},_.createElement("div",{style:{display:"flex",justifyContent:"center"}},_.createElement(ht.react,{elementPosition:"center",tag:"div"}))),_.createElement("div",null,null==t?void 0:t.edited," changed")),_.createElement("div",{style:{display:"flex",flexDirection:"row",gap:"5px"}},_.createElement(Ii,{title:"Removed Components"},_.createElement("div",{style:{display:"flex",justifyContent:"center"}},_.createElement(ct.react,{elementPosition:"center",tag:"div"}))),_.createElement("div",null,null==t?void 0:t.removed," removed")))};ri().use(oi()),ri().use(li());const Bi={name:"dagre",rankDir:"TB",fit:!0,padding:50,rankSep:50,nodeSep:50};var Hi;!function(e){e.REFERENCE="reference",e.CHALLENGER="challenger"}(Hi||(Hi={}));const Ti=e=>{var t,n,i,r;const[s,o]=(0,_.useState)(Oi.DAG),a=(0,_.useRef)(),l=(0,_.useRef)(),c=(0,_.useRef)(),d=(0,_.useRef)(),h=s===Oi.ENTIRE,[p,m]=(0,_.useState)(!1),[g,u]=(0,_.useState)([]),f=(0,_.useRef)(),v=e=>{const t=e.target;t===c.current?w(Hi.REFERENCE):t===d.current&&w(Hi.CHALLENGER)},C=e=>{h||"reference"===e.target.data().op?h&&u([]):(e.target.data().dom.querySelector(".dag-node")?e.target.data().dom.querySelector(".dag-node").style.border="5px solid rgb(85, 135, 234)":e.target.data().dom.style.border="1px solid red",u((t=>[...t,e.target.id()])))},b=e=>{e.target.data().dom.querySelector(".dag-node")?e.target.data().dom.querySelector(".dag-node").style.border="reference"===e.target.data().op?"1px solid rgba(93, 107, 247, 0.5)":"1px solid #6C79F9":e.target.data().dom.style.border="reference"===e.target.data().op?"1px solid rgba(93, 107, 247, 0.5)":"1px solid #6C79F9",u((t=>t.filter((t=>t!==e.target.data().id))))};null===(t=d.current)||void 0===t||t.removeListener("select","node"),null===(n=d.current)||void 0===n||n.removeListener("unselect","node"),null===(i=d.current)||void 0===i||i.on("select","node",C),null===(r=d.current)||void 0===r||r.on("unselect","node",b),(0,_.useEffect)((()=>{setTimeout((()=>{const t=ri()({container:a.current,userZoomingEnabled:!0,userPanningEnabled:!0,boxSelectionEnabled:!1,wheelSensitivity:.3,style:[{selector:"node",style:{"background-opacity":0}},{selector:"edge",style:{width:1,"target-arrow-shape":"triangle","line-color":"#9dbaea","target-arrow-color":"#9dbaea","curve-style":"straight"}}],elements:e.diff.reference});t.domNode();const n=ri()({container:l.current,wheelSensitivity:.3,maxZoom:3,minZoom:.3,style:[{selector:"node:active",style:{"overlay-color":"white"}},{selector:"node",style:{"background-opacity":0}},{selector:"edge",style:{width:1,"target-arrow-shape":"triangle","line-color":e=>"added"===e.data("op")?"#96EDA9":"removed"===e.data("op")?"#ED9696":"#9dbaea","target-arrow-color":e=>"added"===e.data("op")?"#96EDA9":"removed"===e.data("op")?"#ED9696":"#9dbaea","curve-style":"straight","line-style":e=>"removed"===e.data("op")?"dashed":"solid","line-dash-pattern":[5,3]}}],elements:e.diff.challenger});n.domNode(),n.width()>0&&n&&(n.layout(Bi).run(),n.resize()),t.width()>0&&t&&(t.layout(Bi).run(),t.resize());const i=new ResizeObserver(y);i.observe(a.current),i.observe(l.current),f.current=i,n.on("select","node",C),n.on("unselect","node",b),t.on("dblclick",v),n.on("dblclick",v),c.current=t,d.current=n,t.autoungrabify(!0),n.autoungrabify(!0),m(!0)}),0)}),[a,l]);const y=(0,_.useCallback)((()=>{var e,t,n,i,r,s;((null===(e=d.current)||void 0===e?void 0:e.width())>0&&d.current||p)&&(null===(t=d.current)||void 0===t||t.layout(Bi).run(),null===(n=d.current)||void 0===n||n.resize()),((null===(i=c.current)||void 0===i?void 0:i.width())>0&&c.current||p)&&(null===(r=c.current)||void 0===r||r.layout(Bi).run(),null===(s=c.current)||void 0===s||s.resize())}),[c,d,p]);(0,_.useEffect)((()=>{var e;null===(e=f.current)||void 0===e||e.disconnect();const t=new ResizeObserver(y);t.observe(a.current),t.observe(l.current),f.current=t}),[p,f]);const w=(0,_.useCallback)((e=>{var t,n;e===Hi.REFERENCE?null===(t=c.current)||void 0===t||t.layout(Bi).run():e===Hi.CHALLENGER&&(null===(n=d.current)||void 0===n||n.layout(Bi).run())}),[c,d]),x=(0,_.useCallback)((e=>{var t,n,i,r,s,o;const a={x:(null===(t=d.current)||void 0===t?void 0:t.width())/2,y:(null===(n=d.current)||void 0===n?void 0:n.height())/2};e===Hi.REFERENCE?null===(i=c.current)||void 0===i||i.zoom({level:(null===(r=c.current)||void 0===r?void 0:r.zoom())+.1,renderedPosition:a}):e===Hi.CHALLENGER&&(null===(s=d.current)||void 0===s||s.zoom({level:(null===(o=d.current)||void 0===o?void 0:o.zoom())+.1,renderedPosition:a}))}),[c,d]),k=(0,_.useCallback)((e=>{var t,n,i,r,s,o;const a={x:(null===(t=d.current)||void 0===t?void 0:t.width())/2,y:(null===(n=d.current)||void 0===n?void 0:n.height())/2};e===Hi.REFERENCE?null===(i=c.current)||void 0===i||i.zoom({level:(null===(r=c.current)||void 0===r?void 0:r.zoom())-.1,renderedPosition:a}):e===Hi.CHALLENGER&&(null===(s=d.current)||void 0===s||s.zoom({level:(null===(o=d.current)||void 0===o?void 0:o.zoom())-.1,renderedPosition:a}))}),[c,d]);return(0,_.useEffect)((()=>{Un.sendEvent(Zn.GitDiff)}),[]),_.createElement(_.Fragment,null,_.createElement("div",{style:{width:"100%",height:"87vh"},className:(0,Ie.classes)("diff-widget",ui)},_.createElement(ji,{vertical:!0},_.createElement(ji,{vertical:!1,percentage:!0,primaryMinSize:25,secondaryMinSize:25},_.createElement("div",{style:{height:"100%"}},_.createElement("div",{className:(0,Ie.classes)(gi)},_.createElement("div",{style:{paddingLeft:8}},"Head Status"),e.diff.reference.nodes.length>0&&_.createElement("div",null,_.createElement(Ii,{title:"Zoom In"},_.createElement(Ri.Z,{onClick:()=>x(Hi.REFERENCE)},_.createElement(ot.react,{elementPosition:"center",tag:"div",width:13,height:13,cursor:"pointer"}))),_.createElement(Ii,{title:"Zoom Out"},_.createElement(Ri.Z,{onClick:()=>k(Hi.REFERENCE)},_.createElement(at.react,{elementPosition:"center",tag:"div",width:13,height:13,cursor:"pointer"}))),_.createElement(Ii,{title:"Auto Fit"},_.createElement(Ri.Z,{onClick:()=>w(Hi.REFERENCE)},_.createElement(st.react,{elementPosition:"center",tag:"div",width:13,height:13,cursor:"pointer"}))))),_.createElement("div",{ref:a,className:(0,Ie.classes)(mi),style:{height:"calc(100% - 33px)"}})),_.createElement("div",{style:{height:"100%"}},_.createElement("div",{className:(0,Ie.classes)(gi)},_.createElement("div",{style:{paddingLeft:8}},"Current Status"),e.diff.challenger.nodes.length>0&&_.createElement("div",null,_.createElement(Ii,{title:"Zoom In"},_.createElement(Ri.Z,{onClick:()=>x(Hi.CHALLENGER),disabled:!(e.diff.challenger.nodes.length>0)},_.createElement(ot.react,{elementPosition:"center",tag:"div",width:13,height:13,cursor:"pointer"}))),_.createElement(Ii,{title:"Zoom Out"},_.createElement(Ri.Z,{onClick:()=>k(Hi.CHALLENGER),disabled:!(e.diff.challenger.nodes.length>0)},_.createElement(at.react,{elementPosition:"center",tag:"div",width:13,height:13,cursor:"pointer"}))),_.createElement(Ii,{title:"Auto Fit"},_.createElement(Ri.Z,{onClick:()=>w(Hi.CHALLENGER)},_.createElement(st.react,{elementPosition:"center",tag:"div",width:13,height:13,cursor:"pointer"}))))),_.createElement("div",{ref:l,className:(0,Ie.classes)(mi),style:{height:"calc(100% - 33px)"}},e.diff.challenger.nodes.length>0&&_.createElement(Pi,{data:e.data.map((e=>e.challenger))})))),_.createElement(ji,null,_.createElement("div",{style:{height:"100%",overflow:"auto"}},_.createElement("div",{className:(0,Ie.classes)(fi)},_.createElement("div",{className:`tab ${(0,Ie.style)(_i(s===Oi.DAG))}`,onClick:()=>o(Oi.DAG)}," ","Pipeline Changes"),_.createElement("div",{className:`tab ${(0,Ie.style)(_i(s===Oi.ENTIRE))}`,onClick:()=>o(Oi.ENTIRE)}," ","Notebook Changes")),s===Oi.ENTIRE&&_.createElement(Si,{model:e.model,theme:e.theme}),s===Oi.DAG&&_.createElement(Fi,{data:e.data,selected:g,theme:e.theme}))))))};var Oi;ri().use(oi()),ri().use(li()),function(e){e.ENTIRE="entire",e.DAG="dag"}(Oi||(Oi={}));class Vi extends r.ReactWidget{constructor(e,t,n,i){super(),this._eventBus=n,this._model=e,this._diff=t,this._theme=i,console.log(" DIFF : ",this._diff),console.log("MRXNotebookWidget model :  ",this._model),console.log("THIS : ",this),this.addClass("remove-padding");const r=[];this._diff.challenger.nodes.forEach(((e,t)=>{if("edited"===e.data.op){const t=this._diff.reference.nodes.filter((t=>t.data.id.split("/")[0]===e.data.id.split("/")[0]));r.push({reference:t[0],challenger:e})}else if("removed"===e.data.op)r.push({reference:e,challenger:void 0});else if("added"===e.data.op)r.push({reference:void 0,challenger:e});else if("reference"===e.data.op){const t=this._diff.reference.nodes.filter((t=>t.data.id.split("/")[0]===e.data.id.split("/")[0]));r.push({reference:t[0],challenger:e})}})),this._data=r}render(){return _.createElement(_.Fragment,null,_.createElement(Ti,{model:this._model,data:this._data,eventBus:this._eventBus,diff:this._diff,theme:this._theme}))}init(){console.log("init")}get model(){return this._model}}var Ai=n(65987),zi=n.n(Ai);ri().use(oi()),ri().use(li());const Ui=new(zi()),Gi="jp-mod-hideUnchanged";class Zi extends f.Panel{constructor(e,t,n,i){super(),this._areUnchangedCellsHidden=!1,this._lastSerializeModel=null;const r=new u.PromiseDelegate;this._theme=n,this._isReady=r.promise,this._model=e,this._renderMime=t,this._trans=null!=i?i:h.nullTranslator.load("mrx_link_git"),this.addClass("nbdime-Widget"),this.refresh().then((()=>{r.resolve()})).catch((e=>{console.error(this._trans.__("Failed to refresh Notebook diff."),e,null==e?void 0:e.traceback)}))}get areUnchangedCellsHidden(){return this._areUnchangedCellsHidden}set areUnchangedCellsHidden(e){this._areUnchangedCellsHidden!==e&&(Wi.toggleShowUnchanged(this._scroller,this._hasConflict,this._areUnchangedCellsHidden),this._areUnchangedCellsHidden=e)}get _hasConflict(){return this._model.hasConflict}get nbdimeWidget(){return this._nbdWidget}get ready(){return this._isReady}get isFileResolved(){const e=this.nbdimeWidget;this._lastSerializeModel=e.model.serialize();const t=e.validateMerged(this._lastSerializeModel);return JSON.stringify(this._lastSerializeModel)===JSON.stringify(t)}async getResolvedFile(){var e;return Promise.resolve({format:"json",type:"notebook",content:null!==(e=this._lastSerializeModel)&&void 0!==e?e:this.nbdimeWidget.model.serialize()})}async refresh(){var e,t;if(!(null===(e=this._scroller)||void 0===e?void 0:e.parent)){for(;this.widgets.length>0;)this.widgets[0].dispose();this._scroller=new f.Panel,this._hasConflict||this._scroller.addClass("remove-padding"),this._scroller.node.tabIndex=-1,this.addWidget(this._scroller)}try{const e=await this._model.reference.content(),n=await this._model.challenger.content(),i=await(null===(t=this._model.base)||void 0===t?void 0:t.content()),r=i?this.createMergeView.bind(this):this.createDiffView.bind(this);for(this._nbdWidget=await r(n,e,this._theme,i,this._model.filename);this._scroller.widgets.length>0;)this._scroller.widgets[0].dispose();if(!this._model.hasConflict){this._scroller.addWidget(this._nbdWidget);try{await this._nbdWidget.init(),Wi.markUnchangedRanges(this._scroller.node,this._hasConflict)}catch(e){console.debug(this._trans.__("Failed to init notebook diff view: %1",e)),Wi.markUnchangedRanges(this._scroller.node,this._hasConflict)}}}catch(e){this.showError(e)}}async createDiffView(e,t,n){const i=await be("diffnotebook","POST",{currentContent:e,previousContent:t});console.log("createDiffView Data : ",i);const r=await(async(e,t)=>{const n=t.length?JSON.parse(t):null,i="string"==typeof e?JSON.parse(e):e,r=new di(n,i),s={reference:{nodes:[],edges:[]},challenger:{nodes:[],edges:[]}};if(n&&i){const e=new ci.JsonDiffer;console.log("REFERENCE : ",n),console.log("CHALLENGER : ",i);const t=n.cells.filter((e=>{const t=e.metadata.canvas;return t&&t.isComponent})).reduce(((e,t)=>{const n=t.metadata.canvas;return e[n.id]||(e[n.id]={source:"string"==typeof t.source?t.source:t.source.join(""),name:n.name}),e}),{}),o=i.cells.filter((e=>{const t=e.metadata.canvas;return t&&t.isComponent})).reduce(((e,t)=>{const n=t.metadata.canvas;return e[n.id]||(e[n.id]={source:"string"==typeof t.source?t.source:t.source.join(""),name:n.name}),e}),{}),a=e.getDiff(t,o);console.log("DIFF COMPARE RESULT : ",a),s.reference.nodes=n.cells.filter((e=>{const t=e.metadata.canvas;return t&&t.isComponent})).map((e=>{const t=e.metadata.canvas;return{data:{id:t.id+"/reference",name:t.name,op:"reference",dom:pi("reference",r.getDrawNodeDataById(t.id,"reference"),"reference-diagram"),source:"string"==typeof e.source?e.source:e.source.join("")}}})),s.reference.edges=n.cells.filter((e=>{const t=e.metadata.canvas;return t&&t.isComponent})).map((e=>{const t=e.metadata.canvas;return t.parents.map((e=>({data:{target:t.id+"/reference",op:"reference",source:e.id+"/reference"}})))})).flat();const l=[...new Set(a.edited.map((e=>Object.keys(e).join("").split("/")[0])))],c=[...new Set(Object.keys(a.new).map((e=>e.split("/")[0])))],d=[...new Set(Object.keys(a.removed).map((e=>e.split("/")[0])))];console.log(l,c,d),s.challenger.nodes=s.reference.nodes.map((e=>{if(l.includes(e.data.id.split("/")[0])){let t=null;const n=r.getDrawNodeDataById(e.data.id.split("/")[0],"reference"),s=r.getDrawNodeDataById(e.data.id.split("/")[0],"challenger");return n.name===s.name?n.source!==s.source&&(t="source_edited"):t=n.source===s.source?"name_edited":"edited",{data:{id:e.data.id.split("/")[0]+"/challenger",op:"edited",dom:pi(t,r.getDrawNodeDataById(e.data.id.split("/")[0],"challenger"),"challenger-diagram"),name:i.cells.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&n.id===e.data.id.split("/")[0]})).map((e=>e.metadata.canvas.name)).toString(),source:i.cells.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&n.id===e.data.id.split("/")[0]})).map((e=>"string"==typeof e.source?e.source:e.source.join(""))).toString()}}}return d.includes(e.data.id.split("/")[0])?{data:{id:e.data.id.split("/")[0]+"/challenger",op:"removed",name:n.cells.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&n.id===e.data.id.split("/")[0]})).map((e=>e.metadata.canvas.name)).toString(),dom:pi("removed",r.getDrawNodeDataById(e.data.id.split("/")[0],"reference"),"challenger-diagram"),source:i.cells.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&n.id===e.data.id.split("/")[0]})).map((e=>"string"==typeof e.source?e.source:e.source.join(""))).toString()}}:{data:{id:e.data.id.split("/")[0]+"/challenger",op:"reference",dom:pi("reference",r.getDrawNodeDataById(e.data.id.split("/")[0],"challenger"),"challenger-diagram"),name:i.cells.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&n.id===e.data.id.split("/")[0]})).map((e=>e.metadata.canvas.name)).toString(),source:i.cells.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&n.id===e.data.id.split("/")[0]})).map((e=>"string"==typeof e.source?e.source:e.source.join(""))).toString()}}})),l.length||c.length||d.length?(c.forEach((e=>{s.challenger.nodes.push({data:{id:e+"/challenger",op:"added",dom:pi("added",r.getDrawNodeDataById(e,"challenger"),"challenger-diagram"),name:i.cells.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&n.id===e})).map((e=>e.metadata.canvas.name)).toString(),source:i.cells.filter((t=>{const n=t.metadata.canvas;return n&&n.isComponent&&n.id===e})).map((e=>"string"==typeof e.source?e.source:e.source.join(""))).toString()}})})),s.challenger.edges=s.reference.edges.map((e=>d.includes(e.data.source.split("/")[0])||d.includes(e.data.target.split("/")[0])?{data:{source:e.data.source.split("/")[0]+"/challenger",target:e.data.target.split("/")[0]+"/challenger",op:"removed"}}:{data:{source:e.data.source.split("/")[0]+"/challenger",target:e.data.target.split("/")[0]+"/challenger",op:"reference"}})),s.challenger.edges.push(...i.cells.filter((e=>{const t=e.metadata.canvas;return c.includes(t.id)})).map((e=>{const t=e.metadata.canvas;return t.parents.map((e=>({data:{target:t.id+"/challenger",source:e.id+"/challenger",op:"added"}})))})).flat())):s.challenger.edges=i.cells.filter((e=>{const t=e.metadata.canvas;return t&&t.isComponent})).map((e=>{const t=e.metadata.canvas;return t.parents.map((e=>({data:{target:t.id+"/challenger",op:"reference",source:e.id+"/challenger"}})))})).flat()}return!n&&i&&(s.challenger.nodes=i.cells.filter((e=>{const t=e.metadata.canvas;return t&&t.isComponent})).map((e=>{const t=e.metadata.canvas;return{data:{id:t.id+"/challenger",op:"added",name:t.name,dom:pi("added",r.getDrawNodeDataById(t.id,"challenger"),"challenger-diagram"),source:"string"==typeof e.source?e.source:e.source.join("")}}})),s.challenger.edges=i.cells.filter((e=>{const t=e.metadata.canvas;return t&&t.isComponent})).map((e=>{const t=e.metadata.canvas;return t.parents.map((e=>({data:{target:t.id+"/challenger",op:"added",source:e.id+"/challenger"}})))})).flat()),n&&!i&&(s.reference.nodes=n.cells.filter((e=>{const t=e.metadata.canvas;return t&&t.isComponent})).map((e=>{const t=e.metadata.canvas;return{data:{id:t.id+"/reference",op:"reference",name:t.name,dom:pi("reference",r.getDrawNodeDataById(t.id,"reference"),"reference-diagram"),source:"string"==typeof e.source?e.source:e.source.join("")}}})),s.reference.edges=n.cells.filter((e=>{const t=e.metadata.canvas;return t&&t.isComponent})).map((e=>{const t=e.metadata.canvas;return t.parents.map((e=>({data:{target:t.id+"/reference",op:"reference",source:e.id+"/reference"}})))})).flat()),s})(e,t),s=new ei.NotebookDiffModel(i.base,i.diff);return new Vi(s,r,Ui,n)}async createMergeView(e,t,n,i,r){const s=await be("diffnotebook","POST",{currentContent:e,previousContent:t,baseContent:i,filePath:r}),o=new Yn.NotebookMergeModel(s.base,s.merge_decisions);return console.log("MERGE MODEL : ",o),console.log("FILE PATH : ",r),new Jn.NotebookMergeWidget(o,this._renderMime)}onActivateRequest(e){var t;(null===(t=this._scroller)||void 0===t?void 0:t.parent)&&this._scroller.node.focus()}showError(e){var t;for(console.error(this._trans.__("Failed to load file diff."),e,null===(t=e)||void 0===t?void 0:t.traceback);this.widgets.length>0;)this.widgets[0].dispose();const n=(e.message||e).replace("\n","<br />");this.node.innerHTML=`<p class="jp-git-diff-error">\n      <span>${this._trans.__("Error Loading Notebook Diff:")}</span>\n      <span class="jp-git-diff-error-message">${n}</span>\n    </p>`}}var Wi;!function(e){function t(e){if(!e.parentElement||!e.parentElement.parentElement)return e;const t=e.parentElement.parentElement;return t.classList.contains(ni.CHUNK_PANEL_CLASS)?t:e}function n(e,n){var i;const r=n?Jn.CELLMERGE_CLASS:ti.CELLDIFF_CLASS,s=n?Qn.UNCHANGED_MERGE_CLASS:ni.UNCHANGED_DIFF_CLASS,o=n?".jp-Notebook-merge":".jp-Notebook-diff",a=e.querySelectorAll(`.${r}`);let l=-1;for(let e=0;e<a.length;++e){const n=a[e];if(n.classList.contains(s))-1===l&&(l=e);else if(-1!==l){const i=e-l;t(n).setAttribute("data-nbdime-NCellsHiddenBefore",i.toString()),l=-1}}if(-1!==l){const n=a.length-l;if(0===l)return void(null!==(i=e.querySelector(o))&&void 0!==i?i:e).setAttribute("data-nbdime-AllCellsHidden",n.toString());t(a[l-1]).setAttribute("data-nbdime-NCellsHiddenAfter",n.toString())}}e.diffHeader=function(e,t,n,i){const r=n?"jp-git-merge-banner":"jp-git-diff-banner",s=document.createElement("div");return s.className="jp-git-diff-header",s.innerHTML=`<div class="${r}">\n        <span>${e}</span>\n        <span class="jp-spacer"></span>\n        ${n?`<span>${i}</span><span class="jp-spacer"></span>`:""}\n        <span>${t}</span>\n      </div>`,new f.Widget({node:s})},e.toggleShowUnchanged=function(e,t,i){const r=e.hasClass(Gi);if(void 0===i)i=r;else if(r!==i)return;i?e.removeClass(Gi):(n(e.node,t),e.addClass(Gi)),console.log("META ELEMENT : ",e),console.log(e.node.querySelectorAll(".jp-Cellrow-metadata")),e.update()},e.markUnchangedRanges=n}(Wi||(Wi={}));const $i=(0,Ie.keyframes)({to:{fillOpacity:1}}),qi=(0,Ie.style)({$nest:{"& .jp-icon3":{animationName:$i,animationDuration:"1s"}}}),Xi=(0,Ie.keyframes)({"0%":{fillOpacity:1},"50%":{fillOpacity:.6},"100%":{fillOpacity:1}}),Ki=(0,Ie.style)({$nest:{"& .jp-icon3":{animationName:Xi,animationDuration:"2s",animationIterationCount:"infinite"}}});class Yi extends r.ReactWidget{constructor(e){super(),this._locked=!1,this._status="",this._trans=e}set status(e){this._status=e,this._locked||this._animate()}render(){return v().createElement("div",{title:`Git: ${this._trans.__(this._status)}`},v().createElement(Oe.react,{className:"idle"!==this._status?Ki:qi,left:"1px",top:"3px",stylesheet:"statusBar"}))}async _animate(){this._locked=!0,this.update(),await(500,new Promise((e=>setTimeout(e,500)))),this._locked=!1,this.update()}}var Ji;!function(e){e.createEventCallback=function(e){return function(t,n){let i;switch(n){case"empty":i="idle";break;case"link-git:checkout":i="checking out…";break;case"link-git:clone":i="cloning repository…";break;case"link-git:commit:create":i="committing changes…";break;case"link-git:commit:revert":i="reverting changes…";break;case"link-git:init":i="initializing repository…";break;case"link-git:merge":i="merging…";break;case"link-git:pull":i="pulling changes…";break;case"link-git:pushing":i="pushing changes…";break;case"link-git:refresh":i="refreshing…";break;case"link-git:reset:changes":i="resetting changes…";break;case"link-git:reset:hard":i="discarding changes…";break;default:i=/link-git:add:files/.test(n)?"adding files…":"working…"}e.status=i}},e.isStatusWidgetActive=function(e){return e?function(){return e.composite.displayStatus}:function(){return!1}}}(Ji||(Ji={}));const Qi="1.0.1";function er(e,t,n){t.toolbar.addItem("gitClone",r.ReactWidget.create(_.createElement(r.UseSignal,{signal:e.repositoryChanged,initialArgs:{name:"pathRepository",oldValue:null,newValue:e.pathRepository}},((e,t)=>_.createElement(r.ToolbarButtonComponent,{enabled:null===t.newValue,icon:ze,onClick:()=>{n.execute(ve.gitClone)},tooltip:"Git Clone"})))))}var tr=n(26975),nr=n(76234),ir=n(82285),rr=n(5917),sr=n(20433);const or=Sn.ZP.div`
  display: flex;
  flex-direction: column;
  gap: 16px;

  .header {
    display: flex;
    flex-direction: row;
    gap: 8px;

    .title {
      display: flex;
      align-items: center;
      gap: 9px;
      align-items: center;
      font-size: 20px;
      font-weight: 700;
    }
  }

  .body {
    .description {
      font-size: 13px;
      font-weight: 400;
      color: var(--color-text-secondary);
    }
  }

  .footer {
    display: flex;
    justify-content: flex-end;

    button {
      width: 120px;
      height: 36px;
    }
  }
`,ar=({title:e,description:t})=>{const[n,i]=v().useState(!0);return n?v().createElement(Ln,null,v().createElement(jn,null,v().createElement(or,null,v().createElement("div",{className:"header"},v().createElement(bt.react,{tag:"span",className:"icon",elementPosition:"center"}),v().createElement("div",{className:"title"},e)),v().createElement("div",{className:"body"},v().createElement("div",{className:"description"},t)),v().createElement("div",{className:"footer"},v().createElement(kn.Z,{variant:"outlined",color:"primary",onClick:()=>{i(!1)},style:{textTransform:"none"}},"Close"))))):null};function lr(e){return _.createElement(ir.Z,Object.assign({},e,{direction:"up"}))}class cr extends _.Component{constructor(e){super(e),this._onClick=e=>{this.props.onClick?this.props.onClick(e):this._onClose(e,"click")},this._onClose=(e,t)=>{"clickaway"!==t&&this.props.onClose(e)}}render(){var e,t;let n=null;const i=this.props.severity||"info";let s;return"success"===i&&(n=this.props.duration||5e3),this.props.error?_.createElement(nr.Z,null,_.createElement(ar,{title:(null===(e=this.props.error)||void 0===e?void 0:e.name)||"Error",description:(null===(t=this.props.error)||void 0===t?void 0:t.message)||"Unknown error"})):(this.props.details&&(s=_.createElement(Mi.Button,{color:"inherit",size:"small",onClick:()=>{(0,r.showDialog)({title:this.props.trans.__("Detailed message"),body:this.props.details,buttons:[r.Dialog.okButton({label:this.props.trans.__("Dismiss")})]})}},this.props.trans.__("Details"))),_.createElement(nr.Z,null,_.createElement(rr.Z,{key:"link-git:alert",open:this.props.open,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:n,TransitionComponent:lr,onClick:this._onClick,onClose:this._onClose},_.createElement(sr.Z,{action:s,variant:"filled",severity:i},this.props.message||this.props.trans.__("(missing message)")))))}}var dr=n(43733),hr=n(95477);const pr=(0,Ie.style)({position:"absolute",top:"50%",left:"50%",color:"var(--jp-ui-inverse-font-color0)",textAlign:"center"});class mr extends _.Component{constructor(e){super(e),this._onClick=e=>{this.props.onClick&&this.props.onClick(e)}}render(){return _.createElement(dr.Z,{disableAutoFocus:!0,disableEnforceFocus:!0,open:this.props.open,onClick:this._onClick},_.createElement("div",{className:pr},_.createElement(hr.Z,{color:"inherit"})))}}const gr=new Map([[fe.ERROR,"error"],[fe.WARNING,"warning"],[fe.SUCCESS,"success"],[fe.INFO,"info"],[fe.RUNNING,"info"]]),ur=1e3;class fr extends _.Component{constructor(e){super(e),this.state={blockUI:!1,lastUpdate:Date.now()-ur,logStack:[],showAlert:!1}}static getDerivedStateFromProps(e,t){const n=t.logStack[t.logStack.length-1],i=Date.now();return e.log!==n&&(i-t.lastUpdate>ur&&t.logStack.shift(),n&&e.log.level>n.level?(t.logStack.splice(0,1,e.log),t.lastUpdate=i):t.logStack.push(e.log),t.blockUI=e.settings.composite.blockWhileCommandExecutes,t.showAlert=!0),t}render(){this.state.logStack.length>1&&setTimeout((()=>{this.state.logStack.length>1&&this.setState({blockUI:this.props.settings.composite.blockWhileCommandExecutes,logStack:this.state.logStack.slice(1),lastUpdate:Date.now(),showAlert:!0})}),ur);const e=this.state.logStack[0];return _.createElement(_.Fragment,null,_.createElement(mr,{open:this.state.blockUI&&e.level===fe.RUNNING&&this.state.showAlert,onClick:()=>{this.setState({blockUI:!1})}}),_.createElement(cr,{details:null==e?void 0:e.details,error:null==e?void 0:e.error,open:this.state.showAlert,message:(null==e?void 0:e.message)||this.props.log.message,severity:gr.get((null==e?void 0:e.level)||this.props.log.level),onClose:()=>this.setState({showAlert:!1}),trans:this.props.trans}))}}var _r=n(41423),vr=n(91579);const Cr=(0,Ie.style)({display:"flex",flexDirection:"column",height:"100%",overflowY:"auto"}),br=(0,Ie.style)({display:"flex",flexDirection:"column",gap:"40px",maxWidth:"390px",margin:"auto",textAlign:"center"}),yr=(0,Ie.style)({fontSize:"var(--jp-ui-font-size1)",lineHeight:"var(--jp-content-line-height)",color:"var(--jp-ui-font-color2)",padding:"0 12px"}),wr=(0,Ie.style)({fontSize:"24px",fontWeight:700,marginBottom:"16px"}),xr=(0,Ie.style)({display:"flex",flexDirection:"column",justifyContent:"center",gap:"12px"}),kr=(0,Ie.style)({alignSelf:"center",boxSizing:"border-box",display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",height:"36px",width:"200px",marginTop:"5px",border:"0",borderRadius:"4px",color:"white",fontSize:"var(--jp-ui-font-size1)",backgroundColor:"#6c79f9",$nest:{"&:hover":{backgroundColor:"#95a0ff"},"&:active":{backgroundColor:"#5461e7"}}}),Er=(0,Ie.style)({minHeight:"36px!important",$nest:{"button:last-of-type":{borderRight:"none"}}}),Sr=(0,Ie.style)({width:"50%",minWidth:"0!important",maxWidth:"50%!important",minHeight:"36px!important",backgroundColor:"var(--tab-unselected-background)!important",borderRight:"var(--jp-border-width) solid var(--jp-border-color2)!important",$nest:{span:{textTransform:"none"}}}),Fr=(0,Ie.style)({backgroundColor:"var(--jp-layout-color1)!important"}),Rr=(0,Ie.style)({height:"4px!important",backgroundColor:"var(--tab-unselected-background)!important",transition:"none!important"}),Dr=({onSubmit:e,onCancel:t,onUpdateFormData:n})=>{const[i,r]=(0,_.useState)({name:"",email:""}),[s,o]=(0,_.useState)(""),[a,l]=(0,_.useState)(""),c=e=>0===e.length?(o("Required"),!1):(o(""),!0),d=e=>0===e.length?(l("Required"),!1):(l(""),!0);return(0,_.useEffect)((()=>{n(i)}),[i]),v().createElement(Fn,null,v().createElement("div",{className:"form-header"},v().createElement("div",{className:"form-title"},v().createElement(_t.react,{tag:"span",className:"form-title__icon",elementPosition:"center"}),"Author information required"),v().createElement("div",{className:"form-description"},"Enter your name and email for commit")),v().createElement("div",{className:"form-body"},v().createElement("label",null,v().createElement("span",{className:"form-label__text"},"Name"),v().createElement("input",{className:"form-input",type:"text",value:i.name,onChange:e=>{return t=e.target.value,c(t),void r(Object.assign(Object.assign({},i),{name:t}));var t}}),s.length>0&&v().createElement("div",{className:"form-control__error-message"},v().createElement(vt.react,{elementPosition:"center",tag:"span"}),s)),v().createElement("label",null,v().createElement("span",{className:"form-label__text"},"Email"),v().createElement("input",{className:"form-input",type:"text",value:i.email,onChange:e=>{return t=e.target.value,d(t),void r(Object.assign(Object.assign({},i),{email:t}));var t}}),a.length>0&&v().createElement("div",{className:"form-control__error-message"},v().createElement(vt.react,{elementPosition:"center",tag:"span"}),a))),v().createElement("div",{className:"form-footer"},v().createElement(kn.Z,{variant:"outlined",onClick:t,style:{borderColor:"var(--color-primary)",color:"var(--color-primary)",textTransform:"none"}},"Cancel"),v().createElement(kn.Z,{variant:"contained",onClick:()=>{(()=>{const e=c(i.name),t=d(i.email);return e&&t})()&&e()},style:{backgroundColor:"var(--color-primary)",color:"#fff",textTransform:"none"}},"Clone")))};class Nr extends r.ReactWidget{constructor(){super(),this.setFormData=e=>{this.formData=e},this.formData={name:"",email:""},this.setFormData=this.setFormData.bind(this)}submitForm(){return this.formData}render(){return v().createElement(Dr,{onSubmit:this.submitForm})}showDialog(){return In({formComponent:({onSubmit:e,onCancel:t})=>v().createElement(Dr,{onSubmit:e,onCancel:t,onUpdateFormData:this.setFormData}),onSubmit:()=>this.submitForm()})}}const Lr=Nr;var jr=n(94968),Mr=n(24837),Ir=n(52795),Pr=n(20170),Br=n(85639),Hr=n(29829),Tr=n(79895),Or=n(56762);const Vr=(0,Ie.style)({flex:"1 1 auto",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),Ar=(0,Ie.style)({marginTop:"6px",marginBottom:"0",borderBottom:"var(--jp-border-width) solid var(--jp-border-color2)"}),zr=(0,Ie.style)({padding:"4px 11px 4px",display:"flex"}),Ur=(0,Ie.style)({flex:"1 1 auto",boxSizing:"border-box",display:"inline-block",position:"relative",fontSize:"var(--jp-ui-font-size1)"}),Gr=(0,Ie.style)({boxSizing:"border-box",width:"100%",height:"2em",padding:"1px 18px 2px 7px",color:"var(--jp-ui-font-color1)",fontSize:"var(--jp-ui-font-size1)",fontWeight:300,backgroundColor:"var(--jp-layout-color1)",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px",$nest:{"&:active":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"},"&:focus":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"}}}),Zr=(0,Ie.style)({position:"absolute",right:"5px",top:"0.6em",height:"1.1em",width:"1.1em",padding:0,backgroundColor:"var(--jp-inverse-layout-color4)",border:"none",borderRadius:"50%",$nest:{svg:{width:"0.5em!important",height:"0.5em!important",fill:"var(--jp-ui-inverse-font-color0)"},"&:hover":{backgroundColor:"var(--jp-inverse-layout-color3)"},"&:active":{backgroundColor:"var(--jp-inverse-layout-color2)"}}}),Wr=(0,Ie.style)({boxSizing:"border-box",width:"7.7em",height:"2em",flex:"0 0 auto",marginLeft:"5px",color:"white",fontSize:"var(--jp-ui-font-size1)",backgroundColor:"#6C79F9",border:"0",borderRadius:"3px",$nest:{"&:hover":{backgroundColor:"#95a0ff"},"&:active":{backgroundColor:"#95a0ff"}}}),$r=(0,Ie.style)({padding:"4px 11px!important",userSelect:"none",$nest:{"&:hover":{backgroundColor:"var(--jp-layout-color2)"},"&:active":{backgroundColor:"var(--jp-brand-color1)"}}},He),qr=(0,Ie.style)({color:"var(--jp-ui-font-color1)!important",backgroundColor:"var(--jp-brand-color1)",$nest:{"& .jp-icon-selectable[fill]":{fill:"var(--jp-inverse-layout-color3)"}}}),Xr=(0,Ie.style)({width:"16px",height:"16px",marginRight:"4px"}),Kr=(0,Ie.style)({display:"flex",flexWrap:"wrap",marginTop:"auto",padding:"8px",paddingTop:"1em",alignItems:"flex-start",backgroundColor:"var(--jp-layout-color1)",borderTop:"var(--jp-border-width) solid var(--jp-border-color2)"}),Yr=(0,Ie.style)({height:"2em",marginBottom:"1em",padding:"var(--jp-code-padding)",outline:"none",overflowX:"auto",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px"}),Jr=(0,Ie.style)({marginBottom:"1em",padding:"var(--jp-code-padding)",outline:"none",overflowX:"auto",resize:"none",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px",$nest:{"&>*::placeholder":{color:"var(--jp-ui-font-color3)"},"&>*::-webkit-input-placeholder":{color:"var(--jp-ui-font-color3)"},"&>*::-moz-placeholder":{color:"var(--jp-ui-font-color3)"},"&>*::-ms-input-placeholder":{color:"var(--jp-ui-font-color3)"}}}),Qr=(0,Ie.style)({cursor:"pointer",color:"var(--jp-ui-inverse-font-color1)",background:"#6C79F9",$nest:{"&:hover":{backgroundColor:"#95a0ff"}}}),es=(0,Ie.style)({flex:"0 0 20px",lineHeight:"initial",$nest:{"& .jp-icon3[fill]":{fill:"var(--jp-ui-inverse-font-color1)"}}}),ts=((0,Ie.style)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-around"}),(0,Ie.style)({maxWidth:"250px"})),ns=((0,Ie.style)({fontSize:"var(--jp-ui-font-size1)",whiteSpace:"break-spaces"}),(0,Ie.style)({color:"var(--jp-ui-font-color1)",fontSize:"var(--jp-ui-font-size1)",fontFamily:"var(--jp-ui-font-family)",backgroundColor:"var(--jp-layout-color1)"})),is=(0,Ie.style)({outline:"none",border:"var(--jp-border-width) solid var(--jp-brand-color1)"}),rs=(0,Ie.style)({cursor:"not-allowed !important",color:"var(--jp-ui-font-color1) !important",backgroundColor:"var(--commit-button-background) !important",border:"1px solid #e0e0e0",pointerEvents:"auto !important"});var ss=n(38799);function os(e){var t,n,i,r;const s=null!==(t=e.summaryPlaceholder)&&void 0!==t?t:e.trans.__("Summary");return _.createElement(_.Fragment,null,_.createElement(ss.Z,{className:Yr,classes:{root:ns,focused:is,disabled:rs},type:"text",placeholder:s,title:e.disabled?e.trans.__("Amending the commit will re-use the previous commit summary"):e.trans.__("Enter a commit message summary (a single line, preferably less than 50 characters)"),value:e.summary,onChange:function(t){e.setSummary(t.target.value)},onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},disabled:null!==(n=e.disabled)&&void 0!==n&&n,disableUnderline:!0,fullWidth:!0}),_.createElement(ss.Z,{className:Jr,classes:{root:ns,focused:is,disabled:rs},multiline:!0,minRows:5,maxRows:10,placeholder:null!==(i=e.descriptionPlaceholder)&&void 0!==i?i:e.trans.__("Description (optional)"),title:e.disabled?e.trans.__("Amending the commit will re-use the previous commit summary"):e.trans.__("Enter a commit message description"),value:e.description,onChange:function(t){e.setDescription(t.target.value)},disabled:null!==(r=e.disabled)&&void 0!==r&&r,disableUnderline:!0,fullWidth:!0}))}class as extends _.Component{constructor(e){super(e),this._getSubmitKeystroke=()=>this.props.commands.keyBindings.find((e=>e.command===ve.gitSubmitCommand)).keys.join(" "),this._handleClose=e=>{this._anchorRef.current&&this._anchorRef.current.contains(e.target)||this.setState({open:!1})},this._handleMenuItemClick=(e,t)=>{this.setState({open:!1}),this.props.setAmend(1===t)},this._handleToggle=()=>{this.setState({open:!this.state.open})},this._handleCommand=(e,t)=>{t.id===ve.gitSubmitCommand&&this._canCommit()&&this.props.onCommit()},this._options=[],this._options.push({title:this.props.trans.__("Create a new commit"),description:this.props.trans.__("New commit will be created and show up as a next one after the previous commit (default).")},{title:this.props.trans.__("Amend previous commit"),description:this.props.trans.__("Staged changes will be added to the previous commit and its date will be updated.")}),this._anchorRef=_.createRef(),this.state={open:!1}}componentDidMount(){this.props.commands.commandExecuted.connect(this._handleCommand)}componentWillUnmount(){this.props.commands.commandExecuted.disconnect(this._handleCommand)}render(){const e=!this._canCommit(),t=this.props.hasFiles?this.props.summary?this.props.label:this.props.trans.__("Disabled: No commit message summary"):this.props.trans.__("Disabled: No files are staged for commit"),n=jr.CommandRegistry.formatKeystroke(this._getSubmitKeystroke()),i=this.props.trans.__("Summary (%1 to commit)",n);return _.createElement("div",{className:(0,Ie.classes)(Kr,"jp-link-git-CommitBox")},_.createElement(os,{trans:this.props.trans,summary:this.props.summary,summaryPlaceholder:i,description:this.props.description,disabled:this.props.amend,setSummary:this.props.setSummary,setDescription:this.props.setDescription}),_.createElement(Mr.Z,{ref:this._anchorRef,fullWidth:!0,size:"small"},_.createElement(kn.Z,{classes:{root:Qr,disabled:rs},title:t,disabled:e,onClick:this.props.onCommit},this.props.label),_.createElement(kn.Z,{classes:{root:Qr},className:es,size:"small","aria-controls":this.state.open?"split-button-menu":void 0,"aria-expanded":this.state.open?"true":void 0,"aria-label":"select commit variant","aria-haspopup":"menu",onClick:this._handleToggle},_.createElement(nt.react,{tag:"span"}))),_.createElement(Or.Z,{open:this.state.open,anchorEl:this._anchorRef.current,role:void 0,transition:!0,disablePortal:!0},(({TransitionProps:e})=>_.createElement(Pr.Z,Object.assign({},e),_.createElement(Tr.Z,{classes:{root:ns},className:ts},_.createElement(Ir.Z,{onClickAway:this._handleClose},_.createElement(Hr.Z,{id:"split-button-menu"},this._options.map(((e,t)=>_.createElement(Br.Z,{key:e.title,classes:{root:ns},selected:this.props.amend?1===t:0===t,onClick:e=>this._handleMenuItemClick(e,t)},(this.props.amend?1===t:0===t)?_.createElement(m.checkIcon.react,{className:Xr,tag:"span"}):_.createElement("span",{className:Xr}),_.createElement("div",{className:mn},_.createElement("p",{className:_n},e.title),_.createElement("p",{className:gn},e.description))))))))))))}_canCommit(){return this.props.amend?this.props.hasFiles:!(!this.props.hasFiles||!this.props.summary)}}const ls=(0,Ie.style)({minHeight:"48px",top:0,position:"sticky",flexGrow:0,flexShrink:0,overflowX:"hidden",backgroundColor:"var(--jp-toolbar-active-background)"}),cs=(0,Ie.style)({display:"flex",justifyContent:"center",padding:"10px 0",color:"var(--jp-ui-font-color2)"}),ds=(0,Ie.style)({display:"flex",flexDirection:"column",minHeight:"400px",marginBlockStart:0,marginBlockEnd:0,paddingLeft:0,overflowY:"auto"}),hs=(0,Ie.style)({flexGrow:0,display:"flex",flexShrink:0,flexDirection:"column",padding:"5px 0px 5px 10px",borderBottom:"var(--jp-border-width) solid var(--jp-border-color2)"}),ps=(0,Ie.style)({display:"flex",color:"var(--jp-ui-font-color2)",paddingBottom:"5px"}),ms=(0,Ie.style)({width:"30%",paddingLeft:"0.5em",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",$nest:{"&:first-child":{paddingLeft:0}}}),gs=(0,Ie.style)({display:"flex",fontSize:"0.8em",marginLeft:"-5px"}),us=(0,Ie.style)({padding:"2px 6px",borderRadius:"8px",margin:"3px",fontSize:"12px"}),fs=(0,Ie.style)({backgroundColor:"var(--remote-branch-background)",color:"var(--remote-branch-font-color)"}),_s=(0,Ie.style)({backgroundColor:"var(--local-branch-background)",color:"var(--local-branch-font-color)"}),vs=(0,Ie.style)({backgroundColor:"var(--working-branch-background)",color:"var(--working-branch-font-color)"}),Cs=(0,Ie.style)({backgroundColor:"var(--jp-layout-color1)"}),bs=(0,Ie.style)({display:"flex",flex:"auto"}),ys=(0,Ie.style)({width:"16px",height:"16px",margin:"auto 8px auto auto"}),ws=(0,Ie.style)({$nest:{"&:hover":{backgroundColor:"var(--jp-layout-color2)"}}});var xs=n(80426),ks=n.n(xs);class Es extends _.Component{constructor(e){super(e),this._emojiConverter=new(ks()),this._onCommitClick=e=>{var t;this.props.children?this.setState({expanded:!this.state.expanded}):null===(t=this.props.onOpenDiff)||void 0===t||t.call(this,e)},this._emojiConverter.replace_mode="unified",this.state={expanded:!1}}render(){return _.createElement("li",{className:(0,Ie.classes)(hs,!this.props.children&&this.props.onOpenDiff?ws:this.state.expanded?Cs:null),title:this.props.children?this.props.trans.__("View commit details"):this.props.trans.__("View file changes"),onClick:this._onCommitClick},_.createElement("div",{className:bs},_.createElement("div",{style:{fontSize:"15px"},dangerouslySetInnerHTML:{__html:this._emojiConverter.replace_colons(this.props.commit.commit_msg)}}),this.props.children?this.state.expanded?_.createElement(m.caretUpIcon.react,{className:ys,tag:"span"}):_.createElement(m.caretDownIcon.react,{className:ys,tag:"span"}):_.createElement(Ge.react,{className:ys,tag:"span"})),_.createElement("div",{className:ps},_.createElement("span",{className:ms},this.props.commit.author),_.createElement("span",{className:ms},+this.props.commit.commit in ue.Diff.SpecialRef?ue.Diff.SpecialRef[+this.props.commit.commit]:this.props.commit.commit.slice(0,7)),_.createElement("span",{className:ms},this.props.commit.date)),_.createElement("div",{className:gs},this._renderBranches()),this.state.expanded&&this.props.children)}_renderBranches(){const e=this.props.commit.commit,t=[];for(let n=0;n<this.props.branches.length;n++){const i=this.props.branches[n];i.top_commit&&i.top_commit===e&&t.push(i)}return t.map(this._renderBranch,this)}_renderBranch(e){return _.createElement(_.Fragment,{key:e.name},e.is_current_branch&&_.createElement("span",{className:(0,Ie.classes)(us,vs)},"working"),_.createElement("span",{className:(0,Ie.classes)(us,e.is_remote_branch?fs:_s)},e.name))}}const Ss=(0,Ie.style)({flex:"0 0 auto",width:"100%",fontSize:"12px",marginBottom:"10px",marginTop:"5px"}),Fs=(0,Ie.style)({fontSize:"13px",fontWeight:"bold",paddingTop:"5px",$nest:{"& span":{alignItems:"center",display:"inline-flex",marginLeft:"5px"},"& span:nth-of-type(1)":{marginLeft:"0px"}}}),Rs=(0,Ie.style)({flex:"1 1 auto",margin:"0"}),Ds=(0,Ie.style)({paddingBottom:"0.5em",fontSize:"13px",fontWeight:"bold"}),Ns=(0,Ie.style)({userSelect:"none",display:"flex",flexDirection:"row",alignItems:"center",color:"var(--jp-ui-font-color1)",height:"var(--jp-private-running-item-height)",lineHeight:"var(--jp-private-running-item-height)",whiteSpace:"nowrap",overflow:"hidden",$nest:{"&:hover":{backgroundColor:"var(--jp-layout-color2)"},"&:active":{backgroundColor:"var(--jp-layout-color3)"}}}),Ls=(0,Ie.style)({display:"inline-block",width:"13px",height:"13px",right:"10px"}),js=(0,Ie.style)({$nest:{".jp-icon3":{fill:"var(--md-green-500)"}}}),Ms=(0,Ie.style)({$nest:{".jp-icon3":{fill:"var(--md-red-500)"}}}),Is=(0,Ie.style)({paddingLeft:0}),Ps=(0,Ie.style)({float:"right"}),Bs=(0,Ie.style)({height:"auto",width:"380px",color:"var(--jp-ui-font-color1)!important",borderRadius:"3px!important",backgroundColor:"var(--jp-layout-color1)!important"}),Hs=(0,Ie.style)({position:"absolute",top:"10px",right:"12px",height:"30px",width:"30px",padding:0,border:"none",borderRadius:"50%",backgroundColor:"var(--jp-layout-color1)",$nest:{svg:{fill:"var(--jp-ui-font-color1)"},"&:hover":{backgroundColor:"var(--jp-border-color2)"},"&:active":{backgroundColor:"var(--jp-border-color2)"}}}),Ts=(0,Ie.style)({boxSizing:"border-box",position:"relative",padding:"15px",borderBottom:"var(--jp-border-width) solid var(--jp-border-color2)"}),Os=(0,Ie.style)({fontWeight:700}),Vs=(0,Ie.style)({padding:"15px",$nest:{"> p":{marginBottom:"7px"}}}),As=(0,Ie.style)({padding:"15px!important",borderTop:"var(--jp-border-width) solid var(--jp-border-color2)"}),zs=(0,Ie.style)({boxSizing:"border-box",width:"9em",height:"2em",color:"white",fontSize:"var(--jp-ui-font-size1)",cursor:"pointer",border:"0",borderRadius:"3px",$nest:{"&:disabled":{cursor:"default"}}}),Us=(0,Ie.style)({backgroundColor:"var(--md-grey-500)",$nest:{"&:hover":{backgroundColor:"var(--md-grey-600)"},"&:active":{backgroundColor:"var(--md-grey-700)"}}}),Gs=(0,Ie.style)({backgroundColor:"var(--md-blue-500)",$nest:{"&:hover":{backgroundColor:"var(--md-blue-600)"},"&:active":{backgroundColor:"var(--md-blue-700)"},"&:disabled":{color:"var(--jp-ui-inverse-font-color0)",backgroundColor:"var(--jp-layout-color3)"},"&:disabled:hover":{backgroundColor:"var(--jp-layout-color3)"},"&:disabled:active":{backgroundColor:"var(--jp-layout-color3)"}}}),Zs=(0,Ie.style)({display:"flex",flexWrap:"wrap",marginTop:"auto",padding:0,alignItems:"flex-start",backgroundColor:"var(--jp-layout-color1)"});(0,Ie.style)({width:"100%",height:"1.5em",marginBottom:"1em",padding:"var(--jp-code-padding)",outline:"none",overflowX:"auto",color:"var(--jp-ui-font-color1)",fontSize:"var(--jp-ui-font-size1)",fontWeight:300,backgroundColor:"var(--jp-layout-color1)",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px",$nest:{"&:active":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"},"&:focus":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"}}}),(0,Ie.style)({width:"100%",marginBottom:"1em",padding:"var(--jp-code-padding)",outline:"none",overflowX:"auto",resize:"none",color:"var(--jp-ui-font-color1)",fontSize:"var(--jp-ui-font-size1)",fontWeight:300,backgroundColor:"var(--jp-layout-color1)",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px",$nest:{"&:focus":{outline:"none",border:"var(--jp-border-width) solid var(--jp-brand-color1)"},"&:active":{outline:"none",border:"var(--jp-border-width) solid var(--jp-brand-color1)"},"&::placeholder":{color:"var(--jp-ui-font-color3)"},"&::-webkit-input-placeholder":{color:"var(--jp-ui-font-color3)"},"&::-moz-placeholder":{color:"var(--jp-ui-font-color3)"},"&::-ms-input-placeholder":{color:"var(--jp-ui-font-color3)"}}});class Ws extends _.Component{constructor(e){super(e),this._onSummaryChange=e=>{this.setState({summary:e})},this._onDescriptionChange=e=>{this.setState({description:e})},this._onClick=e=>{e.stopPropagation()},this._onClose=e=>{e.stopPropagation(),this.props.onClose(),this._reset()},this._onSubmit=async()=>{this.setState({disabled:!0}),"reset"===this.props.action?this._resetCommit(this.props.commit.commit):this._revertCommit(this.props.commit.commit),this._reset(),this.props.onClose()},this.state={summary:"",description:"",disabled:!1}}render(){const e=this.props.commit.commit.slice(0,7),t="revert"===this.props.action;return _.createElement(Xt.Z,{classes:{paper:Bs},open:this.props.open,onClick:this._onClick,onClose:this._onClose},_.createElement("div",{className:Ts},_.createElement("p",{className:Os},t?this.props.trans.__("Revert Changes"):this.props.trans.__("Reset Changes")),_.createElement("button",{className:Hs},_.createElement(Jt.Z,{titleAccess:this.props.trans.__("Close this dialog"),fontSize:"small",onClick:this._onClose}))),_.createElement("div",{className:Vs},_.createElement("p",null,t?this.props.trans.__("These changes will be reverted. Only commit if you're sure you're okay losing these changes."):this.props.trans.__("All changes after commit %1 will be gone forever (hard reset). Are you sure?",e)),t&&_.createElement("div",{className:Zs},_.createElement(os,{trans:this.props.trans,summary:this.state.summary,summaryPlaceholder:this._defaultSummary(),description:this.state.description,descriptionPlaceholder:this._defaultDescription(),setSummary:this._onSummaryChange,setDescription:this._onDescriptionChange}))),_.createElement(Kt.Z,{className:As},_.createElement("input",{disabled:this.state.disabled,className:(0,Ie.classes)(zs,Us),type:"button",title:this.props.trans.__("Cancel changes"),value:"Cancel",onClick:this._onClose}),_.createElement("input",{disabled:this.state.disabled,className:(0,Ie.classes)(zs,Gs),type:"button",title:this.props.trans.__("Submit changes"),value:"Submit",onClick:this._onSubmit})))}async _resetCommit(e){this.props.logger.log({level:fe.RUNNING,message:this.props.trans.__("Discarding changes…")});try{await this.props.model.resetToCommit(e),this.props.logger.log({level:fe.SUCCESS,message:this.props.trans.__("Successfully discarded changes.")})}catch(t){this.props.logger.log({level:fe.ERROR,message:this.props.trans.__("Failed to discard changes."),error:new Error(`Failed to discard changes after ${e.slice(0,7)}: ${t}`)})}}async _revertCommit(e){this.props.logger.log({level:fe.RUNNING,message:this.props.trans.__("Reverting changes…")});try{await this.props.model.revertCommit(this._commitMessage(),e),this.props.logger.log({level:fe.SUCCESS,message:this.props.trans.__("Successfully reverted changes.")})}catch(t){this.props.logger.log({level:fe.ERROR,message:this.props.trans.__("Failed to revert changes."),error:new Error(`Failed to revert ${e.slice(0,7)}: ${t}`)})}}_defaultSummary(){const e=this.props.commit.commit_msg.split("\n")[0];return this.props.trans.__("Revert '%1'",e)}_defaultDescription(){return this.props.trans.__("This reverts commit %1",this.props.commit.commit)}_commitMessage(){return(this.state.summary||this._defaultSummary())+"\n\n"+(this.state.description||this._defaultDescription())+"\n"}_reset(){this.setState({summary:"",description:"",disabled:!1})}}class $s extends _.Component{constructor(e){super(e),this._renderFile=e=>{const{data:t,index:n,style:i}=e,r=t[n],s=r.modified_file_path,o=r.previous_file_path,a=!!Ne(s)||!r.is_binary;return _.createElement("li",{className:Ns,onClick:this.props.onOpenDiff(s,a,o),style:i,title:s},_.createElement(It,{filepath:s,filetype:r.type}),a?_.createElement(wt,{icon:Ge,title:this.props.trans.__("View file changes")}):null)},this._onRevertClick=e=>{e.stopPropagation(),this.setState({resetRevertDialog:!0,resetRevertAction:"revert"})},this._onResetClick=e=>{e.stopPropagation(),this.setState({resetRevertDialog:!0,resetRevertAction:"reset"})},this._onResetRevertDialogClose=()=>{this.setState({resetRevertDialog:!1})},this.state={info:"",numFiles:"",insertions:"",deletions:"",modifiedFiles:[],loadingState:"loading",resetRevertDialog:!1,resetRevertAction:"reset"}}async componentDidMount(){try{const e=await this.props.model.detailedLog(this.props.commit.commit);this.setState({info:e.modified_file_note,numFiles:e.modified_files_count,insertions:e.number_of_insertions,deletions:e.number_of_deletions,modifiedFiles:e.modified_files,loadingState:"success"})}catch(e){return console.error(`Error while getting detailed log for commit ${this.props.commit.commit} and path ${this.props.model.pathRepository}`,e),void this.setState({loadingState:"error"})}}render(){return"loading"===this.state.loadingState?_.createElement("div",null,"…"):"error"===this.state.loadingState?_.createElement("div",null,this.props.trans.__("Error loading commit data")):_.createElement("div",null,_.createElement("div",{className:Ss},_.createElement("div",{className:Fs},_.createElement("span",{title:this.props.trans.__("# Files Changed")},_.createElement(m.fileIcon.react,{className:Ls,tag:"span"}),this.state.numFiles),_.createElement("span",{title:this.props.trans.__("# Insertions")},_.createElement(We.react,{className:(0,Ie.classes)(Ls,js),tag:"span"}),this.state.insertions),_.createElement("span",{title:this.props.trans.__("# Deletions")},_.createElement(Ue.react,{className:(0,Ie.classes)(Ls,Ms),tag:"span"}),this.state.deletions))),_.createElement("div",{className:Rs},_.createElement("div",{className:Ds},this.props.trans.__("Changed"),_.createElement(wt,{className:Ps,icon:Ze,title:this.props.trans.__("Revert changes introduced by this commit"),onClick:this._onRevertClick}),_.createElement(wt,{className:Ps,icon:Qe,title:this.props.trans.__("Discard changes introduced *after* this commit (hard reset)"),onClick:this._onResetClick}),_.createElement(Tn.Consumer,null,(e=>_.createElement(Ws,{open:this.state.resetRevertDialog,action:this.state.resetRevertAction,model:this.props.model,logger:e,commit:this.props.commit,onClose:this._onResetRevertDialogClose,trans:this.props.trans})))),this.state.modifiedFiles.length>0&&_.createElement(Tt.FixedSizeList,{className:Is,height:24*Math.min(20,this.state.modifiedFiles.length),innerElementType:"ul",itemCount:this.state.modifiedFiles.length,itemData:this.state.modifiedFiles,itemKey:(e,t)=>t[e].modified_file_path,itemSize:24,style:{overflowX:"hidden"},width:"auto"},this._renderFile)))}}const qs=e=>{var t;const n=()=>{e.model.selectedHistoryFile=null},i=t=>(n,i,r)=>async s=>{if(s.stopPropagation(),i)try{e.commands.execute(_e.gitFileDiff,{files:[{filePath:n,previousFilePath:r,isText:i,context:{previousRef:t.pre_commit,currentRef:t.commit}}]})}catch(e){console.error(`Failed to open diff view for ${n}.\n${e}`)}},r=_.useMemo((()=>{var t,n,i;return{author:e.trans.__("You"),commit:`${"staged"===(null===(t=e.model.selectedHistoryFile)||void 0===t?void 0:t.status)?ue.Diff.SpecialRef.INDEX:ue.Diff.SpecialRef.WORKING}`,pre_commit:"HEAD",is_binary:null!==(i=null===(n=e.commits[0])||void 0===n?void 0:n.is_binary)&&void 0!==i&&i,commit_msg:e.trans.__("Uncommitted Changes"),date:e.trans.__("now")}}),[e.model.selectedHistoryFile]),s=e.model.selectedHistoryFile&&"unmodified"!==(null===(t=e.model.selectedHistoryFile)||void 0===t?void 0:t.status)?[r,...e.commits]:e.commits;return _.createElement("ol",{className:ds},!!e.model.selectedHistoryFile&&_.createElement(Ht,{className:ls,model:e.model,trans:e.trans,actions:_.createElement(wt,{className:Be,icon:m.closeIcon,title:e.trans.__("Discard file history"),onClick:n}),file:e.model.selectedHistoryFile,onDoubleClick:n}),s.length?s.map((t=>{var n;const r={commit:t,branches:e.branches,model:e.model,commands:e.commands,trans:e.trans},s=e.model.selectedHistoryFile&&!t.is_binary?i(t)(null!==(n=t.file_path)&&void 0!==n?n:e.model.selectedHistoryFile.to,!t.is_binary,t.previous_file_path):void 0;return _.createElement(Es,Object.assign({key:t.commit},r,{onOpenDiff:s}),!e.model.selectedHistoryFile&&_.createElement($s,Object.assign({},r,{onOpenDiff:i(t)})))})):_.createElement("li",{className:cs},e.trans.__("No history found.")))},Xs=(0,Ie.style)({display:"flex",flexDirection:"column",backgroundColor:"var(--jp-layout-color1)"}),Ks=(0,Ie.style)({display:"flex",flexDirection:"row",flexWrap:"wrap",minHeight:"35px",lineHeight:"var(--jp-private-running-item-height)",backgroundColor:"var(--jp-layout-color1)",borderBottom:"var(--jp-border-width) solid var(--jp-border-color2)"}),Ys=(0,Ie.style)({background:"var(--jp-layout-color1)",boxShadow:"0px 2px 6px rgb(0 0 0 / 20%)",position:"relative",zIndex:100}),Js=(0,Ie.style)({boxSizing:"border-box",flexDirection:"row",flexWrap:"wrap",width:"100%",minHeight:"50px",padding:"4px 11px 4px 11px",fontSize:"var(--jp-ui-font-size1)",lineHeight:"1.5em",color:"var(--jp-ui-font-color1)",textAlign:"left",border:"none",borderBottom:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:0,background:"var(--jp-layout-color1)"}),Qs=(0,Ie.style)({$nest:{"&:hover":{backgroundColor:"var(--jp-layout-color2)"},"&:active":{backgroundColor:"var(--jp-layout-color3)"}}}),eo=(0,Ie.style)({width:"16px",height:"16px",margin:"auto 8px auto 0"}),to=(0,Ie.style)({padding:"2px 4px",marginTop:"auto",marginBottom:"auto",marginRight:"auto",fontSize:"11px"}),no=(0,Ie.style)({display:"flex",borderRadius:"30px",backgroundColor:"var(--current-repository-background)",color:"#6C79F9",padding:"2px 4px 2px 8px",width:"125px"}),io=(0,Ie.style)({display:"flex",borderRadius:"30px",backgroundColor:"var(--current-branch-background)",color:"#A16CF9",padding:"2px 4px 2px 8px",width:"100px"}),ro=(0,Ie.style)({marginBottom:"auto",fontWeight:500,fontSize:"13px",color:"var(--jp-ui-font-color0)"}),so=(0,Ie.style)({boxSizing:"border-box",height:"24px",width:"var(--jp-private-running-button-width) !important",margin:"auto 0 auto 0",padding:"0px 6px !important",border:"none",outline:"none",$nest:{"&:disabled":{opacity:.4,background:"none",cursor:"not-allowed"},"&:hover":{backgroundColor:"var(--jp-layout-color2)"},"&:active":{backgroundColor:"var(--jp-layout-color3)"},"& span":{margin:"auto",width:"16px"}}}),oo=(0,Ie.style)({flex:"1 1 auto"}),ao=(0,Ie.style)({$nest:{"& > .MuiBadge-badge":{top:12,right:15,backgroundColor:"var(--jp-warn-color1)"}}}),lo=(0,Ie.style)({marginLeft:"5px",fontWeight:"bold"});var co=n(62822);class ho extends _.Component{constructor(e){super(e),this._renderItem=e=>{const{data:t,index:n,style:i}=e,r=t[n],s=r.name===this.state.base;let o,a;return r.name===this.props.currentBranch?(o=!0,a=this.props.trans.__("The current branch. Pick this if you want to build on work done in this branch.")):["master","main"].includes(r.name)&&(o=!0,a=this.props.trans.__("The default branch. Pick this if you want to start fresh from the default branch.")),_.createElement(Yt.Z,{button:!0,title:this.props.trans.__("Create a new branch based on: %1",r.name),className:(0,Ie.classes)(hn,s?pn:null),onClick:this._onBranchClickFactory(r.name),style:i},_.createElement(Ae.react,{className:un,tag:"span"}),_.createElement("div",{className:mn},_.createElement("p",{className:(0,Ie.classes)(fn,o?_n:null)},r.name),a?_.createElement("p",{className:gn},this.props.trans.__(a)):null))},this._onClose=()=>{this.props.onClose(),this.setState({name:"",filter:"",error:""})},this._onFilterChange=e=>{this._branchList.current.resetAfterIndex(0),this.setState({filter:e.target.value})},this._resetFilter=()=>{this._branchList.current.resetAfterIndex(0),this.setState({filter:""})},this._onNameChange=e=>{this.setState({name:e.target.value,error:""})},this._onCreate=()=>{this._createBranch(this.state.name)},this._branchList=_.createRef(),this.state={name:"",base:e.currentBranch||"",filter:"",error:""}}render(){return _.createElement(Xt.Z,{classes:{paper:Qt},open:this.props.open,onClose:this._onClose},_.createElement("div",{className:tn},_.createElement("p",{className:nn},this.props.trans.__("Create a Branch")),_.createElement("button",{className:en},_.createElement(Jt.Z,{titleAccess:this.props.trans.__("Close this dialog"),fontSize:"small",onClick:this._onClose}))),_.createElement("div",{className:rn},this.state.error?_.createElement("p",{className:vn},this.state.error):null,_.createElement("p",null,this.props.trans.__("Name")),_.createElement("input",{className:sn,type:"text",onChange:this._onNameChange,value:this.state.name,placeholder:"",title:this.props.trans.__("Enter a branch name")}),_.createElement("p",null,this.props.trans.__("Create branch based on…")),_.createElement("div",{className:on},_.createElement("div",{className:an},_.createElement("input",{className:ln,type:"text",onChange:this._onFilterChange,value:this.state.filter,placeholder:this.props.trans.__("Filter"),title:this.props.trans.__("Filter branch menu")}),this.state.filter?_.createElement("button",{className:cn},_.createElement(Jt.Z,{titleAccess:this.props.trans.__("Clear the current filter"),fontSize:"small",onClick:this._resetFilter})):null)),this._renderItems()),_.createElement(Kt.Z,{className:Cn},_.createElement("input",{className:(0,Ie.classes)(bn,yn),type:"button",title:this.props.trans.__("Close this dialog without creating a new branch"),value:this.props.trans.__("Cancel"),onClick:this._onClose}),_.createElement("input",{className:(0,Ie.classes)(bn,wn),type:"button",title:this.props.trans.__("Create a new branch"),value:this.props.trans.__("Create Branch"),onClick:this._onCreate,disabled:""===this.state.name||""!==this.state.error})))}_renderItems(){const e=this.props.currentBranch,t=this.state.filter,n=this.props.branches.filter((e=>!t||e.name.includes(t))).slice().sort((function(t,n){return t.name===e?-1:n.name===e?1:"master"===t.name?-1:"master"===n.name?1:"main"===t.name?-1:"main"===n.name?1:0}));return _.createElement(Tt.VariableSizeList,{className:dn,height:200,estimatedItemSize:27.5,itemCount:n.length,itemData:n,itemKey:(e,t)=>t[e].name,itemSize:e=>{const t=n[e];return[this.props.currentBranch,"master","main"].includes(t.name)?66.5:27.5},ref:this._branchList,style:{overflowX:"hidden"},width:"auto"},this._renderItem)}_onBranchClickFactory(e){const t=this;return function(){t.setState({base:e})}}async _createBranch(e){const t={newBranch:!0,branchname:e};this.props.logger.log({level:fe.RUNNING,message:this.props.trans.__("Creating branch…")});try{await this.props.model.checkout(t)}catch(e){return this.setState({error:e.message.replace(/^fatal:/,"")}),void this.props.logger.log({level:fe.ERROR,message:this.props.trans.__("Failed to create branch.")})}this.props.logger.log({level:fe.SUCCESS,message:this.props.trans.__("Branch created.")}),this.props.onClose(),this._branchList.current.resetAfterIndex(0),this.setState({name:"",filter:""})}}function po(e){return _.createElement(Yt.Z,{key:e},e)}class mo extends _.Component{constructor(e){super(e),this.CHANGES_ERR_MSG=this.props.trans.__("The current branch contains files with uncommitted changes. Please commit or discard these changes before switching to or creating another branch."),this._renderItem=e=>{const{data:t,index:n,style:i}=e,r=t[n],s=r.name===this.props.currentBranch;return _.createElement(Yt.Z,{button:!0,title:s?"":this.props.trans.__("Switch to branch: %1",r.name),className:(0,Ie.classes)($r,s?qr:null),onClick:this._onBranchClickFactory(r.name),style:i},_.createElement(Ae.react,{className:Xr,tag:"span"}),_.createElement("span",{className:Vr},r.name),!r.is_remote_branch&&!s&&_.createElement(_.Fragment,null,_.createElement(wt,{className:Be,icon:tt,title:this.props.trans.__("Delete this branch locally"),onClick:e=>{e.stopPropagation(),this._onDeleteBranch(r.name)}}),_.createElement(wt,{className:Be,icon:qe,title:this.props.trans.__("Merge this branch into the current one"),onClick:e=>{e.stopPropagation(),this._onMergeBranch(r.name)}})))},this._onFilterChange=e=>{this.setState({filter:e.target.value})},this._resetFilter=()=>{this.setState({filter:""})},this._onDeleteBranch=async e=>{if((await(0,r.showDialog)({title:this.props.trans.__("Delete branch"),body:_.createElement("p",null,this.props.trans.__("Are you sure you want to permanently delete the branch "),_.createElement("b",null,e),"?",_.createElement("br",null),this.props.trans.__("This action cannot be undone.")),buttons:[r.Dialog.cancelButton({label:this.props.trans.__("Cancel")}),r.Dialog.warnButton({label:this.props.trans.__("Delete")})]})).button.accept)try{await this.props.model.deleteBranch(e),await this.props.model.refreshBranch()}catch(t){console.error(`Failed to delete branch ${e}`,t)}},this._onMergeBranch=async e=>{await this.props.commands.execute(ve.gitMerge,{branch:e})},this._onNewBranchClick=()=>{this.props.branching?this.setState({branchDialog:!0}):(0,r.showErrorMessage)(this.props.trans.__("Creating a new branch is disabled"),this.CHANGES_ERR_MSG)},this._onNewBranchDialogClose=()=>{this.setState({branchDialog:!1})},this.state={filter:"",branchDialog:!1}}render(){return _.createElement("div",{className:Ar},this._renderFilter(),this._renderBranchList(),this._renderNewBranchDialog())}_renderFilter(){return _.createElement("div",{className:zr},_.createElement("div",{className:Ur},_.createElement("input",{className:Gr,type:"text",onChange:this._onFilterChange,value:this.state.filter,placeholder:this.props.trans.__("Filter"),title:this.props.trans.__("Filter branch menu")}),this.state.filter?_.createElement("button",{className:Zr},_.createElement(Jt.Z,{titleAccess:this.props.trans.__("Clear the current filter"),fontSize:"small",onClick:this._resetFilter})):null),_.createElement("input",{className:Wr,type:"button",title:this.props.trans.__("Create a new branch"),value:this.props.trans.__("New Branch"),onClick:this._onNewBranchClick}))}_renderBranchList(){const e=this.state.filter,t=this.props.branches.filter((t=>!e||t.name.includes(e)));return _.createElement(Tt.FixedSizeList,{height:Math.min(Math.max(150,24.8*t.length),400),itemCount:t.length,itemData:t,itemKey:(e,t)=>t[e].name,itemSize:24.8,style:{overflowX:"hidden",paddingTop:0,paddingBottom:0},width:"auto"},this._renderItem)}_renderNewBranchDialog(){return _.createElement(ho,{currentBranch:this.props.currentBranch,branches:this.props.branches,logger:this.props.logger,open:this.state.branchDialog,model:this.props.model,onClose:this._onNewBranchDialogClose,trans:this.props.trans})}_onBranchClickFactory(e){const t=this;return async function(){if(!t.props.branching)return void(0,r.showErrorMessage)(t.props.trans.__("Switching branches is disabled"),t.CHANGES_ERR_MSG);const n={branchname:e};t.props.logger.log({level:fe.RUNNING,message:t.props.trans.__("Switching branch…")});try{await t.props.model.checkout(n)}catch(e){return function(e,t,n){e.message.includes("following files would be overwritten")?(t.log({message:"",level:fe.INFO}),(0,r.showDialog)({title:n.__("Unable to switch branch"),body:_.createElement(_.Fragment,null,_.createElement("p",null,n.__("Your changes to the following files would be overwritten by switching:")),_.createElement(co.Z,null,e.message.split("\n").slice(1,-3).map(po)),_.createElement("span",null,n.__("Please commit, stash, or discard your changes before you switch branches."))),buttons:[r.Dialog.okButton({label:n.__("Dismiss")})]})):t.log({level:fe.ERROR,message:n.__("Failed to switch branch."),error:e})}(e,t.props.logger,t.props.trans)}t.props.logger.log({level:fe.SUCCESS,message:t.props.trans.__("Switched branch.")})}}}function go(e){return _.createElement(Yt.Z,{key:e},e)}class uo extends _.Component{constructor(e){super(e),this._renderItem=e=>{const{data:t,index:n,style:i}=e,r=t[n];return _.createElement(Yt.Z,{button:!0,title:this.props.trans.__("Checkout to tag: %1",r),className:$r,onClick:this._onTagClickFactory(r),style:i},_.createElement(et.react,{className:Xr,tag:"span"}),_.createElement("span",{className:Vr},r))},this._onFilterChange=e=>{this.setState({filter:e.target.value})},this._resetFilter=()=>{this.setState({filter:""})},this.state={filter:"",tags:[]}}componentDidMount(){this.props.model.tags().then((e=>{this.setState({tags:e.tags})})).catch((e=>{console.error(e),this.setState({tags:[]}),(0,r.showErrorMessage)(this.props.trans.__("Fail to get the tags."),e)}))}render(){return _.createElement("div",{className:Ar},this._renderFilter(),this._renderTagList())}_renderFilter(){return _.createElement("div",{className:zr},_.createElement("div",{className:Ur},_.createElement("input",{className:Gr,type:"text",onChange:this._onFilterChange,value:this.state.filter,placeholder:this.props.trans.__("Filter"),title:this.props.trans.__("Filter branch menu")}),this.state.filter?_.createElement("button",{className:Zr},_.createElement(Jt.Z,{titleAccess:this.props.trans.__("Clear the current filter"),fontSize:"small",onClick:this._resetFilter})):null))}_renderTagList(){const e=this.state.filter,t=this.state.tags.filter((t=>!e||t.includes(e)));return _.createElement(Tt.FixedSizeList,{height:Math.min(Math.max(150,24.8*t.length),400),itemCount:t.length,itemData:t,itemKey:(e,t)=>t[e],itemSize:24.8,style:{overflowX:"hidden",paddingTop:0,paddingBottom:0},width:"auto"},this._renderItem)}_onTagClickFactory(e){const t=this;return async function(){if(t.props.branching){t.props.logger.log({level:fe.RUNNING,message:t.props.trans.__("Checking tag out…")});try{await t.props.model.checkoutTag(e)}catch(e){return function(e,t,n){e.message.includes("following files would be overwritten")?(t.log({message:"",level:fe.INFO}),(0,r.showDialog)({title:n.__("Unable to checkout tag"),body:_.createElement(_.Fragment,null,_.createElement("p",null,n.__("Your changes to the following files would be overwritten by switching:")),_.createElement(co.Z,null,e.message.split("\n").slice(1,-3).map(go)),_.createElement("span",null,n.__("Please commit, stash, or discard your changes before you checkout tags."))),buttons:[r.Dialog.okButton({label:n.__("Dismiss")})]})):t.log({level:fe.ERROR,message:n.__("Failed to checkout tag."),error:e})}(e,t.props.logger,t.props.trans)}t.props.logger.log({level:fe.SUCCESS,message:t.props.trans.__("Tag checkout.")})}else(0,r.showErrorMessage)(t.props.trans.__("Checkout tags is disabled"),t.props.trans.__("The repository contains files with uncommitted changes. Please commit or discard these changes before switching to a tag."))}}}class fo extends _.Component{constructor(e){super(e),this._onPullClick=async()=>{await this.props.commands.execute(ve.gitPull),Un.sendEvent(Zn.GitPull)},this._onPushClick=async()=>{await this.props.commands.execute(ve.gitPush),Un.sendEvent(Zn.GitPush)},this._onBranchClick=()=>{this.setState({branchMenu:!this.state.branchMenu})},this._onRefreshClick=async()=>{this.props.logger.log({level:fe.RUNNING,message:this.props.trans.__("Refreshing…")});try{await this.props.model.refresh(),this.props.logger.log({level:fe.SUCCESS,message:this.props.trans.__("Successfully refreshed.")})}catch(e){console.error(e),this.props.logger.log({level:fe.ERROR,message:this.props.trans.__("Failed to refresh."),error:e})}},this.state={branchMenu:!1,tab:0}}render(){return _.createElement("div",{className:Xs},this._renderTopNav(),this._renderRepoMenu(),this._renderBranchMenu())}_renderTopNav(){var e;const t=this.props.branches.filter((e=>e.is_current_branch)),n=this.props.branches.some((e=>e.is_remote_branch)),i=null!==(null===(e=t[0])||void 0===e?void 0:e.upstream);return _.createElement("div",{className:Ks},_.createElement("span",{className:oo}),_.createElement(Mi.Badge,{className:ao,variant:"dot",invisible:!n||0===this.props.nCommitsBehind,"data-test-id":"pull-badge"},_.createElement(wt,{className:so,disabled:!n,icon:Ke,onClick:n?this._onPullClick:void 0,title:n?this.props.trans.__("Pull latest changes")+(this.props.nCommitsBehind>0?this.props.trans.__(" (behind by %1 commits)",this.props.nCommitsBehind):""):this.props.trans.__("No remote repository defined")})),_.createElement(Mi.Badge,{className:ao,variant:"dot",invisible:!n||0===this.props.nCommitsAhead&&i,"data-test-id":"push-badge"},_.createElement(wt,{className:so,disabled:!n,icon:Ye,onClick:n?this._onPushClick:void 0,title:n?i?this.props.trans.__("Push committed changes")+(this.props.nCommitsAhead>0?this.props.trans.__(" (ahead by %1 commits)",this.props.nCommitsAhead):""):this.props.trans.__("Publish branch"):this.props.trans.__("No remote repository defined")})),_.createElement(wt,{className:so,icon:pt,onClick:this._onRefreshClick,title:this.props.trans.__("Refresh the repository to detect local and remote changes")}))}_renderRepoMenu(){const e=p.PathExt.basename(this.props.repository||p.PageConfig.getOption("serverRoot"))||"Jupyter Server Root";return _.createElement("div",{className:Ys},_.createElement("button",{disabled:!0,className:Js,title:this.props.trans.__("Current repository: %1",p.PageConfig.getOption("serverRoot")+"/"+this.props.repository)},_.createElement("div",{className:to},_.createElement("div",{className:no},_.createElement(it.react,{elementPosition:"left",tag:"div"}),_.createElement("div",{className:lo},this.props.trans.__("Current Repository"))),_.createElement("p",{className:ro},e))))}_renderBranchMenu(){return null===this.props.model.pathRepository?null:_.createElement("div",{className:Ys},_.createElement("button",{className:(0,Ie.classes)(Js,Qs),title:this.props.trans.__("Manage branches and tags"),onClick:this._onBranchClick},_.createElement("div",{className:to},_.createElement("div",{className:io},_.createElement(rt.react,{elementPosition:"left",tag:"div"}),_.createElement("div",{className:lo},this.props.trans.__("Current Branch"))),_.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},_.createElement("div",{className:ro},this.props.currentBranch||""),this.state.branchMenu?_.createElement(m.caretUpIcon.react,{className:eo}):_.createElement(m.caretDownIcon.react,{className:eo})))),this.state.branchMenu?this._renderTabs():null)}_renderTabs(){return _.createElement(_.Fragment,null,_.createElement(Mi.Tabs,{classes:{root:Er,indicator:Rr},value:this.state.tab,onChange:(e,t)=>{this.setState({tab:t})},centered:!0,TabIndicatorProps:{style:{display:"none"}}},_.createElement(Mi.Tab,{classes:{root:Sr,selected:Fr},title:this.props.trans.__("View branches"),label:this.props.trans.__("Branches"),disableFocusRipple:!0,disableRipple:!0}),_.createElement(Mi.Tab,{classes:{root:Sr,selected:Fr},title:this.props.trans.__("View tags"),label:this.props.trans.__("Tags"),disableFocusRipple:!0,disableRipple:!0})),0===this.state.tab?this._renderBranches():this._renderTags())}_renderBranches(){return _.createElement(mo,{currentBranch:this.props.currentBranch||"",branches:this.props.branches,branching:this.props.branching,commands:this.props.commands,logger:this.props.logger,model:this.props.model,trans:this.props.trans})}_renderTags(){return _.createElement(uo,{logger:this.props.logger,model:this.props.model,branching:this.props.branching,trans:this.props.trans})}}let _o=!1;class vo extends _.Component{constructor(e){super(e),this.refreshBranch=async()=>{const{currentBranch:e}=this.props.model;this.setState({branches:this.props.model.branches,currentBranch:e?e.name:"master"})},this.refreshHistory=async()=>{if(null!==this.props.model.pathRepository){const e=await this.props.model.log(this.props.settings.composite.historyCount);let t=new Array;0===e.code&&(t=e.commits),this.setState({pastCommits:t})}},this.refreshView=async()=>{null!==this.props.model.pathRepository&&(await this.refreshBranch(),await this.refreshHistory())},this.commitFiles=async()=>{let e=this.state.commitSummary;if(this.state.commitDescription&&(e=e+"\n\n"+this.state.commitDescription+"\n"),!e&&!this.state.commitAmend)return;const t=this.props.settings.composite.simpleStaging?this._commitMarkedFiles:this._commitStagedFiles;try{this.state.commitAmend?await t(null):await t(e),this.setState({commitSummary:"",commitDescription:""})}catch(e){console.error(e)}Un.sendEvent(Zn.GitCommit)},this._onTabChange=(e,t)=>{1===t&&this.refreshHistory(),this.setState({tab:t})},this._setCommitDescription=e=>{this.setState({commitDescription:e})},this._setCommitSummary=e=>{this.setState({commitSummary:e})},this._setCommitAmend=e=>{this.setState({commitAmend:e})},this._commitMarkedFiles=async e=>{this.props.logger.log({level:fe.RUNNING,message:this.props.trans.__("Staging files...")}),await this.props.model.reset(),await this.props.model.add(...this._markedFiles.map((e=>e.to))),await this._commitStagedFiles(e)},this._commitStagedFiles=async e=>{const t={level:fe.ERROR,message:this.props.trans.__("Failed to commit changes.")};try{await this._hasIdentity(this.props.model.pathRepository),this.props.logger.log({level:fe.RUNNING,message:this.props.trans.__("Committing changes...")}),this.state.commitAmend?await this.props.model.commit(null,!0):await this.props.model.commit(e),this.props.logger.log({level:fe.SUCCESS,message:this.props.trans.__("Committed changes.")});const t=this.props.model.branches.some((e=>e.is_remote_branch));this.props.settings.composite.commitAndPush&&t&&await this.props.commands.execute(ve.gitPush)}catch(e){throw this.props.logger.log(Object.assign(Object.assign({},t),{error:e})),e}},this._previousRepoPath=null;const{branches:t,currentBranch:n,pathRepository:i}=e.model;this.state={branches:t,currentBranch:n?n.name:"master",files:[],remoteChangedFiles:[],nCommitsAhead:0,nCommitsBehind:0,pastCommits:[],repository:i,tab:0,commitSummary:"",commitDescription:"",commitAmend:!1}}componentDidMount(){const{model:e,settings:t}=this.props;e.repositoryChanged.connect((async(t,n)=>{(async function(e){if(null===e||!0===_o)return;const t=await function(e){return Fe(`link-git/check_merge_driver?git_top_level=${encodeURIComponent(e)}`).then((e=>e.message))}(e);if(void 0!==t&&""!==t&&"Unhandled error"!==t){if(t.indexOf("ALREADY_EXIST")>-1)return new r.Dialog({title:"Failed to add Link merge driver in .gitattributes",body:"To use Link Git, it needs to add Link git merge driver to .gitattributes. But it failed because *.ipynb merge option already exists in the repository's .gitattributes. Please remove the *.ipynb merge option and reopen the repository.",buttons:[r.Dialog.okButton({label:"Close"})]}).launch(),void Un.sendEvent(Zn.GitMergeDriverDg);_o=!0,await function(e){return Re("link-git/update_merge_driver",{git_top_level:e}).then((e=>e.message))}(e),_o=!1}})(await e.showTopLevel(n.newValue)),this.setState({repository:n.newValue}),this.refreshView()}),this),e.statusChanged.connect((async()=>{const t=await e.remoteChangedFiles();this.setState({files:e.status.files,remoteChangedFiles:t,nCommitsAhead:e.status.ahead,nCommitsBehind:e.status.behind})}),this),e.headChanged.connect((async()=>{await this.refreshBranch(),1===this.state.tab&&this.refreshHistory()}),this),e.selectedHistoryFileChanged.connect((()=>{this.setState({tab:1}),this.refreshHistory()}),this),e.markChanged.connect((()=>this.forceUpdate()),this),e.notifyRemoteChanges.connect(((e,t)=>{this.warningDialog(t)}),this),t.changed.connect(this.refreshView,this),this.setTrackSidebarClick()}componentWillUnmount(){C.Signal.clearData(this),this.unsetTrackSidebarClick()}setTrackSidebarClick(){window.setTimeout((()=>{const e=document.querySelector('[role=tab][title="Link Git"]');e&&e.addEventListener("click",(()=>Un.sendEvent(Zn.GitTab)))}),10)}unsetTrackSidebarClick(){const e=document.querySelector('[role=tab][title="Link Git"]');e&&e.removeEventListener("click",(()=>Un.sendEvent(Zn.GitTab)))}render(){return _.createElement("div",{className:Cr},null!==this.state.repository?_.createElement(_.Fragment,null,this._renderToolbar(),this._renderMain()):this._renderWarning())}_renderToolbar(){const e=Boolean(this.props.settings.composite.disableBranchWithChanges&&(this._hasUnStagedFile()||this._hasStagedFile()));return _.createElement(fo,{currentBranch:this.state.currentBranch,branches:this.state.branches,branching:!e,commands:this.props.commands,logger:this.props.logger,model:this.props.model,nCommitsAhead:this.state.nCommitsAhead,nCommitsBehind:this.state.nCommitsBehind,repository:this.state.repository||"",trans:this.props.trans})}_renderMain(){return _.createElement(_.Fragment,null,this._renderTabs(),1===this.state.tab?this._renderHistory():this._renderChanges())}_renderTabs(){return _.createElement(vr.Z,{classes:{root:Er,indicator:Rr},value:this.state.tab,onChange:this._onTabChange,centered:!0,TabIndicatorProps:{style:{display:"none"}}},_.createElement(_r.Z,{classes:{root:Sr,selected:Fr},title:this.props.trans.__("View changed files"),label:this.props.trans.__("Changes"),disableFocusRipple:!0,disableRipple:!0}),_.createElement(_r.Z,{classes:{root:Sr,selected:Fr},title:this.props.trans.__("View commit history"),label:this.props.trans.__("History"),disableFocusRipple:!0,disableRipple:!0}))}_renderChanges(){const e=this.props.model.branches.some((e=>e.is_remote_branch)),t=this.props.settings.composite.commitAndPush&&e?this.props.trans.__("Commit and Push"):this.props.trans.__("Commit");return _.createElement(_.Fragment,null,_.createElement(qt,{files:this._sortedFiles,model:this.props.model,commands:this.props.commands,settings:this.props.settings,trans:this.props.trans}),_.createElement(as,{commands:this.props.commands,hasFiles:this.props.settings.composite.simpleStaging?this._markedFiles.length>0:this._hasStagedFile(),trans:this.props.trans,label:t,summary:this.state.commitSummary,description:this.state.commitDescription,amend:this.state.commitAmend,setSummary:this._setCommitSummary,setDescription:this._setCommitDescription,setAmend:this._setCommitAmend,onCommit:this.commitFiles}))}_renderHistory(){return _.createElement(qs,{branches:this.state.branches,commits:this.state.pastCommits,model:this.props.model,commands:this.props.commands,trans:this.props.trans})}_renderWarning(){const e=this.props.filebrowser.path,{commands:t}=this.props;return _.createElement("div",{className:br},_.createElement(mt.react,{elementPosition:"center",tag:"div"}),_.createElement("div",{className:yr},_.createElement("div",{className:wr},"Not in Git Repository"),e?_.createElement(_.Fragment,null,_.createElement("b",{title:e},p.PathExt.basename(e))," ",this.props.trans.__("is not")):this.props.trans.__("You are not currently in"),this.props.trans.__(" a Git repository. To use Git, navigate to a local repository, initialize a repository here, or clone an existing repository.")),_.createElement("div",{className:xr},_.createElement("button",{className:kr,onClick:()=>t.execute("filebrowser:toggle-main")},_.createElement(gt.react,{elementPosition:"left",tag:"span"}),this.props.trans.__("Open the FileBrowser")),_.createElement("button",{className:kr,onClick:()=>t.execute(ve.gitInit)},_.createElement(ut.react,{elementPosition:"left",tag:"span"}),this.props.trans.__("Initialize a Repository")),t.hasCommand(ve.gitClone)&&_.createElement("button",{className:kr,onClick:async()=>{await t.execute(ve.gitClone),await t.execute("filebrowser:toggle-main")}},_.createElement(ft.react,{elementPosition:"left",tag:"span"}),this.props.trans.__("Clone a Repository"))))}async _hasIdentity(e){if(e!==this._previousRepoPath)try{const t=(await this.props.model.config()).options,n=Object.keys(t);if(n.indexOf("user.name")<0||n.indexOf("user.email")<0){const e=new Lr,t=await e.showDialog();if(!t.accepted)throw new Error(this.props.trans.__("User refused to set identity."));const{name:n,email:i}=t.value;await this.props.model.config({"user.name":n,"user.email":i})}this._previousRepoPath=e}catch(e){if(e instanceof ue.GitResponseError)throw e;throw new Error(this.props.trans.__("Failed to set your identity. %1",e.message))}}_hasStagedFile(){return this.state.files.some((e=>"staged"===e.status||"partially-staged"===e.status))}_hasUnStagedFile(){return this.state.files.some((e=>"unstaged"===e.status||"partially-staged"===e.status))}get _markedFiles(){return this._sortedFiles.filter((e=>this.props.model.getMark(e.to)))}get _sortedFiles(){const{files:e,remoteChangedFiles:t}=this.state;let n=e;return t&&(n=n.concat(t)),n.sort(((e,t)=>e.to.localeCompare(t.to))),n}async warningDialog(e){const t=this.props.trans.__("One or more open files are behind %1 head. Do you want to pull the latest remote version?",this.props.model.status.remote),n=new r.Dialog({title:t,body:this._renderBody(e.notNotified,e.notified),buttons:[r.Dialog.cancelButton({label:this.props.trans.__("Continue Without Pulling")}),r.Dialog.warnButton({label:this.props.trans.__("Pull"),caption:this.props.trans.__("Git Pull from Remote Branch")})]});(await n.launch()).button.accept&&await this.props.commands.execute(ve.gitPull,{})}_renderBody(e,t=[]){const n=e.map((e=>{console.log(e.to);const t=this.props.trans.__(e.to);return _.createElement("li",{key:t},t)}));let i=_.createElement("ul",null,n);if(t.length>0){const e=this.props.trans.__("The following open files remain behind:"),n=t.map((e=>{console.log(e.to);const t=this.props.trans.__(e.to);return _.createElement("li",{key:t},t)}));i=_.createElement("div",null,i,e,_.createElement("ul",null,n))}return _.createElement("div",null,i)}}const Co=(0,Ie.style)({display:"flex",flexDirection:"column",minWidth:"300px",color:"var(--jp-ui-font-color1)",background:"var(--jp-layout-color1)",fontSize:"var(--jp-ui-font-size1)"});class bo extends r.ReactWidget{constructor(e,t,n,i,r,s){super(s),this.node.id="GitSession-root",this.addClass(Co),this._trans=r,this._commands=n,this._fileBrowserModel=i,this._model=e,this._settings=t,e.refreshStandbyCondition=()=>!this._settings.composite.refreshIfHidden&&this.isHidden}onBeforeShow(e){this._model.refresh().catch((e=>{console.error("Fail to refresh model when displaying GitWidget.",e)})),super.onBeforeShow(e)}render(){return _.createElement(tr.ZP,{injectFirst:!0},_.createElement(Tn.Consumer,null,(e=>_.createElement(_.Fragment,null,_.createElement(vo,{commands:this._commands,filebrowser:this._fileBrowserModel,logger:e,model:this._model,settings:this._settings,trans:this._trans}),_.createElement(r.UseSignal,{signal:e.signal,initialArgs:{message:"",level:fe.INFO}},((e,t)=>(null==t?void 0:t.message)?_.createElement(fr,{log:t,settings:this._settings,trans:this._trans}):null))))))}}const yo=({onSubmit:e,onCancel:t,onUpdateFormData:n,retriedWithNonExistent:i=!1})=>{const[r,s]=v().useState({repoUrl:""}),[o,a]=v().useState(""),l=e=>e&&0!==e.length?(a(""),!0):(a("Required"),!1);return(0,_.useEffect)((()=>{n(r)}),[r]),v().createElement(Fn,null,v().createElement("div",{className:"form-header"},v().createElement("div",{className:"form-title"},v().createElement(_t.react,{tag:"span",className:"form-title__icon",elementPosition:"center"}),v().createElement("span",{className:"form-title__text"},"Clone a repo"))),v().createElement("div",{className:"form-body"},v().createElement("label",null,v().createElement("div",{className:"label-text"},"Enter the Clone URI of the repository"),v().createElement("input",{type:"text",placeholder:"https://host.com/org/repo.git",onChange:e=>{return t=e.target.value,s({repoUrl:t}),void l(t);var t}}),o.length>0&&v().createElement("div",{className:"form-control__error-message"},v().createElement(vt.react,{elementPosition:"center",tag:"span"}),o),i&&v().createElement("div",{className:"form-control__error-message"},v().createElement(vt.react,{elementPosition:"center",tag:"span"}),"Incorrect git repo information"))),v().createElement("div",{className:"form-footer"},t&&v().createElement(kn.Z,{variant:"outlined",onClick:t,style:{borderColor:"var(--color-primary)",color:"var(--color-primary)",textTransform:"none"}},"Cancel"),v().createElement(kn.Z,{variant:"contained",onClick:()=>{l(r.repoUrl)&&e()},style:{backgroundColor:"var(--color-primary)",color:"#fff",textTransform:"none"}},"Clone")))};class wo extends r.ReactWidget{constructor(){super(),this.setFormData=e=>{this.formData=e},this.formData={repoUrl:""},this.setFormData=this.setFormData.bind(this)}submitForm(){return this.formData}render(){return v().createElement(yo,{onSubmit:this.submitForm})}showDialog({retriedWithNonExistent:e}){return In({formComponent:({onSubmit:t,onCancel:n})=>v().createElement(yo,{onSubmit:t,onCancel:n,onUpdateFormData:this.setFormData,retriedWithNonExistent:e}),onSubmit:()=>this.submitForm()})}}const xo=wo,ko=["Repository not found","does not exist","Could not read from remote repository"],Eo={id:"mrx_link_git:clone",requires:[h.ITranslator,ge,o.IFileBrowserFactory],activate:(e,t,n,i)=>{const r=(t=t||h.nullTranslator).load("mrx_link_git"),s=i.defaultBrowser,o=s.model;e.commands.addCommand(ve.gitClone,{label:r.__("Clone a Repository"),caption:r.__("Clone a repository from a URL"),isEnabled:()=>null===n.pathRepository,execute:async()=>{!async function e(t=!1){const i=new xo,s=await i.showDialog({retriedWithNonExistent:t});if(s.accepted&&s.value.repoUrl){Hn.log({level:fe.RUNNING,message:r.__("Cloning…")});try{const e=await Kn(n,Wn.Clone,r,{path:o.path,url:s.value.repoUrl});Hn.log({message:r.__("Successfully cloned"),level:fe.SUCCESS,details:e}),await o.refresh()}catch(t){console.error("Encountered an error when cloning the repository. Error: ",t,t.message);const n=t.message||"";if(n&&ko.some((e=>n.indexOf(e)>-1)))return Hn.log({message:"",level:fe.ERROR}),void e(!0);Hn.log({message:r.__("Failed to clone"),level:fe.ERROR,error:t})}}}()}}),er(n,s,e.commands),Xn(n,s,e.contextMenu)},autoStart:!0},So={id:"mrx_link_git:plugin",requires:[a.IMainMenu,i.ILayoutRestorer,o.IFileBrowserFactory,l.IRenderMimeRegistry,c.ISettingRegistry,s.IDocumentManager,d.IStatusBar,h.ITranslator,r.IThemeManager],provides:ge,activate:async function(e,t,n,i,s,o,a,l,c,d){let g,v,C=null;d.themeChanged.connect(((e,t)=>{t&&"JupyterLab Dark"===t.newValue?document.body.dataset.theme="dark":document.body.dataset.theme="light"}));const y=i.defaultBrowser,w=(c=c||h.nullTranslator).load("mrx_link_git");try{g=await o.load(So.id)}catch(e){console.error(w.__("Failed to load settings for the Link Git Extension.\n%1",e))}try{v=await async function(e){try{const e="settings"+p.URLExt.objectToQueryString({version:Qi});return await be(e,"GET")}catch(t){if(t instanceof ue.GitResponseError){const n=t.response;if(404===n.status){const t=e.__("Link Git server extension is unavailable.");throw new me.ServerConnection.ResponseError(n,t)}{const e=t.message;throw console.error("Failed to get the server extension settings",e),new me.ServerConnection.ResponseError(n,e)}}throw t}}(w);const{frontendVersion:e,gitVersion:t,serverVersion:n}=v;if(!t)throw new Error(w.__("git command not found - please ensure you have Git > 2 installed"));{const e=t.split(".");if(Number.parseInt(e[0])<2)throw new Error(w.__("git command version must be > 2; got %1.",t))}if(e&&e!==n)throw new Error(w.__("The versions of the Link Git server frontend and backend do not match. The mrx_link_git frontend extension has version: %1 while the python package has version %2. ",e,n))}catch(e){return console.error(w.__("Failed to load the mrx-link-git server extension settings"),e),(0,r.showErrorMessage)(w.__("Failed to load the mrx-link-git server extension"),e.message,[r.Dialog.warnButton({label:w.__("Dismiss")})]),null}if(C=new Le(a,e.docRegistry,g),Promise.all([e.restored,y.model.restored]).then((()=>{C.pathRepository=y.model.path})),y.model.pathChanged.connect(((e,t)=>{C.pathRepository=t.newValue})),C.headChanged.connect((()=>{y.model.refresh()})),e.serviceManager.contents.fileChanged.connect((()=>C.refreshStatus())),g){!function(e,t,n,i,s){const{commands:o,shell:a}=e,l=s.load("mrx_link_git");function c(e){const t=e.map((e=>_.createElement("li",{key:e.to},_.createElement("b",null,e.to))));return _.createElement("ul",null,t)}o.addCommand(ve.gitSubmitCommand,{label:l.__("Commit from the Commit Box"),caption:l.__("Submit the commit using the summary and description from commit box"),execute:()=>{},isVisible:()=>!1}),o.addCommand(ve.gitTerminalCommand,{label:l.__("Open Git Repository in Terminal"),caption:l.__("Open a New Terminal to the Git Repository"),execute:async e=>{const n=await o.execute("terminal:create-new",e);try{return null!==t.pathRepository&&n.content.session.send({type:"stdin",content:[`cd "${t.pathRepository.split('"').join('\\"')}"\n`]}),n}catch(e){console.error(e),n.dispose()}},isEnabled:()=>null!==t.pathRepository&&e.serviceManager.terminals.isAvailable()}),o.addCommand(ve.gitUI,{label:l.__("Git Interface"),caption:l.__("Go to Git user interface"),execute:()=>{try{a.activateById("jp-git-sessions")}catch(e){console.error("Fail to open Git tab.")}}}),o.addCommand(ve.gitInit,{label:l.__("Initialize a Repository"),caption:l.__("Create an empty Git repository or reinitialize an existing one"),execute:async()=>{const e=n.path;if((await(0,r.showDialog)({title:l.__("Initialize a Repository"),body:l.__("Do you really want to make this directory a Git Repo?"),buttons:[r.Dialog.cancelButton({label:l.__("Cancel")}),r.Dialog.warnButton({label:l.__("Yes")})]})).button.accept){Hn.log({message:l.__("Initializing…"),level:fe.RUNNING});try{await t.init(e),t.pathRepository=e,Hn.log({message:l.__("Git repository initialized."),level:fe.SUCCESS})}catch(e){console.error(l.__("Encountered an error when initializing the repository. Error: "),e),Hn.log({message:l.__("Failed to initialize the Git repository"),level:fe.ERROR,error:e})}}},isEnabled:()=>null===t.pathRepository}),o.addCommand(ve.gitOpenUrl,{label:e=>e.text,execute:e=>{const t=e.url;window.open(t)}}),o.addCommand(ve.gitToggleSimpleStaging,{label:l.__("Simple staging"),isToggled:()=>!!i.composite.simpleStaging,execute:e=>{i.set("simpleStaging",!i.composite.simpleStaging)}}),o.addCommand(ve.gitToggleDoubleClickDiff,{label:l.__("Double click opens diff"),isToggled:()=>!!i.composite.doubleClickDiff,execute:e=>{i.set("doubleClickDiff",!i.composite.doubleClickDiff)}}),o.addCommand(ve.gitAddRemote,{label:l.__("Add Remote Repository"),caption:l.__("Add a Git remote repository"),isEnabled:()=>null!==t.pathRepository,execute:async e=>{if(null===t.pathRepository)return void console.warn(l.__("Not in a Git repository. Unable to add a remote."));let n=e.url;const i=e.name;if(!n){const e=await r.InputDialog.getText({title:l.__("Add a remote repository"),placeholder:l.__("Remote Git repository URL")});e.button.accept&&(n=e.value)}if(n)try{await t.addRemote(n,i)}catch(e){console.error(e),(0,r.showErrorMessage)(l.__("Error when adding remote repository"),e)}}}),o.addCommand(ve.gitOpenGitignore,{label:l.__("Open .gitignore"),caption:l.__("Open .gitignore"),isEnabled:()=>null!==t.pathRepository,execute:async()=>{await t.ensureGitignore()}}),o.addCommand(ve.gitPush,{label:e=>e.force?l.__("Push to Remote (Force)"):l.__("Push to Remote"),caption:l.__("Push code to remote repository"),isEnabled:()=>null!==t.pathRepository,execute:async e=>{Hn.log({level:fe.RUNNING,message:l.__("Pushing…")});try{const n=await Kn(t,e.force?Wn.ForcePush:Wn.Push,l);Hn.log({message:l.__("Successfully pushed"),level:fe.SUCCESS,details:n})}catch(e){console.error(l.__("Encountered an error when pushing changes. Error: "),e),Hn.log({message:l.__("Failed to push"),level:fe.ERROR,error:e})}}}),o.addCommand(ve.gitPull,{label:e=>e.force?l.__("Pull from Remote (Force)"):l.__("Pull from Remote"),caption:e=>e.force?l.__("Discard all current changes and pull from remote repository"):l.__("Pull latest code from remote repository"),isEnabled:()=>null!==t.pathRepository,execute:async e=>{try{e.force&&await Zt(t,l,e.fallback),Hn.log({level:fe.RUNNING,message:l.__("Pulling…")});const n=await Kn(t,Wn.Pull,l);Hn.log({message:l.__("Successfully pulled"),level:fe.SUCCESS,details:n})}catch(e){console.error("Encountered an error when pulling changes. Error: ",e),("string"==typeof e?e:e.message).toLowerCase().includes("your local changes to the following files would be overwritten by merge")?await o.execute(ve.gitPull,{force:!0,fallback:!0}):e.cancelled?Hn.log({message:"",level:fe.INFO}):Hn.log({message:l.__("Failed to pull"),level:fe.ERROR,error:e})}}}),o.addCommand(ve.gitShowDiff,{label:l.__("Show Diff"),caption:l.__("Display a file diff."),execute:async n=>{var i,c;if(!await Ro())return void window.LinkDialog({type:"inform",title:"License is required",body:"Please try again, after renewing your license.",buttons:[{type:"fill",label:"Close",func:()=>{}}]});const{model:d,isText:h}=n;console.log("MODEL : ",d);const m=p.PathExt.join(null!==(i=d.repositoryPath)&&void 0!==i?i:"/",d.filename);console.log("IS TEXT : ",h);const g=null!==(c=Ne(m))&&void 0!==c?c:h&&ae;if(g){console.log("BUILD DIFF WIDGET: ",g);const n=`diff-${m}-${d.reference.label}-${d.challenger.label}`,i=a.widgets("main");let c=i.next();for(;c;){if(c.id===n){a.activateById(n);break}c=i.next()}if(!c){const i=new u.PromiseDelegate;try{if(d.hasConflict){const h=async()=>{await o.execute("docmanager:open",{path:t.getRelativeFilePath(d.filename)}),await t.add(d.filename),await t.refresh(),e.shell.activateById("canvas-pipeline-extension"),window.LinkDialog({type:"inform",title:"Resolve Merge Conflicts",body:"Please check the merge conflicts and create a new commit after resolving conflicts.",buttons:[{type:"fill",label:"Close",func:()=>{}}]}),Un.sendEvent(Zn.GitMerge)},u=d.filename.split(".");if(u[u.length-1].includes("ipynb"))try{await be("diffnotebook","POST",{currentContent:await d.challenger.content(),previousContent:await d.reference.content(),baseContent:await d.base.content(),filePath:d.filename,fileAbsPath:e.paths.directories.serverRoot+"/"+d.repositoryPath+"/"+d.filename});const t=e.shell.widgets("main").iter();for(;;){const e=t.next();if(!e)break;if(e.context&&e.context.path.includes(d.repositoryPath)&&e.context.path.includes(d.filename))return e.disposed.connect((async()=>{setTimeout((async()=>await h()),1e3)})),void e.close()}await h()}catch(e){console.log(e)}else{const o=new f.Panel,h=c=new r.MainAreaWidget({content:o,reveal:i.promise});h.id=n,h.title.label=p.PathExt.basename(d.filename),h.title.caption=m,h.title.icon=Ge,h.title.closable=!0,h.addClass("jp-git-diff-parent-widget"),console.log("DIFF WIDGET : ",h),a.add(h,"main"),a.activateById(h.id);const u=await g(d,h.toolbar,s);console.log("WIDGET : ",u),h.toolbar.addItem("spacer",r.Toolbar.createSpacerItem());const _=new r.ToolbarButton({label:l.__("Mark as resolved"),onClick:async()=>{var n;if(u.isFileResolved||(await(0,r.showDialog)({title:l.__("Resolve with conflicts"),body:l.__("Are you sure you want to mark this file as resolved with merge conflicts?")})).button.accept)try{await e.serviceManager.contents.save(m,await u.getResolvedFile()),await t.add(d.filename),await t.refresh()}catch(e){Hn.log({message:null!==(n=e.message)&&void 0!==n?n:e,level:fe.ERROR})}finally{h.dispose()}},tooltip:l.__("Mark file as resolved"),className:"jp-git-diff-resolve"});h.toolbar.addItem("resolve",_),i.resolve(),o.addWidget(u)}}else{const e=new f.Panel,t=c=new r.MainAreaWidget({content:e,reveal:i.promise});t.id=n,t.title.label=p.PathExt.basename(d.filename),t.title.caption=m,t.title.icon=Ge,t.title.closable=!0,t.addClass("jp-git-diff-parent-widget"),console.log("DIFF WIDGET : ",t),a.add(t,"main"),a.activateById(t.id);const o=await g(d,t.toolbar,s);console.log("WIDGET : ",o),t.toolbar.addItem("spacer",r.Toolbar.createSpacerItem());const h=new r.ToolbarButton({label:l.__("Refresh"),onClick:async()=>{await o.refresh(),h.hide()},tooltip:l.__("Refresh diff widget"),className:"jp-git-diff-refresh"});h.hide(),t.toolbar.addItem("refresh",h);const u=()=>{h.show()};d.changed.connect(u),o.disposed.connect((()=>d.changed.disconnect(u))),i.resolve(),e.addWidget(o)}}catch(e){console.error(e);const t=`Load Diff Model Error (${e.message||e})`;i.reject(t)}}return c}return await(0,r.showErrorMessage)(l.__("Diff Not Supported"),l.__("Diff is not supported for %1 files.",p.PathExt.extname(d.filename).toLocaleLowerCase())),null},icon:Ge.bindprops({stylesheet:"menuItem"})}),o.addCommand(ve.gitMerge,{label:l.__("Merge Branch…"),caption:l.__("Merge selected branch in the current branch"),execute:async e=>{let{branch:n}=null!=e?e:{};if(!n){const e=t.branches.filter((e=>!e.is_current_branch&&!e.is_remote_branch)),i="git-dialog-MergeBranch";let s=document.querySelector(`#${i}`);s||(s=document.createElement("div"),s.id=i,document.body.appendChild(s));const o=new u.PromiseDelegate,a=r.ReactWidget.create(_.createElement(xn,{currentBranch:t.currentBranch.name,branches:e,onClose:e=>{a.dispose(),o.resolve(null!=e?e:null)},trans:l}));f.Widget.attach(a,s),n=await o.promise}if(n){Hn.log({level:fe.RUNNING,message:l.__("Merging branch '%1'…",n)});try{await t.merge(n)}catch(e){return void Hn.log({level:fe.ERROR,message:l.__("Failed to merge branch '%1' into '%2'.",n,t.currentBranch.name),error:e})}Hn.log({level:fe.SUCCESS,message:l.__("Branch '%1' merged into '%2'.",n,t.currentBranch.name)})}},isEnabled:()=>t.branches.some((e=>!e.is_current_branch&&!e.is_remote_branch))}),o.addCommand(_e.gitFileOpen,{label:l.__("Open"),caption:$n(l.__("Open selected file"),l.__("Open selected files")),execute:async e=>{const{files:n}=e;for(const e of n){const{x:n,y:i,to:s}=e;if("D"===n||"D"===i)return void await(0,r.showErrorMessage)(l.__("Open File Failed"),l.__("This file has been deleted!"));try{"/"!==s[s.length-1]?o.execute("docmanager:open",{path:t.getRelativeFilePath(s)}):console.log("Cannot open a folder here")}catch(e){console.error(`Fail to open ${s}.`)}}},icon:Xe.bindprops({stylesheet:"menuItem"})}),o.addCommand(_e.gitFileDiff,{label:l.__("Diff"),caption:$n(l.__("Diff selected file"),l.__("Diff selected files")),execute:async n=>{const{files:i}=n;console.log("FILES : ",i);for(const n of i){const{context:i,filePath:r,previousFilePath:s,isText:a,status:c}=n;if(console.log("======================================="),console.log("FILE CONTEXT : ",i),console.log("FILE PATH : ",r),console.log("PREVIOUS FILE PATH : ",s),console.log("IS TEXT : ",a),console.log("STATUS : ",c),console.log("======================================="),"untracked"===c)continue;const d=t.pathRepository,h=r,m=p.PathExt.join(d,h),g="staged"===c?ue.Diff.SpecialRef.INDEX:ue.Diff.SpecialRef.WORKING,u="unmerged"===c?{currentRef:"MERGE_HEAD",previousRef:"HEAD",baseRef:ue.Diff.SpecialRef.BASE}:null!=i?i:{currentRef:g,previousRef:"HEAD"};console.log("DIFF CONTEXT : ",u);const f=ue.Diff.SpecialRef[u.currentRef]?{special:ue.Diff.SpecialRef[u.currentRef]}:{git:u.currentRef},_={challenger:{content:async()=>be(p.URLExt.join(d,"content"),"POST",{filename:h,reference:f}).then((e=>(console.log("CHALLENGER : ",e),e.content))),label:ue.Diff.SpecialRef[u.currentRef]||u.currentRef,source:u.currentRef,updateAt:Date.now()},filename:h,reference:{content:async()=>be(p.URLExt.join(d,"content"),"POST",{filename:null!=s?s:h,reference:{git:u.previousRef}}).then((e=>(console.log("REFERENCE : ",e),e.content))),label:ue.Diff.SpecialRef[u.previousRef]||u.previousRef,source:u.previousRef,updateAt:Date.now()},repositoryPath:d};s&&(_.reference.label=`${s} (${_.reference.label.slice(0,7)})`,_.challenger.label=`${r} (${_.challenger.label.slice(0,7)})`),u.baseRef&&(_.reference.label=l.__("Current"),_.challenger.label=l.__("Incoming"),_.base={content:async()=>be(p.URLExt.join(d,"content"),"POST",{filename:h,reference:{special:ue.Diff.SpecialRef[u.baseRef]}}).then((e=>(console.log("CONFLICT : ",e),e.content))),label:l.__("Result"),source:u.baseRef,updateAt:Date.now()});const v=new b(_),C=await o.execute(ve.gitShowDiff,{model:v,isText:a});if(C){if("HEAD"===u.previousRef){const e=()=>{v.reference=Object.assign(Object.assign({},v.reference),{updateAt:Date.now()})};t.headChanged.connect(e),C.disposed.connect((()=>{t.headChanged.disconnect(e)}))}if(u.currentRef===ue.Diff.SpecialRef.WORKING){const t=(e,t)=>{const n=new Date(t.newValue.last_modified).valueOf();t.newValue.path===m&&v.challenger.updateAt!==n&&(v.challenger=Object.assign(Object.assign({},v.challenger),{updateAt:n}))};e.serviceManager.contents.fileChanged.connect(t),C.disposed.connect((()=>{e.serviceManager.contents.fileChanged.disconnect(t)}))}}}},icon:Ge.bindprops({stylesheet:"menuItem"})}),o.addCommand(_e.gitFileAdd,{label:l.__("Add"),caption:$n(l.__("Stage or track the changes to selected file"),l.__("Stage or track the changes of selected files")),execute:async e=>{const{files:n}=e;for(const e of n)await t.add(e.to)},icon:Ve.bindprops({stylesheet:"menuItem"})}),o.addCommand(_e.gitFileStage,{label:l.__("Stage"),caption:$n(l.__("Stage the changes of selected file"),l.__("Stage the changes of selected files")),execute:async e=>{const{files:n}=e;for(const e of n)await t.add(e.to)},icon:Ve.bindprops({stylesheet:"menuItem"})}),o.addCommand(_e.gitFileTrack,{label:l.__("Track"),caption:$n(l.__("Start tracking selected file"),l.__("Start tracking selected files")),execute:async e=>{const{files:n}=e;for(const e of n)await t.add(e.to)},icon:Ve.bindprops({stylesheet:"menuItem"})}),o.addCommand(_e.gitFileUnstage,{label:l.__("Unstage"),caption:$n(l.__("Unstage the changes of selected file"),l.__("Unstage the changes of selected files")),execute:async e=>{const{files:n}=e;for(const e of n)"D"!==e.x&&await t.reset(e.to)},icon:Je.bindprops({stylesheet:"menuItem"})}),o.addCommand(_e.gitFileDelete,{label:l.__("Delete"),caption:$n(l.__("Delete this file"),l.__("Delete these files")),execute:async n=>{const{files:i}=n,s=c(i);if((await(0,r.showDialog)({title:l.__("Delete Files"),body:_.createElement("span",null,l.__("Are you sure you want to permanently delete the following files?               This action cannot be undone."),s),buttons:[r.Dialog.cancelButton({label:l.__("Cancel")}),r.Dialog.warnButton({label:l.__("Delete")})]})).button.accept)for(const n of i)try{await e.commands.execute("docmanager:delete-file",{path:t.getRelativeFilePath(n.to)})}catch(e){(0,r.showErrorMessage)(l.__("Deleting %1 failed.",n.to),e,[r.Dialog.warnButton({label:l.__("Dismiss")})])}},icon:m.closeIcon.bindprops({stylesheet:"menuItem"})}),o.addCommand(_e.gitFileDiscard,{label:l.__("Discard"),caption:$n(l.__("Discard recent changes of selected file"),l.__("Discard recent changes of selected files")),execute:async e=>{const{files:n}=e,i=c(n);if((await(0,r.showDialog)({title:l.__("Discard changes"),body:_.createElement("span",null,l.__("Are you sure you want to permanently discard changes to the following files?               This action cannot be undone."),i),buttons:[r.Dialog.cancelButton({label:l.__("Cancel")}),r.Dialog.warnButton({label:l.__("Discard")})]})).button.accept)for(const e of n)try{"staged"!==e.status&&"partially-staged"!==e.status||await t.reset(e.to),("unstaged"===e.status||"partially-staged"===e.status&&"A"!==e.x)&&await t.checkout({filename:e.to})}catch(t){(0,r.showErrorMessage)(l.__("Discard changes for %1 failed.",e.to),t,[r.Dialog.warnButton({label:l.__("Dismiss")})])}},icon:Ze.bindprops({stylesheet:"menuItem"})}),o.addCommand(_e.gitIgnore,{label:$n(l.__("Ignore this file (add to .gitignore)"),l.__("Ignore these files (add to .gitignore)")),caption:$n(l.__("Ignore this file (add to .gitignore)"),l.__("Ignore these files (add to .gitignore)")),execute:async e=>{const{files:n}=e;for(const e of n)e&&await t.ignore(e.to,!1)}}),o.addCommand(_e.gitIgnoreExtension,{label:e=>{const{files:t}=e,n=t.map((e=>p.PathExt.extname(e.to))).filter((e=>e.length>0));return l._n("Ignore %2 extension (add to .gitignore)","Ignore %2 extensions (add to .gitignore)",n.length,n.join(", "))},caption:$n(l.__("Ignore this file extension (add to .gitignore)"),l.__("Ignore these files extension (add to .gitignore)")),execute:async e=>{const{files:n}=e;for(const e of n)if(e){const n=p.PathExt.extname(e.to);n.length>0&&(await(0,r.showDialog)({title:l.__("Ignore file extension"),body:l.__("Are you sure you want to ignore all %1 files within this git repository?",n),buttons:[r.Dialog.cancelButton(),r.Dialog.okButton({label:l.__("Ignore")})]})).button.label===l.__("Ignore")&&await t.ignore(e.to,!0)}},isVisible:e=>{const{files:t}=e;return t.some((e=>p.PathExt.extname(e.to).length>0))}}),o.addCommand(_e.gitFileHistory,{label:l.__("History"),caption:l.__("View the history of this file"),execute:e=>{const{files:n}=e,i=n[0];i&&(t.selectedHistoryFile=i,a.activateById("jp-git-sessions"))},isEnabled:e=>{const{files:t}=e;return 1===t.length},icon:$e.bindprops({stylesheet:"menuItem"})}),o.addCommand(_e.gitNoAction,{label:l.__("No actions available"),isEnabled:()=>!1,execute:()=>{}})}(e,C,y.model,g,c);const i=new bo(C,g,e.commands,y.model,w);i.id="mrx-link-git-extension",i.title.icon=Oe,i.title.caption="Link Git",n.add(i,"link-git-sessions"),e.shell.add(i,"left",{rank:201}),e.version.split(".").slice(0,2).join(".")<"3.1"&&t.addMenu(function(e,t){const n=[{text:t.__("Set Up Remotes"),url:"https://www.atlassian.com/git/tutorials/setting-up-a-repository"},{text:t.__("Git Documentation"),url:"https://git-scm.com/doc"}],i=new f.Menu({commands:e});i.title.label="Link Git",[ve.gitInit,ve.gitClone,ve.gitMerge,ve.gitPush,ve.gitPull,ve.gitAddRemote,ve.gitTerminalCommand].forEach((e=>{i.addItem({command:e}),e===ve.gitPush&&i.addItem({command:e,args:{force:!0}}),e===ve.gitPull&&i.addItem({command:e,args:{force:!0}})})),i.addItem({type:"separator"}),i.addItem({command:ve.gitToggleSimpleStaging}),i.addItem({command:ve.gitToggleDoubleClickDiff}),i.addItem({type:"separator"}),i.addItem({command:ve.gitOpenGitignore}),i.addItem({type:"separator"});const r=new f.Menu({commands:e});return r.title.label=t.__(" Help "),n.map((e=>{r.addItem({args:e,command:ve.gitOpenUrl})})),i.addItem({type:"submenu",submenu:r}),i}(e.commands,w),{rank:60}),er(C,y,e.commands),function(e,t,n,i){const r=new Yi(i);e.registerStatusItem("link-git-status",{align:"left",item:r,isActive:Ji.isStatusWidgetActive(n),activeStateChanged:n&&n.changed});const s=Ji.createEventCallback(r);t.taskChanged.connect(s),r.disposed.connect((()=>{t.taskChanged.disconnect(s)}))}(l,C,g,w),Xn(C,y,e.contextMenu)}return C.registerDiffProvider("Nbdime",[".ipynb"],((e,t,n)=>(async(e,t,n,i,r)=>{const s=r.load("mrx_link_git"),o=new Zi(e,t,n,s);return o.addClass("jp-git-diff-root"),await o.ready,console.log("DIFF WIDGET : ",o),o})(e,s,d,0,n))),Un.initialize(Qi.indexOf("-dev")>-1),Un.setUserProperties({[Gn.Build]:"default",[Gn.Version]:Qi}),C},autoStart:!0},Fo=[So,Eo];async function Ro(){try{const e=await Fe("mrx-link/license");return"NO_FILE"!==e.data.result&&"INVALID_FILE"!==e.data.result&&"EXPIRED"!==e.data.result&&"IS_CLOSED_NETWORK_EXPIRED"!==e.data.result}catch(e){return!1}}}}]);